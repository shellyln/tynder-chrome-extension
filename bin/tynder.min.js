!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.tynder=t():e.tynder=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var r=n(11),a=n(15);function o(e){if(e.evalCount++,e.config.maxEvalCount&&e.config.maxEvalCount<e.evalCount)throw new r.b}function s(e,t,n,r){if(t.length<n)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${n} / args: ${t.length}.`);if(r&&r<t.length)throw new Error(`[SX] ${e}: Invalid argument length: expected: ${r} / args: ${t.length}.`);return t}const i={}.constructor,c=Function;function l(e,t){if("__proto__"===t||"__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t)throw new Error(`[SX] ${e}: Invalid var name ${t}.`);if("prototype"===t||"constructor"===t)throw new Error(`[SX] ${e}: Invalid var name ${t}.`);if(i.hasOwnProperty(t))throw new Error(`[SX] ${e}: Invalid var name ${t}.`);if("call"===t||"arguments"===t||"caller"===t)throw new Error(`[SX] ${e}: Invalid var name ${t}.`);return t}function u(e,t,n){if(t===a.a||"__proto__"===n||"__defineGetter__"===n||"__defineSetter__"===n||"__lookupGetter__"===n||"__lookupSetter__"===n)throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if(!("prototype"!==n&&"constructor"!==n||null!=t&&"function"!=typeof t))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if((null==t||t===i)&&i.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);if(null==t||t===c){let t=c;for(;t;){if(t.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);t=t.__proto__}}if("function"==typeof t&&!t.hasOwnProperty(n))throw new Error(`[SX] ${e}: Invalid var name ${n}.`);return n}},function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"f",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return d}));const r=Function("return this")(),a={}.constructor,o=Function,s=/^[A-Za-z_$][A-Za-z0-9_$]*$/,i=/^([\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?)$/,c=/^(\d{4}-[01]\d-[0-3]\d)$/,l=/^((?:(?:\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+)|(?:\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d)|(?:\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d))(?:[+-][0-2]\d:[0-5]\d|Z))$/,u=/^((?:\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+)|(?:\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d)|(?:\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d))$/,m={};function p(e,t){if(e===r||"__proto__"===t||"__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t)return!0;if(!("prototype"!==t&&"constructor"!==t||null!=e&&"function"!=typeof e))return!0;if((null==e||e===a)&&a.hasOwnProperty(t))return!0;if(null==e||e===o){let e=o;for(;e;){if(e.hasOwnProperty(t))return!0;e=e.__proto__}}return"function"==typeof e&&!e.hasOwnProperty(t)}function f(e,t){return null!=e?e:t}function d(e,t,n){return null!=e?t(e):n}},function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e[e.InvalidDefinition=1]="InvalidDefinition",e[e.Required=2]="Required",e[e.TypeUnmatched=3]="TypeUnmatched",e[e.AdditionalPropUnmatched=4]="AdditionalPropUnmatched",e[e.RepeatQtyUnmatched=5]="RepeatQtyUnmatched",e[e.SequenceUnmatched=6]="SequenceUnmatched",e[e.ValueRangeUnmatched=7]="ValueRangeUnmatched",e[e.ValuePatternUnmatched=8]="ValuePatternUnmatched",e[e.ValueLengthUnmatched=9]="ValueLengthUnmatched",e[e.ValueUnmatched=10]="ValueUnmatched"}(r||(r={}))},function(e,t,n){"use strict";function r(e,t){return[{symbol:e.config.reservedNames.quote},t]}function a(e,t){return[{symbol:e.config.reservedNames.backquote},t]}function o(e,t){return[{symbol:e.config.reservedNames.unquote},t]}function s(e,t){return[{symbol:e.config.reservedNames.spread},t]}function i(e,t){return[{symbol:e.config.reservedNames.splice},t]}function c(e,t){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"symbol")?void 0!==t?e.symbol===t?e:null:e:null}n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return c}))},function(e,t,n){"use strict";n.d(t,"l",(function(){return o})),n.d(t,"i",(function(){return s})),n.d(t,"h",(function(){return i})),n.d(t,"k",(function(){return c})),n.d(t,"j",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"m",(function(){return f})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return b})),n.d(t,"g",(function(){return y})),n.d(t,"b",(function(){return h}));var r=n(3),a=n(0);function o(e){switch(typeof e){case"object":case"symbol":case"function":return NaN;default:return Number(e)}}function s(e,t){if(e.config.enableSplice)for(let n=t.length-1;n>=0;n--){Array.isArray(t[n])&&Object(r.b)(t[n][0],e.config.reservedNames.splice)&&(t=t.slice(0,n).concat(t[n][1],t.slice(n+1)))}return t}function i(e,t,n){const r=e.macroMap.get(t.symbol);let a=null;if(r){let o=r;const s=n.slice(1);for(;o;){if(!o.formalArgs)return{fn:o.fn(e,t.symbol),actualArgs:n};{const r=g(e,t.symbol,o.formalArgs,Boolean(o.lastIsSpread),s);if(!r.error)return{fn:o.fn(e,t.symbol,r.formalArgs),actualArgs:n.slice(0,1).concat(r.actualArgs)};a=r.error,o=o.next}}if(a)throw new Error(a)}return!1}function c(e,t,n){for(let n=e.scopes.length-1;n>0;n--){const r=e.scopes[n];if(r&&Object.prototype.hasOwnProperty.call(r.scope,t.symbol))return r.scope;if(r.capturedScopes&&Object.prototype.hasOwnProperty.call(r.capturedScopes,t.symbol))return r.capturedScopes[t.symbol];if(!r.isBlockLocal)break}const r=b(e);return Object.prototype.hasOwnProperty.call(r.scope,t.symbol)?r.scope:n?null:d(e).scope}function l(e,t){const n=c(e,t,!0);if(n)return n[t.symbol];const r=e.symbolMap.get(t.symbol);if(r)return r.fn(e,t.symbol);if(e.config.valueSymbolResolverFallback)return e.config.valueSymbolResolverFallback(e,t.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveValueSymbol: Unresolved symbol: ${t.symbol}.`);return t.symbol}function u(e,t){const n={};for(const r of t){const t=c(e,r,!0);if(null===t)throw new Error("[SX] collectCapturedVariables: Unresolved symbols "+r);Object(a.c)("collectCapturedVariables",n,r.symbol),n[r.symbol]=t}return n}function m(e){const t=[];for(let n=e.scopes.length-1;n>0;n--){const r=e.scopes[n];if(r.capturedScopes&&t.unshift(r.capturedScopes),!r.isBlockLocal)break}return t.length>0?Object.assign({},...t):void 0}function p(e,t,n,r){e.scopes.push({isBlockLocal:n,scope:t,capturedScopes:r})}function f(e){if(e.scopes.length<2)throw new Error("[SX] uninstallScope: Unable to pop stack.");return e.scopes.pop()}function d(e){return e.scopes[e.scopes.length-1]}function b(e){return e.scopes[0]}function g(e,t,n,a,o){if(n=n.slice(0),(o=o.slice(0)).length+(a?1:0)<n.length)return{error:`[SX] macro call (${t}): Actual args too short: actual ${o.length} / formal ${n.length}.`};for(let e=n.length-(a?2:1);e>=0;e--){let a=n[e].symbol;if(a.startsWith("!")){if(n[e].symbol=n[e].symbol.slice(1),a=n[e].symbol,!Object(r.b)(o[e]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${a}) is not symbol.`}}else if(a.startsWith("<")&&a.endsWith(">")){if(n[e].symbol=n[e].symbol.slice(1,-1),a=n[e].symbol,!Object(r.b)(o[e],a))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${a}) is not expected symbol.`};n=n.slice(0,e).concat(n.slice(e+1)),o=o.slice(0,e).concat(o.slice(e+1))}else{const s=a.lastIndexOf(":");if(0<s){const i=a.slice(s+1);switch(i){case"number":if("number"!=typeof o[e])return{error:`[SX] macro call (${t}): Actual arg(${e}: ${a}) is not number.`};break;case"string":if("string"!=typeof o[e])return{error:`[SX] macro call (${t}): Actual arg(${e}: ${a}) is not string.`};break;case"function":if(!Array.isArray(o[e])||!Object(r.b)(o[e][0]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${a}) is not function.`};break;case"list":if(!Array.isArray(o[e]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${a}) is not list.`};break;case"symbol":if(!Object(r.b)(o[e]))return{error:`[SX] macro call (${t}): Actual arg(${e}: ${a}) is not symbol.`};break;case"any":break;default:return{error:`[SX] macro call (${t}): Formal arg(${e}: ${a}) is unknown type ${i}.`}}n[e].symbol=n[e].symbol.slice(0,s)}}}return{formalArgs:n,actualArgs:o}}function y(e,t,n){if(Array.isArray(n[n.length-1])){const r=n.slice(0,n.length-1),a=n[n.length-1];if(a&&"object"==typeof a[0]&&a[0].symbol===e.config.reservedNames.if&&Array.isArray(a[3])&&"object"==typeof a[3][0]&&a[3][0].symbol===e.config.reservedNames.self){const n=`$__tempvar__$$ec${e.evalCount++}$$_`,o=t.map((e,t)=>({symbol:`${n}_$i${t}_${e.symbol}`}));return[[{symbol:e.config.reservedNames.until},a[1],[{symbol:e.config.reservedNames.let},[...o],...r,...a[3].slice(1).map((t,n)=>[{symbol:e.config.reservedNames.set},o[n],t]),...o.map((n,r)=>[{symbol:e.config.reservedNames.set},t[r],n])]],...r,a[2]]}}return n}function h(e,t){if(Object(a.d)(e),null==t)return t;let n=t;for(;Array.isArray(n);){{if(0===n.length)return n;n=s(e,n);const t=Object(r.b)(n[0]);if(!t)break;{const r=i(e,t,n);if(!r)break;n=r.fn(r.actualArgs)}}Object(a.d)(e)}if(Array.isArray(n)){if(n=n.slice(0),0<n.length){const t=Object(r.b)(n[0]);if(t){if(t.symbol===e.config.reservedNames.quote)return n.slice(1,2)[0];if(t.symbol===e.config.reservedNames.backquote)return n=n.slice(1,2)[0],Array.isArray(n)&&(n=function e(t,n){for(let a=0;a<n.length;a++){Array.isArray(n[a])&&Object(r.b)(n[a][0],t.config.reservedNames.unquote)&&(n=n.slice(0,a).concat([h(t,n[a][1])],n.slice(a+1))),Array.isArray(n[a])&&((n=n.slice(0))[a]=e(t,n[a]))}return s(t,n)}(e,n)),n;if(t.symbol===e.config.reservedNames.eval)return h(e,h(e,n.slice(1,2)[0]))}const a=[];for(let t=1;t<n.length;t++){if(Array.isArray(n[t])&&Object(r.b)(n[t][0],e.config.reservedNames.spread)){a.push(t);const r=h(e,n[t][1]);n[t]=Array.isArray(r)?r:[r]}else n[t]=h(e,n[t])}for(const e of a.reverse())n=n.slice(0,e).concat(n[e],n.slice(e+1));let o;if(o="function"==typeof n[0]?n[0]:t?function(e,t){if("function"==typeof t)return t;const n=e.funcMap.get(t.symbol);if(n)return n.fn(e,t.symbol);{const n=l(e,t);if("function"==typeof n)return n;if(e.config.funcSymbolResolverFallback)return e.config.funcSymbolResolverFallback(e,t.symbol);if(e.config.raiseOnUnresolvedSymbol)throw new Error(`[SX] resolveFunctionSymbol: Unresolved symbol: ${t.symbol}.`);return t.symbol}}(e,t):h(e,n[0]),"function"!=typeof o)throw new Error(`[SX] evaluate: First item of list is not a function: ${JSON.stringify(n)}.`);n=o(...n.slice(1))}}else if(e.config.wrapExternalValue&&Object.prototype.hasOwnProperty.call(n,"value"))n=n.value;else if(Object.prototype.hasOwnProperty.call(n,"symbol"))n=l(e,n);else if(Object.prototype.hasOwnProperty.call(n,"car")){const t=h(e,n.car),r=h(e,n.cdr);if(Array.isArray(r)){const e=r.slice(0);e.unshift(t),n=e}else n={car:t,cdr:r}}else Object.prototype.hasOwnProperty.call(n,"dotted")?n=[h(e,n.dotted)]:Object.prototype.hasOwnProperty.call(n,"comment")&&(n=[]);return n}},function(e,t,n){"use strict";n.d(t,"i",(function(){return a})),n.d(t,"e",(function(){return o})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"p",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"l",(function(){return m})),n.d(t,"k",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return b})),n.d(t,"o",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return v})),n.d(t,"q",(function(){return j})),n.d(t,"E",(function(){return _})),n.d(t,"J",(function(){return O})),n.d(t,"F",(function(){return k})),n.d(t,"s",(function(){return w})),n.d(t,"G",(function(){return x})),n.d(t,"B",(function(){return N})),n.d(t,"y",(function(){return S})),n.d(t,"u",(function(){return T})),n.d(t,"v",(function(){return E})),n.d(t,"A",(function(){return A})),n.d(t,"x",(function(){return C})),n.d(t,"w",(function(){return U})),n.d(t,"I",(function(){return I})),n.d(t,"r",(function(){return P})),n.d(t,"t",(function(){return L})),n.d(t,"H",(function(){return M})),n.d(t,"z",(function(){return D})),n.d(t,"C",(function(){return V})),n.d(t,"D",(function(){return q}));var r=n(1);function a(e,...t){switch(e.kind){case"object":{const n=[];for(const r of t){const t=e.members.find(e=>e[0]===r);if(t)if(t[2]){const e=[...t];3<e.length?e[2]=!1:e.length=2,n.push(e)}else n.push(t)}return{kind:"object",members:n}}case"symlink":case"operator":return{kind:"operator",operator:"picked",operands:[e,...t]};default:return{kind:"object",members:[]}}}function o(e,...t){switch(e.kind){case"object":{const n=[];for(const r of e.members)if(!t.find(e=>r[0]===e))if(r[2]){const e=[...r];3<e.length?e[2]=!1:e.length=2,n.push(e)}else n.push(r);return{kind:"object",members:n}}case"symlink":case"operator":return{kind:"operator",operator:"omit",operands:[e,...t]};default:return{kind:"object",members:[]}}}function s(e){switch(e.kind){case"object":{const t=[];for(const n of e.members){let e="optional"===n[1].kind?n:[n[0],f(n[1]),...n.slice(2)];e[2]&&(e=[...e],3<e.length?e[2]=!1:e.length=2),e[1].name=e[0];const r=Object.assign({},e[1].optional);e[1].optional=r,r.name&&r.name!==r.typeName&&delete r.name,!r.name&&r.typeName&&(r.name=r.typeName),t.push(e)}return{kind:"object",members:t}}case"symlink":case"operator":return{kind:"operator",operator:"partial",operands:[e]};default:return e}}function i(...e){if(0===e.length)throw new Error("Empty intersection type is not allowed.");if(0<e.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)return{kind:"operator",operator:"intersect",operands:e.slice()};let t=null;const n=new Map;for(const r of e){if(!r||"object"!=typeof r)return{kind:"never"};if(t&&t.kind!==r.kind)return{kind:"never"};if(t=r,"object"===r.kind)for(const e of r.members)if(e[2]){const t=[...e];3<t.length?t[2]=!1:t.length=2,n.set(e[0],t)}else n.set(e[0],e)}return t&&"object"!==t.kind?t:{kind:"object",members:Array.from(n.values())}}function c(...e){if(0===e.length)throw new Error("Empty union type is not allowed.");if(1===e.length){const t=e[0];return t&&"object"==typeof t?t:p(t)}const t={kind:"one-of",oneOf:[]};for(const n of e)n&&"object"==typeof n?"one-of"===n.kind?t.oneOf=t.oneOf.concat(n.oneOf):t.oneOf.push(n):t.oneOf.push(p(n));return t}function l(...e){if(0===e.length)throw new Error("Empty subtraction type is not allowed.");if(0<e.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)return{kind:"operator",operator:"subtract",operands:e.slice()};let t=e[0];if(!t||"object"!=typeof t||"object"!==t.kind)throw new Error("First parameter of subtraction type should be 'object'.");for(const n of e.slice(1))n&&"object"==typeof n&&"object"===n.kind&&(t=o(t,...n.members.map(e=>e[0])));return t}function u(e){switch(e){case"never":return{kind:"never"};case"any":return{kind:"any"};case"unknown":return{kind:"unknown"};case"number":case"integer":case"bigint":case"string":case"boolean":case"null":case"undefined":return{kind:"primitive",primitiveName:e};case"never?":return f({kind:"never"});case"any?":return f({kind:"any"});case"unknown?":return f({kind:"unknown"});case"number?":case"integer?":case"bigint?":case"string?":case"boolean?":case"null?":case"undefined?":return f({kind:"primitive",primitiveName:e.substring(0,e.length-1)});default:throw new Error("Unknown primitive type assertion: "+e)}}function m(e){return{kind:"primitive",primitiveName:"string",pattern:e}}function p(e){if(null==e)return{kind:"primitive-value",value:e};switch(typeof e){case"number":case"bigint":case"string":case"boolean":return{kind:"primitive-value",value:e};default:throw new Error("Unknown primitive value assertion: "+e)}}function f(e){return e&&"object"==typeof e&&e.kind?"optional"===e.kind?e:Object.assign({kind:"optional",optional:e},e.typeName?{typeName:e.typeName}:{}):{kind:"optional",optional:p(e)}}function d(e,t){return e&&"object"==typeof e&&e.kind?{kind:"repeated",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,repeated:e}:{kind:"repeated",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,repeated:u(e)}}function b(...e){return{kind:"sequence",sequence:e.map(e=>e&&"object"==typeof e&&e.kind?e:p(e))}}function g(e,t){return e&&"object"==typeof e&&e.kind?{kind:"spread",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,spread:e}:{kind:"spread",min:t&&"number"==typeof t.min?t.min:null,max:t&&"number"==typeof t.max?t.max:null,spread:p(e)}}function y(...e){const t=e.slice();let n=0;for(let e=0;e<t.length;e++){if(Object(r.g)(r.f,t[e][0]))throw new Error("Unsafe symbol name is appeared in enum assertion: "+t[e][0]);null===t[e][1]||void 0===t[e][1]?t[e][1]=n++:"number"==typeof t[e][1]&&(n=t[e][1]+1),t[e][2]||(t[e].length=2)}return{kind:"enum",values:t}}function h(...e){const t=e.slice().reverse();for(const n of e)if("string"==typeof n[0]){if(Object(r.g)(r.f,n[0]))throw new Error("Unsafe symbol name is appeared in object assertion: "+n[0]);if(e.find(e=>e[0]===n[0])!==t.find(e=>e[0]===n[0]))throw new Error("Duplicated member is found: "+n[0])}const n=e.filter(e=>"string"==typeof e[0]).map(e=>e[1]&&"object"==typeof e[1]&&e[1].kind?[e[0],_(e[1],e[0]),e[2]]:[e[0],_(p(e[1]),e[0]),e[2]]).map(e=>e[2]?[e[0],e[1],!1,...e.slice(2)]:[e[0],e[1]]),a=e.filter(e=>"string"!=typeof e[0]).map(e=>e[1]&&"object"==typeof e[1]&&e[1].kind?e:[e[0],p(e[1]),e[2]]).map(e=>e[2]?[e[0],e[1],!1,...e.slice(2)]:[e[0],e[1]]);return Object.assign({kind:"object",members:n},0<a.length?{additionalProps:a}:{})}function $(e,t){if(e===t)return!1;if(e.typeName&&(e.typeName===t.typeName||"symlink"===t.kind&&e.typeName===t.symlinkTargetName))return!1;if("object"===t.kind&&t.baseTypes)for(const n of t.baseTypes)if(!$(e,n))return!1;return!0}function v(e,...t){const n={kind:"object",members:[],baseTypes:[]};for(const r of t)switch(r.kind){case"object":if(!$(e,r))throw new Error("Recursive extend is found: "+(e.name||"(unnamed)"));for(const e of r.members)n.members.find(t=>t[0]===e[0])||n.members.push([e[0],e[1],!0,...e.slice(3)]);case"symlink":n.baseTypes.push(r);break;case"operator":throw new Error("Unresolved type operator is found: "+r.operator)}n.members=e.members.concat(n.members),e.baseTypes&&(n.baseTypes=e.baseTypes.filter(e=>"symlink"!==e.kind).concat(n.baseTypes)),0===n.baseTypes.length&&delete n.baseTypes;const r=n.members.slice().reverse();for(const t of n.members)if(n.members.find(e=>e[0]===t[0])!==r.find(e=>e[0]===t[0]))throw new Error(`Duplicated member is found: ${t[0]} in ${e.name||"(unnamed)"}`);let a=[];if(n.baseTypes)for(const e of n.baseTypes)"object"===e.kind&&e.additionalProps&&0<e.additionalProps.length&&(a=a.concat(e.additionalProps.map(e=>[e[0],e[1],!0,...e.slice(3)])));return e.additionalProps&&0<e.additionalProps.length&&(a=a.concat(e.additionalProps)),0<a.length&&(n.additionalProps=a),n}function j(e){return{kind:"symlink",symlinkTargetName:e}}function _(e,t){return t?Object.assign(Object.assign({},e),{name:t}):e}function O(e,t){return t?Object.assign(Object.assign({},e),{typeName:t}):e}function k(e,t){return t?Object.assign(Object.assign({},e),{originalTypeName:t}):e}function w(e,t){return t?Object.assign(Object.assign({},e),{docComment:t}):e}function x(e,t){return n=>{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@range' parameter 'minValue' should be number or string.");if("number"!=typeof t&&"string"!=typeof t)throw new Error("Decorator '@range' parameter 'maxValue' should be number or string.");if("optional"===n.kind){const r=n.optional;if("primitive"!==r.kind)throw new Error("Decorator '@range' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},r),{minValue:e,maxValue:t})})}if(!n||"primitive"!==n.kind)throw new Error("Decorator '@range' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},n),{minValue:e,maxValue:t})}}function N(e){return t=>{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@minValue' parameter 'minValue' should be number or string.");if("optional"===t.kind){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@minValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{minValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@minValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{minValue:e})}}function S(e){return t=>{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@maxValue' parameter 'maxValue' should be number or string.");if("optional"===t.kind){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@maxValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{maxValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@maxValue' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{maxValue:e})}}function T(e){return t=>{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@greaterThan' parameter 'greaterThan' should be number or string.");if("optional"===t.kind){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@greaterThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{greaterThanValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@greaterThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{greaterThanValue:e})}}function E(e){return t=>{if("number"!=typeof e&&"string"!=typeof e)throw new Error("Decorator '@lessThan' parameter 'lessThan' should be number or string.");if("optional"===t.kind){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@lessThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{lessThanValue:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@lessThan' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{lessThanValue:e})}}function A(e){return t=>{if("number"!=typeof e)throw new Error("Decorator '@minLength' parameter 'minLength' should be number.");if("optional"===t.kind){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@minLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{minLength:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@minLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{minLength:e})}}function C(e){return t=>{if("number"!=typeof e)throw new Error("Decorator '@maxLength' parameter 'maxLength' should be number.");if("optional"===t.kind){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@maxLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{maxLength:e})})}if(!t||"primitive"!==t.kind)throw new Error("Decorator '@maxLength' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{maxLength:e})}}function U(e){return t=>{if("object"!=typeof e)throw new Error("Decorator '@match' parameter 'pattern' should be RegExp.");if("optional"===t.kind){const n=t.optional;if("primitive"!==n.kind)throw new Error("Decorator '@match' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},n),{pattern:e})})}if(!t||"primitive"!==t.kind||"string"!==t.primitiveName)throw new Error("Decorator '@match' cannot be applied to anything other than 'primitive'.");return Object.assign(Object.assign({},t),{pattern:e})}}function I(e){if("string"!=typeof e)throw new Error("Decorator '@stereotype' parameter 'stereotype' should be string.");if(Object(r.g)(r.f,e))throw new Error("Unsafe symbol name is appeared in stereotype assertion: "+e);return t=>{if("optional"===t.kind){return Object.assign(Object.assign({},t),{optional:Object.assign(Object.assign({},t.optional),{stereotype:e})})}return Object.assign(Object.assign({},t),{stereotype:e})}}function P(e,t){if("string"!=typeof e)throw new Error("Decorator '@constraint' parameter 'name' should be string.");if(Object(r.g)(r.f,e))throw new Error("Unsafe symbol name is appeared in constraint assertion: "+e);return n=>{if("optional"===n.kind){const r=n.optional;return Object.assign(Object.assign({},n),{optional:Object.assign(Object.assign({},r),{customConstraints:r.customConstraints?r.customConstraints.slice().push(e):[e],customConstraintsArgs:r.customConstraintsArgs?Object.assign(Object.assign({},r.customConstraintsArgs),{[e]:t}):{[e]:t}})})}return Object.assign(Object.assign({},n),{customConstraints:n.customConstraints?n.customConstraints.slice().push(e):[e],customConstraintsArgs:n.customConstraintsArgs?Object.assign(Object.assign({},n.customConstraintsArgs),{[e]:t}):{[e]:t}})}}function L(){return e=>{if("optional"===e.kind){return Object.assign(Object.assign({},e),{optional:Object.assign(Object.assign({},e.optional),{forceCast:!0})})}return Object.assign(Object.assign({},e),{forceCast:!0})}}function M(){return e=>{if("optional"===e.kind){return Object.assign(Object.assign({},e),{optional:Object.assign(Object.assign({},e.optional),{isRecordTypeField:!0})})}return Object.assign(Object.assign({},e),{isRecordTypeField:!0})}}function D(e){return t=>Object.assign(Object.assign({},t),{meta:e})}function V(e){return t=>{if("optional"===t.kind){if("string"==typeof e){const n=Object.assign(Object.assign({},t),{message:e,optional:Object.assign(Object.assign({},t.optional),{message:e})});return delete n.messages,delete n.optional.messages,n}{const n=Object.assign(Object.assign({},t),{messages:e,optional:Object.assign(Object.assign({},t.optional),{messages:e})});return delete n.message,delete n.optional.message,n}}if("string"==typeof e){const n=Object.assign(Object.assign({},t),{message:e});return delete n.messages,n}{const n=Object.assign(Object.assign({},t),{messages:e});return delete n.message,n}}}function q(e){return t=>"optional"===t.kind?Object.assign(Object.assign({},t),{messageId:e,optional:Object.assign(Object.assign({},t.optional),{messageId:e})}):Object.assign(Object.assign({},t),{messageId:e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(3),a=n(4),o=n(0);function s(e,t){let n=t;for(;Array.isArray(n);){{if(0===n.length)break;n=Object(a.i)(e,n);const t=Object(r.b)(n[0]);if(!t)break;{const r=Object(a.h)(e,t,n);if(!r)break;n=r.fn(r.actualArgs)}}Object(o.d)(e)}return n}function i(e,t){if(!Array.isArray(t)||!Object(r.b)(t[0],e.config.reservedNames.quote))throw new Error("[SX] stripQuote: token is not quoted.");return t[1]}function c(e,t){return Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.quote)?t[1]:t}function l(e){return function(){return Object(a.e)(e)}}function u(e,t){return Object(o.b)("(compiler)resolveValueSymbol_dynamic",t),function(){return Object(a.j)(e,{symbol:t})}}function m(e){return function(t){return Object(o.b)(e,t)}}},function(e,t,n){"use strict";function r(e){return e.replace(/\x08/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\\/g,"\\\\").replace(/\'/g,"\\'").replace(/\"/g,'\\"').replace(/\`/g,"\\`")}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));class r extends Error{constructor(e,t,n){super(e),this.ty=t,this.ctx=n}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l}));var r=n(5),a=n(1);function o(e,t,n,r){if(r&&t.has(r)){const a=t.get(r);a.ty===e&&t.set(r,Object.assign(Object.assign({},a),{ty:n,resolved:!0}))}return n}function s(e,t,n,r){const o=(e,a,o)=>a?Object.assign(Object.assign({},e),{typeName:0===r?`${t}.${n.join(".")}`:`${a}.${o}`}):e;for(let i=r;i<n.length;i++){const r=n[i];switch(e.kind){case"optional":return s(e.optional,t,n,i+1);case"object":for(const a of e.members)if(r===a[0])return o(s(a[1],t,n,i+1),e.typeName,r);if(e.additionalProps)for(const o of e.additionalProps)for(const e of o[0])switch(e){case"number":if(a.d.test(r))return s(o[1],t,n,i+1);break;case"string":return s(o[1],t,n,i+1);default:if(e.test(r))return s(o[1],t,n,i+1)}throw new Error("Undefined member name is appeared: "+r);case"symlink":if(!e.typeName)throw new Error("Reference of anonymous type is appeared: "+r);return Object.assign({kind:"symlink",symlinkTargetName:t,name:r,typeName:t},0<n.length?{memberTree:n}:{});default:throw new Error(`Unsupported type kind is appeared: (kind:${e.kind}).${r}`)}}return e}function i(e,t,n){var a;const c=Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1});switch(t.kind){case"symlink":{const r=e.get(t.symlinkTargetName);if(!r)throw new Error(`Undefined symbol '${t.symlinkTargetName}' is referred.`);if(0<=n.symlinkStack.findIndex(e=>e===t.symlinkTargetName))return t;const a=Object.assign({},t);let o=r.ty;return t.memberTree&&0<t.memberTree.length&&(o=Object.assign({},s(o,t.symlinkTargetName,t.memberTree,0)),a.typeName=o.typeName),i(e,function(e,t){const n=Object.assign({},t);return delete n.kind,delete n.symlinkTargetName,delete n.memberTree,Object.assign(Object.assign({},e),n)}(o,a),Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,a.symlinkTargetName]}))}case"repeated":return o(t,e,Object.assign(Object.assign({},t),{repeated:i(e,t.repeated,c)}),t.typeName);case"spread":return o(t,e,Object.assign(Object.assign({},t),{spread:i(e,t.spread,c)}),t.typeName);case"sequence":return o(t,e,Object.assign(Object.assign({},t),{sequence:t.sequence.map(t=>i(e,t,c))}),t.typeName);case"one-of":return o(t,e,Object.assign(Object.assign({},t),{oneOf:t.oneOf.map(t=>i(e,t,c))}),t.typeName);case"optional":return o(t,e,Object.assign(Object.assign({},t),{optional:i(e,t.optional,c)}),t.typeName);case"object":{if(0<n.nestLevel&&t.typeName&&0<=n.symlinkStack.findIndex(e=>e===t.typeName)&&e.has(t.typeName)){const n=e.get(t.typeName);if(n.resolved)return n.ty}const s=null===(a=t.baseTypes)||void 0===a?void 0:a.filter(e=>"symlink"===e.kind);if(s&&s.length>0&&!n.isDeserialization){const n=s.map(t=>i(e,t,c)).filter(e=>"object"===e.kind),a=i(e,r.a(Object.assign(Object.assign({},t),t.baseTypes?{baseTypes:t.baseTypes.filter(e=>"symlink"!==e.kind)}:{}),...n),t.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,t.typeName]}):c);return o(t,e,Object.assign(Object.assign({},t),a),t.typeName)}return o(t,e,Object.assign(Object.assign(Object.assign({},Object.assign(Object.assign({},t),{members:t.members.map(n=>[n[0],i(e,n[1],t.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,t.typeName]}):c),...n.slice(2)])})),t.additionalProps&&0<t.additionalProps.length?{additionalProps:t.additionalProps.map(n=>[n[0],i(e,n[1],t.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,t.typeName]}):c),...n.slice(2)])}:{}),t.baseTypes&&0<t.baseTypes.length?{baseTypes:n.isDeserialization?t.baseTypes.map(t=>"symlink"===t.kind?i(e,t,c):t).filter(e=>"object"===e.kind):t.baseTypes}:{}),t.typeName)}case"operator":if(c.operators){const n=t.typeName?Object.assign(Object.assign({},c),{symlinkStack:[...c.symlinkStack,t.typeName]}):c,r=t.operands.map(t=>"object"==typeof t&&t.kind?i(e,t,n):t);if(0<r.filter(e=>e&&"object"==typeof e&&("symlink"===e.kind||"operator"===e.kind)).length)throw new Error("Unresolved type operator is found: "+t.operator);if(!c.operators[t.operator])throw new Error("Undefined type operator is found: "+t.operator);const a=Object.assign({},t);return delete a.operator,delete a.operands,o(t,e,Object.assign(Object.assign({},a),i(e,c.operators[t.operator](...r),n)),t.typeName)}return t;default:return t}}const c={picked:r.i,omit:r.e,partial:r.h,intersect:r.c,subtract:r.p};function l(e,t){for(const n of e.entries()){const r=i(e,n[1].ty,Object.assign(Object.assign({},t),{nestLevel:0,symlinkStack:[n[0]],operators:c}));n[1].ty=r}return e}},function(e,t,n){"use strict";n.d(t,"d",(function(){return $})),n.d(t,"c",(function(){return v})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return _}));var r=n(2),a=n(8),o=n(1),s=n(7);const i=["","InvalidDefinition","Required","TypeUnmatched","AdditionalPropUnmatched","RepeatQtyUnmatched","SequenceUnmatched","ValueRangeUnmatched","ValuePatternUnmatched","ValueLengthUnmatched","ValueUnmatched"],c={invalidDefinition:'"%{name}" of "%{parentType}" type definition is invalid.',required:'"%{name}" of "%{parentType}" is required.',typeUnmatched:'"%{name}" of "%{parentType}" should be type "%{expectedType}".',additionalPropUnmatched:'"%{addtionalProps}" of "%{parentType}" are not matched to additional property patterns.',repeatQtyUnmatched:'"%{name}" of "%{parentType}" should repeat %{repeatQty} times.',sequenceUnmatched:'"%{name}" of "%{parentType}" sequence is not matched',valueRangeUnmatched:'"%{name}" of "%{parentType}" value should be in the range %{minValue} to %{maxValue}.',valuePatternUnmatched:'"%{name}" of "%{parentType}" value should be matched to pattern "%{pattern}"',valueLengthUnmatched:'"%{name}" of "%{parentType}" length should be in the range %{minLength} to %{maxLength}.',valueUnmatched:'"%{name}" of "%{parentType}" value should be "%{expectedValue}".'};function l(e,...t){for(const n of t)switch(e){case r.a.InvalidDefinition:if(n.invalidDefinition)return n.invalidDefinition;break;case r.a.Required:if(n.required)return n.required;break;case r.a.TypeUnmatched:if(n.typeUnmatched)return n.typeUnmatched;break;case r.a.AdditionalPropUnmatched:if(n.additionalPropUnmatched)return n.additionalPropUnmatched;break;case r.a.RepeatQtyUnmatched:if(n.repeatQtyUnmatched)return n.repeatQtyUnmatched;break;case r.a.SequenceUnmatched:if(n.sequenceUnmatched)return n.sequenceUnmatched;break;case r.a.ValueRangeUnmatched:if(n.valueRangeUnmatched)return n.valueRangeUnmatched;break;case r.a.ValuePatternUnmatched:if(n.valuePatternUnmatched)return n.valuePatternUnmatched;break;case r.a.ValueLengthUnmatched:if(n.valueLengthUnmatched)return n.valueLengthUnmatched;break;case r.a.ValueUnmatched:if(n.valueUnmatched)return n.valueUnmatched}return""}function u(e){switch(e.kind){case"repeated":return`(repeated ${u(e.repeated)})`;case"spread":return u(e.spread);case"sequence":return"(sequence)";case"primitive":return e.primitiveName;case"primitive-value":return`(value ${"string"==typeof e.value?`'${String(e.value)}'`:String(e.value)})`;case"optional":return u(e.optional);case"one-of":return`(one of ${e.oneOf.map(e=>u(e)).join(", ")})`;case"never":case"any":case"unknown":return e.kind;case"symlink":return e.symlinkTargetName;default:return e.typeName?e.typeName:"?"}}function m(e,t,n,r,a){let i=e;const c=a.topRepeatable,l=new Map([["expectedType",n.stereotype?n.stereotype:Object(s.a)(u(n))],["type",Object(s.a)(typeof t)],["expectedValue",Object(s.a)("primitive-value"===n.kind?String(n.value):"enum"===n.kind&&n.typeName?"enum member of "+n.typeName:"?")],["value",Object(s.a)(String(t))],["repeatQty",Object(s.a)(c?"optional"!==c.kind?`${Object(o.h)(c.min,"")}${null!==c.min&&void 0!==c.min||null!==c.max&&void 0!==c.max?"..":""}${Object(o.h)(c.max,"")}`:"0..1":"?")],["minValue",Object(s.a)("primitive"===n.kind?""+Object(o.h)(n.minValue,Object(o.h)(n.greaterThanValue,"(smallest)")):"?")],["maxValue",Object(s.a)("primitive"===n.kind?""+Object(o.h)(n.maxValue,Object(o.h)(n.lessThanValue,"(biggest)")):"?")],["pattern",Object(s.a)("primitive"===n.kind?""+(n.pattern?`/${n.pattern.source}/${n.pattern.flags}`:"(pattern)"):"?")],["minLength",Object(s.a)("primitive"===n.kind?""+Object(o.h)(n.minLength,"0"):"?")],["maxLength",Object(s.a)("primitive"===n.kind?""+Object(o.h)(n.maxLength,"(biggest)"):"?")],["name",Object(s.a)(`${"repeated"!==n.kind&&a.dataPath.endsWith("repeated)")?"repeated item of ":"sequence"!==n.kind&&a.dataPath.endsWith("sequence)")?"sequence item of ":""}${a.entryName||"?"}`)],["parentType",Object(s.a)(a.parentType||"?")],["dataPath",a.dataPath],...r.substitutions||[]]);for(const e of l.entries())i=i.replace(new RegExp(`%{${e[0]}}`),e[1]);return i}function p(e,t,n,a){const s=[];n.messages&&s.push(n.messages),a.ctx.errorMessages&&s.push(a.ctx.errorMessages),s.push(c);const u=[];for(let e=0;e<a.ctx.typeStack.length;e++){const t=a.ctx.typeStack[e],n=a.ctx.typeStack[e+1],r=Array.isArray(t)?t[0]:t,o=Array.isArray(n)?n[1]:void 0;let s=!1;if("repeated"===r.kind?e!==a.ctx.typeStack.length-1&&(r.name&&u.push({kind:"key",name:r.name}),u.push({kind:"index",name:`(${void 0!==o?o+":":""}repeated)`}),s=!0):"sequence"===r.kind&&e!==a.ctx.typeStack.length-1&&(r.name&&u.push({kind:"key",name:r.name}),u.push({kind:"index",name:`(${void 0!==o?o+":":""}sequence)`}),s=!0),!s)if(r.name)if(0===e)r.typeName?u.push({kind:"type",name:r.typeName}):u.push({kind:"key",name:r.name});else{const e=u.length;e&&"type"===u[e-1].kind?"object"===r.kind&&n&&r.typeName?u.push({kind:"type",name:r.typeName}):u.push({kind:"key",name:r.name}):r.typeName?u.push({kind:"type",name:r.typeName}):u.push({kind:"key",name:r.name})}else r.typeName&&u.push({kind:"type",name:r.typeName})}let p="";for(let e=0;e<u.length;e++){const t=u[e];if(p+=t.name,e+1===u.length)break;p+="type"===t.kind?":":"."}let f="",d="";for(let e=u.length-1;0<=e;e--){const t=u[e];if("type"===t.kind){if(0!==e&&e===u.length-1){if("index"===u[e-1].kind)continue}f=t.name;for(let t=e+1;t<u.length;t++){const e=u[t];if("key"===e.kind){d=e.name;break}}break}}if(!f)for(let e=a.ctx.typeStack.length-1;0<=e;e--){const t=a.ctx.typeStack[e],n=Array.isArray(t)?t[0]:t;n.typeName&&(f=n.typeName)}const b=a.ctx.typeStack.slice().reverse().map(e=>Array.isArray(e)?e[0]:e).find(e=>"repeated"===e.kind||"spread"===e.kind||"optional"===e.kind)||null;const g={dataPath:p,topRepeatable:b,parentType:f,entryName:d},y={},h=[n];e===r.a.RepeatQtyUnmatched&&b&&h.unshift(b);for(const e of h){if(Object(o.h)(e.minValue,!1)&&(y.minValue=e.minValue),Object(o.h)(e.maxValue,!1)&&(y.maxValue=e.maxValue),Object(o.h)(e.greaterThanValue,!1)&&(y.greaterThanValue=e.greaterThanValue),Object(o.h)(e.lessThanValue,!1)&&(y.lessThanValue=e.lessThanValue),Object(o.h)(e.minLength,!1)&&(y.minLength=e.minLength),Object(o.h)(e.maxLength,!1)&&(y.maxLength=e.maxLength),Object(o.h)(e.pattern,!1)){const t=e.pattern;y.pattern=`/${t.source}/${t.flags}`}Object(o.h)(e.min,!1)&&(y.min=e.min),Object(o.h)(e.max,!1)&&(y.max=e.max)}const $={};switch(typeof t){case"number":case"bigint":case"string":case"boolean":case"undefined":$.value=t;break;case"object":null===t&&($.value=t)}n.messageId?a.ctx.errors.push(Object.assign({code:`${n.messageId}-${i[e]}`,message:m(n.message?n.message:l(e,...s),t,n,a,g),dataPath:p,constraints:y},$)):n.message?a.ctx.errors.push(Object.assign({code:""+i[e],message:m(n.message,t,n,a,g),dataPath:p,constraints:y},$)):a.ctx.errors.push(Object.assign({code:""+i[e],message:m(l(e,...s),t,n,a,g),dataPath:p,constraints:y},$))}function f(e,t,n,r){try{r.ctx.typeStack.push(n),p(e,t,n[0],r)}finally{r.ctx.typeStack.pop()}}var d=n(9);const b={tryParse:e=>({value:e}),evaluateFormula:e=>e,compare:(e,t)=>{const n=typeof e;if(n!==typeof t)return NaN;switch(n){case"number":return Number.isNaN(e)&&Number.isNaN(t)?0:e-t;default:return e===t?0:e>t?1:e<t?-1:NaN}},doCast:!1};function g(e,t,n){if(t.stereotype&&n.stereotypes){if(n.stereotypes.has(t.stereotype)){const r=n.stereotypes.get(t.stereotype),a=r.tryParse(e);return a?{value:a.value,stereotype:r}:null}throw new Error("Undefined stereotype is specified: "+t.stereotype)}return!1}function y(e,t){switch(e){case"number":if("number"==typeof t)return t;{const e=Number.parseFloat(String(t));return Number.isNaN(e)?Number(null!=t?t:0):e}case"integer":if("number"==typeof t&&Math.trunc(t)===t)return t;{let e=Number.parseFloat(String(t));return Number.isNaN(e)&&(e=Number(null!=t?t:0)),Math.trunc(e)}case"bigint":try{return BigInt(null!=t?t:0)}catch(e){return NaN}case"string":return String(t);case"boolean":return Boolean(t);case"undefined":return;case"null":return null;default:return t}}function h(e,t,n){if(t.customConstraints&&n.customConstraints){for(const r of t.customConstraints){if(!n.customConstraints.has(r))throw new Error("Undefined constraint is specified: "+r);{const a=n.customConstraints.get(r);if(a.kinds&&!a.kinds.includes(t.kind))return null;if(!a.check(e,t.customConstraintsArgs&&t.customConstraintsArgs[r]))return null}}return!0}return!1}function $(e,t,n,s){try{switch(n.typeStack.push("number"==typeof s||"string"==typeof s?[t,s]:t),t.kind){case"never":return function(e,t,n){return p(r.a.TypeUnmatched,e,t,{ctx:n}),null}(e,t,n);case"any":return function(e,t,n){let a=g(e,t,n);if(null===a)return p(r.a.TypeUnmatched,e,t,{ctx:n}),null;!1===a&&(a={value:e,stereotype:b});const o=a.stereotype;return null===h(e,t,n)?(p(r.a.ValueUnmatched,e,t,{ctx:n}),null):{value:n.mapper?n.mapper(o.doCast?a.value:e,t):o.doCast?a.value:e}}(e,t,n);case"unknown":return function(e,t,n){let a=g(e,t,n);if(null===a)return p(r.a.TypeUnmatched,e,t,{ctx:n}),null;!1===a&&(a={value:e,stereotype:b});const o=a.stereotype;return null===h(e,t,n)?(p(r.a.ValueUnmatched,e,t,{ctx:n}),null):{value:n.mapper?n.mapper(o.doCast?a.value:e,t):o.doCast?a.value:e}}(e,t,n);case"primitive":return function(e,t,n){const a=t.forceCast?y(t.primitiveName,e):e;if("null"===t.primitiveName){if(null!==a)return p(r.a.TypeUnmatched,e,t,{ctx:n}),null}else if("integer"===t.primitiveName){if("number"!=typeof a)return p(r.a.TypeUnmatched,e,t,{ctx:n}),null;if(Math.trunc(a)!==a)return p(r.a.TypeUnmatched,e,t,{ctx:n}),null}else if(typeof a!==t.primitiveName)return p(r.a.TypeUnmatched,e,t,{ctx:n}),null;let o=g(a,t,n);if(null===o)return p(r.a.TypeUnmatched,e,t,{ctx:n}),null;!1===o&&(o={value:a,stereotype:(t.forceCast,b)});const s=o.value,i=o.stereotype;let c=!1,l=!1;switch(typeof t.minValue){case"number":case"string":i.compare(s,i.evaluateFormula(t.minValue))<0&&(l||p(r.a.ValueRangeUnmatched,e,t,{ctx:n}),l=!0,c=!0)}switch(typeof t.maxValue){case"number":case"string":i.compare(s,i.evaluateFormula(t.maxValue))>0&&(l||p(r.a.ValueRangeUnmatched,e,t,{ctx:n}),l=!0,c=!0)}switch(typeof t.greaterThanValue){case"number":case"string":i.compare(s,i.evaluateFormula(t.greaterThanValue))<=0&&(l||p(r.a.ValueRangeUnmatched,e,t,{ctx:n}),l=!0,c=!0)}switch(typeof t.lessThanValue){case"number":case"string":i.compare(s,i.evaluateFormula(t.lessThanValue))>=0&&(l||p(r.a.ValueRangeUnmatched,e,t,{ctx:n}),l=!0,c=!0)}let u=!1;switch(typeof t.minLength){case"number":("string"!=typeof s||s.length<t.minLength)&&(u||p(r.a.ValueLengthUnmatched,e,t,{ctx:n}),u=!0,c=!0)}switch(typeof t.maxLength){case"number":("string"!=typeof s||s.length>t.maxLength)&&(u||p(r.a.ValueLengthUnmatched,e,t,{ctx:n}),u=!0,c=!0)}return t.pattern&&("string"==typeof s&&t.pattern.test(s)||(p(r.a.ValuePatternUnmatched,e,t,{ctx:n}),c=!0)),null===h(e,t,n)&&(p(r.a.ValueUnmatched,e,t,{ctx:n}),c=!0),c?null:{value:n.mapper?n.mapper(i.doCast?o.value:a,t):i.doCast?o.value:a}}(e,t,n);case"primitive-value":return function(e,t,n){const a=t.forceCast?y(typeof t.value,e):e;let o=g(a,t,n);if(null===o)return p(r.a.ValueUnmatched,e,t,{ctx:n}),null;!1===o&&(o={value:a,stereotype:(t.forceCast,b)});const s=o.stereotype;let i=0===s.compare(o.value,s.evaluateFormula(t.value))?{value:n.mapper?n.mapper(s.doCast?o.value:a,t):s.doCast?o.value:a}:null;return i||p(r.a.ValueUnmatched,e,t,{ctx:n}),i&&null===h(e,t,n)&&(p(r.a.ValueUnmatched,e,t,{ctx:n}),i=null),i}(e,t,n);case"repeated":return function(e,t,n){if(!Array.isArray(e))return p(r.a.TypeUnmatched,e,t,{ctx:n}),null;if("number"==typeof t.min&&e.length<t.min)return p(r.a.RepeatQtyUnmatched,e,t,{ctx:n}),null;if("number"==typeof t.max&&e.length>t.max)return p(r.a.RepeatQtyUnmatched,e,t,{ctx:n}),null;const a=[];for(let r=0;r<e.length;r++){const o=$(e[r],t.repeated,n,r);if(!o)return null;a.push(o.value)}return null===h(e,t,n)?(p(r.a.ValueUnmatched,e,t,{ctx:n}),null):{value:a}}(e,t,n);case"sequence":return function(e,t,n){if(!Array.isArray(e))return p(r.a.TypeUnmatched,e,t,{ctx:n}),null;let a=0,o=0,s=0,i=!1;const c=(t,a)=>"number"==typeof t.min&&s<t.min?(f(0===s?r.a.TypeUnmatched:r.a.RepeatQtyUnmatched,e,[t,a],{ctx:n}),null):"number"==typeof t.max&&s>t.max?(f(r.a.RepeatQtyUnmatched,e,[t,a],{ctx:n}),null):t,l=(t,a)=>{if(0===s)i=!0;else{if(i)return f(r.a.RepeatQtyUnmatched,e,[t,a],{ctx:n}),null;if(s>1)return f(r.a.RepeatQtyUnmatched,e,[t,a],{ctx:n}),null}return t},u=[];for(;a<e.length&&o<t.sequence.length;){const r=t.sequence[o];if("spread"===r.kind){const t=n.errors.length,i=$(e[a],r.spread,n,a);if(i)u.push(i.value),a++,s++;else{if(n.errors.length=t,!c(r,a))return null;s=0,o++}}else if("optional"===r.kind){const t=n.errors.length,i=$(e[a],r.optional,n,a);if(i)u.push(i.value),a++,s++;else{if(n.errors.length=t,!l(r,a))return null;s=0,o++}}else{const t=$(e[a],r,n,a);if(!t)return null;u.push(t.value),a++,o++}}for(;o<t.sequence.length;){const i=t.sequence[o];if("spread"===i.kind){if(!c(i,a))return null;s=0,o++}else{if("optional"!==i.kind)return f(r.a.RepeatQtyUnmatched,e,[i,a],{ctx:n}),null;if(!l(i,a))return null;s=0,o++}}const m=e.length===a?{value:u}:null;return m||p(r.a.SequenceUnmatched,e,t,{ctx:n}),m&&null===h(e,t,n)?(p(r.a.ValueUnmatched,e,t,{ctx:n}),null):m}(e,t,n);case"one-of":return function(e,t,n){let a=!1;const o=n.recordTypeFieldValidated;n.recordTypeFieldValidated=!1;const s=n.errors.length;let i=0,c=s;for(const r of t.oneOf){const t=$(e,r,n);if(t)return n.errors.length=s,n.recordTypeFieldValidated=o,t;if(n.recordTypeFieldValidated){if(0!==i){const e=n.errors.slice(c);n.errors.length=s,n.errors.push(...e)}a=!0;break}0===i?c=n.errors.length:n.errors.length=c,i++}return a||(n.checkAll||(n.errors.length=s),p(r.a.TypeUnmatched,e,t,{ctx:n})),n.recordTypeFieldValidated=o,null}(e,t,n);case"enum":return function(e,t,n){for(const r of t.values)if(e===r[1])return{value:n.mapper?n.mapper(e,t):e};return p(r.a.ValueUnmatched,e,t,{ctx:n}),null}(e,t,n);case"object":return function(e,t,n){let s=Array.isArray(e)?[...e]:Object.assign({},e);const i=t.members.slice().reverse();for(const o of t.members)if(t.members.find(e=>e[0]===o[0])!==i.find(e=>e[0]===o[0]))throw p(r.a.InvalidDefinition,e,t,{ctx:n}),new a.a(`Duplicated member is found: ${o[0]} in ${t.name||"(unnamed)"}`,t,n);if(null===e||"object"!=typeof e){if(p(r.a.TypeUnmatched,e,t,{ctx:n}),!n||!n.checkAll)return null;s=null}else{const a=new Set;if((n.noAdditionalProps||t.additionalProps&&0<t.additionalProps.length)&&!Array.isArray(e))for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.add(t);if(n.noAdditionalProps&&Array.isArray(e)&&0<e.length){if(0===(t.additionalProps||[]).filter(e=>e[0].includes("number")).length){if(p(r.a.AdditionalPropUnmatched,e,t,{ctx:n,substitutions:[["addtionalProps","[number]"]]}),!n||!n.checkAll)return null;s=null}}for(const i of t.members)if(a.delete(i[0]),Object.prototype.hasOwnProperty.call(e,i[0])){const t="optional"===i[1].kind?Object.assign(Object.assign({},i[1].optional),{name:i[0],message:i[1].message,messages:i[1].messages,messageId:i[1].messageId}):i[1],r=$(e[i[0]],t,n);if(r){if(s){if(Object(o.g)(s,i[0]))continue;s[i[0]]=r.value,t.isRecordTypeField&&(n.recordTypeFieldValidated=!0)}}else{if(!n||!n.checkAll)return null;s=null}}else if("optional"!==i[1].kind){if(f(r.a.Required,e,[i[1],void 0],{ctx:n}),!n||!n.checkAll)return null;s=null}if(t.additionalProps&&0<t.additionalProps.length){for(const i of function*(){for(const e of a.values())yield e;if(Array.isArray(e))for(let t=0;t<e.length;t++)yield String(t)}()){let c=!1;const l=[];for(const e of t.additionalProps)for(const t of e[0]){const n=e[1];"number"===t?o.d.test(i)&&l.push(n):("string"===t||t.test(i))&&l.push(n),"optional"===n.kind&&(c=!0)}if(0===l.length){if(c)continue;if(p(r.a.AdditionalPropUnmatched,e,t,{ctx:n,substitutions:[["addtionalProps",i]]}),n&&n.checkAll){s=null;continue}return null}a.delete(i);let u=!1;const m=n.errors.length;for(const t of l){const r=$(e[i],"optional"===t.kind?Object.assign(Object.assign({},t.optional),{message:t.message,messages:t.messages,messageId:t.messageId,name:i}):Object.assign(Object.assign({},t),{name:i}),n);if(r){if(s){if(u=!1,n.errors.length=m,Object(o.g)(s,i))continue;s[i]=r.value}break}u=!0}if(u){if(!n||!n.checkAll)return null;s=null}}}if(n.noAdditionalProps&&0<a.size){if(p(r.a.AdditionalPropUnmatched,e,t,{ctx:n,substitutions:[["addtionalProps",Array.from(a.values()).join(", ")]]}),!n||!n.checkAll)return null;s=null}}return s&&null===h(e,t,n)?(p(r.a.ValueUnmatched,e,t,{ctx:n}),null):s?{value:n&&n.mapper?n.mapper(s,t):s}:null}(e,t,n);case"symlink":if(n.schema)return $(e,Object(d.c)(n.schema,t,{nestLevel:0,symlinkStack:[]}),n);throw p(r.a.InvalidDefinition,e,t,{ctx:n}),new a.a(`Unresolved symbol '${t.symlinkTargetName}' is appeared.`,t,n);case"operator":if(n.schema)return $(e,Object(d.c)(n.schema,t,{nestLevel:0,symlinkStack:[]}),n);throw p(r.a.InvalidDefinition,e,t,{ctx:n}),new a.a("Unresolved type operator is found: "+t.operator,t,n);case"spread":case"optional":throw p(r.a.InvalidDefinition,e,t,{ctx:n}),new a.a("Unexpected type assertion: "+t.kind,t,n);default:throw p(r.a.InvalidDefinition,e,t,{ctx:n}),new a.a("Unknown type assertion: "+t.kind,t,n)}}finally{n.typeStack.pop()}}function v(e,t,n){const r=Object.assign({errors:[],typeStack:[]},n||{});try{return $(e,t,r)}finally{n&&(n.errors=r.errors)}}function j(e,t,n){return!!v(e,t,n)}function _(e,t){var n;if(e.has(t))return null===(n=e.get(t))||void 0===n?void 0:n.ty;throw new Error("Undefined type name is referred: "+t)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));class r extends Error{constructor(e){super(e)}}class a extends r{constructor(){super("[SX] evaluate: The maximum count of evaluations has been exceeded.")}}class o extends r{constructor(e){super(`[SX] ${e}: Unexpected termination of script.`)}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(8),a=n(1),o=n(10);function s(e,t){switch(t.kind){case"object":{const n=Array.isArray(e)?[]:{},r=new Set;if(!Array.isArray(e))for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.add(t);for(const a of t.members)Object.hasOwnProperty.call(e,a[0])&&(r.delete(a[0]),n[a[0]]=e[a[0]]);if(t.additionalProps&&0<t.additionalProps.length){for(const t of function*(){for(const e of r.values())yield e;if(Array.isArray(e))for(let t=0;t<e.length;t++)yield String(t)}())n[t]=e[t]}return n}default:return e}}function i(e,t,n){switch(t.kind){case"never":throw new r.a("Type unmatched: "+t.kind,t,n);case"any":case"unknown":case"primitive":case"primitive-value":case"repeated":case"sequence":case"one-of":case"enum":case"object":{const a=Object(o.c)(e,t,n);if(a)return a.value;throw new r.a("Validation failed.",t,n)}case"spread":case"optional":case"symlink":case"operator":throw new r.a("Unexpected type assertion: "+t.kind,t,n);default:throw new r.a("Unknown type assertion: "+t.kind,t,n)}}function c(e,t,n){const r=Object.assign(Object.assign({errors:[],typeStack:[]},n||{}),{mapper:s});try{return i(e,t,r)}finally{n&&(n.errors=r.errors)}}function l(e,t,n,r){return function e(t,n){if(null==t)return n;switch(typeof t){case"object":if(Array.isArray(t))return[...n];{const r=Object.assign({},t);for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){if(Object(a.g)(r,t))continue;r[t]=e(r[t],n[t])}return r}default:return n}}(e,c(t,n,Object.assign({errors:[],typeStack:[]},r||{})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(1);const a=/^first-date-of-fy\(([0-9]+)\)$/,o=/^([-+@])([0-9]+)(yr|mo|day|days|hr|min|sec|ms)$/;class s extends Date{constructor(e,t,n,a,o,s,i){if(super(),void 0!==e)if("string"!=typeof e)this.setUTCDate(1),this.setUTCFullYear(e),this.setUTCMonth("number"==typeof t?t:0),this.setUTCDate("number"==typeof n?n:1),this.setUTCHours("number"==typeof a?a:0),this.setUTCMinutes("number"==typeof o?o:0),this.setUTCSeconds("number"==typeof s?s:0),this.setUTCMilliseconds("number"==typeof i?i:0);else if(r.c.test(e))this.setTime(Date.parse(e));else if(r.a.test(e)){const t=new Date(e);this.setTime(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))}else if(r.b.test(e)){const t=new Date(e);this.setTime(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))}else this.setTime(NaN)}getFullYear(){return this.getUTCFullYear()}getMonth(){return this.getUTCMonth()}getDate(){return this.getUTCDate()}getHours(){return this.getUTCHours()}getMinutes(){return this.getUTCMinutes()}getSeconds(){return this.getUTCSeconds()}getMilliseconds(){return this.getUTCMilliseconds()}}class i extends Date{constructor(e,t,n,a,o,s,i){if(super(),void 0!==e)if("string"!=typeof e)this.setDate(1),this.setFullYear(e),this.setMonth("number"==typeof t?t:0),this.setDate("number"==typeof n?n:1),this.setHours("number"==typeof a?a:0),this.setMinutes("number"==typeof o?o:0),this.setSeconds("number"==typeof s?s:0),this.setMilliseconds("number"==typeof i?i:0);else if(r.c.test(e))this.setTime(Date.parse(e));else if(r.a.test(e)){const t=new Date(e),n=new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate());this.setTime(n.getTime())}else if(r.b.test(e)){const t=new Date(e);this.setTime(t.getTime())}else this.setTime(NaN)}}function c(e,t){const n="evaluateFormula: invalid parameter "+t;if("string"!=typeof t)throw new Error(n);if(t.startsWith("=")){const s=t.slice(1).split(" ");let i=new e;const c=new e(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes()),l=new e(i.getFullYear(),i.getMonth(),i.getDate());i=c;for(const t of s)switch(t){case"current":case"now":i=c;break;case"today":i=l;break;case"first-date-of-yr":case"first-date-of-fy(1)":i=new e(i.getFullYear(),0,1);break;case"last-date-of-yr":i=new e(i.getFullYear(),11,31);break;case"first-date-of-mo":i=new e(i.getFullYear(),i.getMonth(),1);break;case"last-date-of-mo":i=new e(i.getFullYear(),i.getMonth()+1,0);break;default:if(t.startsWith("first-date-of-fy(")){const r=a.exec(t);if(!r)throw new Error(n);{const t=Number.parseInt(r[1],10);if(!(0<t&&t<=12))throw new Error(n);{const n=i.getMonth()+1;let r=i.getFullYear();n<t&&r--,i=new e(r,t-1,1)}}}else{const a=o.exec(t);if(a){let t=Number.parseInt(a[2],10);switch(a[3]){case"yr":switch(a[1]){case"@":break;case"+":t=i.getFullYear()+t;break;case"-":t=i.getFullYear()-t}i=new e(t,i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds());break;case"mo":switch(a[1]){case"@":t-=1;break;case"+":t=i.getMonth()+t;break;case"-":t=i.getMonth()-t}i=new e(i.getFullYear(),t,i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds());break;case"day":case"days":switch(a[1]){case"@":break;case"+":t=i.getDate()+t;break;case"-":t=i.getDate()-t}i=new e(i.getFullYear(),i.getMonth(),t,i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds());break;case"hr":switch(a[1]){case"@":break;case"+":t=i.getHours()+t;break;case"-":t=i.getHours()-t}i=new e(i.getFullYear(),i.getMonth(),i.getDate(),t,i.getMinutes(),i.getSeconds(),i.getMilliseconds());break;case"min":switch(a[1]){case"@":break;case"+":t=i.getMinutes()+t;break;case"-":t=i.getMinutes()-t}i=new e(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),t,i.getSeconds(),i.getMilliseconds());break;case"sec":switch(a[1]){case"@":break;case"+":t=i.getSeconds()+t;break;case"-":t=i.getSeconds()-t}i=new e(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),t,i.getMilliseconds());break;case"ms":switch(a[1]){case"@":break;case"+":t=i.getMilliseconds()+t;break;case"-":t=i.getMilliseconds()-t}i=new e(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),t);break;default:throw new Error(n)}}else{if(!(r.a.test(t)||r.c.test(t)||r.b.test(t)))throw new Error(n);i=new e(t)}}}return i}if(!r.a.test(t))throw new Error(n);return new e(t)}const l={tryParse:e=>"string"==typeof e&&r.a.test(e)?{value:new s(e).getTime()}:null,evaluateFormula:e=>{const t=c(s,e);return new s(t.getFullYear(),t.getMonth(),t.getDate()).getTime()},compare:(e,t)=>e-t,doCast:!1},u={tryParse:e=>"string"==typeof e&&(r.c.test(e)||r.b.test(e))?{value:new s(e).getTime()}:null,evaluateFormula:e=>c(s,e).getTime(),compare:(e,t)=>e-t,doCast:!1},m=[["date",l],["lcdate",Object.assign(Object.assign({},l),{tryParse:e=>"string"==typeof e&&r.a.test(e)?{value:new i(e).getTime()}:null,evaluateFormula:e=>{const t=c(i,e);return new i(t.getFullYear(),t.getMonth(),t.getDate()).getTime()}})],["datetime",u],["lcdatetime",Object.assign(Object.assign({},u),{tryParse:e=>"string"==typeof e&&(r.c.test(e)||r.b.test(e))?{value:new i(e).getTime()}:null,evaluateFormula:e=>c(i,e).getTime()})]]},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(1);const a="Unsafe symbol name is appeared in unique constraint assertion:",o=e=>(t,n)=>{const r="evaluateFormula: invalid parameter "+n;if(!Array.isArray(t))throw new Error(r);const a=[];if("string"==typeof n)a.push(n);else if(Array.isArray(n)){for(const e of n)if("string"!=typeof e)throw new Error(r);a.push(...n)}const o=t.map(t=>e(t,a));for(let e=0;e<o.length;e++)e:for(let t=0;t<o.length;t++){if(e===t)continue;const n=o[e],r=o[t];for(let e=0;e<n.length;e++)if(n[e]!==r[e])continue e;return!1}return!0},s=[["unique",{kinds:["repeated","sequence"],check:o((e,t)=>{const n=[];if(0<t.length)for(const o of t){if(Object(r.g)(r.f,o))throw new Error(`${a} ${o}`);n.push(e[o])}else n.push(e);return n})}],["unique-non-null",{kinds:["repeated","sequence"],check:o((e,t)=>{var n;const o=[];if(0<t.length)for(const s of t){if(Object(r.g)(r.f,s))throw new Error(`${a} ${s}`);o.push(null!==(n=e[s])&&void 0!==n?n:NaN)}else o.push(e);return o})}]]},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r=Function("return this")()},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return compileLambda}));var _ast__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3),_evaluate__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4),_errors__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6),_compile_ops__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17);function compileCore(e,t,n,r,a){function o(e){let t="";if(null===e)t+="(null)";else if(void 0===e)t+="(void 0)";else switch(typeof e){case"boolean":case"number":t+=`(${String(e)})`;break;case"object":if(Object(_ast__WEBPACK_IMPORTED_MODULE_0__.b)(e)){const n=e;Object(_errors__WEBPACK_IMPORTED_MODULE_2__.c)("(compiler)compileValue",i.varNames,n.symbol),i.varNames.has(n.symbol)?t+=`(${i.varNames.get(n.symbol)})`:(a[i.varsCount]=n.symbol,t+=`(_$_vars[${String(i.varsCount++)}])`);break}default:a[i.varsCount]=e,t+=`(_$_vars[${String(i.varsCount++)}])`}return t}function s(t,n){let r="";const l=t[n];if(Array.isArray(l))if(0<l.length){const t=Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.a)(e,l);if(Array.isArray(t))if(0<t.length)if(Object(_ast__WEBPACK_IMPORTED_MODULE_0__.b)(t[0])){const n=t[0],o=t.slice(1);Object(_errors__WEBPACK_IMPORTED_MODULE_2__.c)("(compiler)compileToken",c,n.symbol),c.has(n.symbol)?r+=c.get(n.symbol)(t,o):n.symbol===e.config.reservedNames.spread?r+=`...(${o.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")})`:e.funcMap.has(n.symbol)?(a[i.varsCount]=e.funcMap.get(n.symbol).fn(e,""),r+=`((_$_vars[${String(i.varsCount++)}])(${o.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")}))`):i.varNames.has(n.symbol)?r+=`(${String(i.varNames.get(n.symbol))})(${o.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")})`:(a[i.varsCount]=Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.d)(e,n.symbol),r+=`((_$_vars[${String(i.varsCount++)}])()(${o.map(t=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")}))`)}else switch(typeof t[0]){case"function":a[i.varsCount]=t[0],r+=`((_$_vars[${String(i.varsCount++)}])(${t.slice(1).map((t,n,r)=>s([Object(_compile_ops_helpers__WEBPACK_IMPORTED_MODULE_3__.f)(e,t)],0)).join(",")}))`;break;default:throw new Error(`[SX] compileToken: First item of list is not a function: ${JSON.stringify(t[0])}.`)}else r+="([])";else r+=o(l)}else r+="([])";else r+=o(l);return r}const i={_$_vars:a,varsCount:1,varNames:new Map,varNamesCount:0,varDefs:"var x0;",ops:new Map,makeScope:function(e){const t=new Map;for(const e of i.varNames.entries())t.set(e[0],e[1]);e(),i.varNames=t},compileToken:s};Object(_compile_ops__WEBPACK_IMPORTED_MODULE_4__.a)(e,i);const c=i.ops;e.config.enableTailCallOptimization&&(r=Object(_evaluate__WEBPACK_IMPORTED_MODULE_1__.g)(e,t,r)),i.varNames.set(e.config.reservedNames.thiz,"(this===(Function('return this')())?null:(this===void 0?null:this))");const l=Object(_evaluate__WEBPACK_IMPORTED_MODULE_1__.c)(e);if(l)for(const e in l)Object.prototype.hasOwnProperty.call(l,e)&&(a[i.varsCount++]=e,a[i.varsCount]=l[e],i.varNames.set(e,`(_$_vars[${String(i.varsCount)}][_$_vars[${String(i.varsCount-1)}]])`),i.varsCount++);const u=""+t.map((e,r)=>(i.varNames.set(t[r].symbol,"a"+r),`${n&&r===t.length-1?"...":""}a${r}`)).join(","),m=`return(${r.map((e,t)=>s(r,t)).join(",")})`;return`(function(${u}){"strict";${i.varDefs}${m}})`}function evalCompiledLambda(_$_state,_$_vars,code){return _$_vars[0]=eval(code),_$_vars[0]}function compileLambda(e,t,n,r){const a=[];return evalCompiledLambda(e,a,compileCore(e,t,n,r,a))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(3),a=n(0),o=n(6);function s(e,t){const{_$_vars:n,ops:s,makeScope:i,compileToken:c}=t;s.set(e.config.reservedNames.quote,(function(e,r){let a="";return n[t.varsCount]=e[1],a+=`(_$_vars[${String(t.varsCount++)}])`,a})),s.set(e.config.reservedNames.self,(function(t,n){let r="";return r+=`((_$_vars[0])(${n.map(t=>c([Object(o.f)(e,t)],0)).join(",")}))`,r})),s.set("$__if",(function(t,n){let r="";return Object(a.a)("compileToken:$__if",n,2,3),r+=`(${c(t,1)}?(${c([Object(o.e)(e,t[2])],0)}):(${c([Object(o.e)(e,t[3])],0)}))`,r})),s.set("$__if-null",(function(t,n){let r="";return Object(a.a)("compileToken:$__if-null",n,2,2),r+=`((()=>{let _$_rv=${c(t,1)};return _$_rv?_$_rv:(${c([Object(o.e)(e,t[2])],0)}});})())`,r})),s.set("$__cond",(function(t,n){let r="";Object(a.a)("compileToken:$__cond",n,1),r+="(";for(let t=0;t<n.length;t+=2)r+=`${c([Object(o.e)(e,n[t])],0)}?(${c([Object(o.e)(e,n[t+1])],0)}):(`;r+="null";for(let e=0;e<n.length;e+=2)r+=")";return r+=")",r})),s.set("$__while",(function(t,n){let r="";return Object(a.a)("compileToken:$__while",n,1),r+=`((()=>{let _$_rv=null;while(${c([Object(o.e)(e,t[1])],0)}){_$_rv=${t.slice(2).map(t=>c([Object(o.e)(e,t)],0)).join(",")}}return _$_rv})())`,r})),s.set("$__do-while",(function(t,n){let r="";return Object(a.a)("compileToken:$__do-until",n,1),r+=`((()=>{let _$_rv=null;do{_$_rv=${t.slice(2).map(t=>c([Object(o.e)(e,t)],0)).join(",")}}}while(${c([Object(o.e)(e,t[1])],0)})return _$_rv)())`,r})),s.set("$__until",(function(t,n){let r="";return Object(a.a)("compileToken:$__until",n,1),r+=`((()=>{let _$_rv=null;while(!${c([Object(o.e)(e,t[1])],0)}){_$_rv=${t.slice(2).map(t=>c([Object(o.e)(e,t)],0)).join(",")}}return _$_rv})())`,r})),s.set("$__do-until",(function(t,n){let r="";return Object(a.a)("compileToken:$__do-until",n,1),r+=`((()=>{let _$_rv=null;do{_$_rv=${t.slice(2).map(t=>c([Object(o.e)(e,t)],0)).join(",")}}}while(!${c([Object(o.e)(e,t[1])],0)})return _$_rv)())`,r})),s.set("$__repeat",(function(n,s){let l="";if(Object(a.a)("compileToken:$__repeat",s,2),!Object(r.b)(s[0]))throw new Error("[SX] compileToken: $__repeat : args[0] is not symbol.");return i(()=>{const r="v"+t.varNamesCount++;t.varNames.set(s[0].symbol,r),l+=`(((_$_n)=>{let _$_rv=null;for(let ${r}=0;${r}<_$_n;${r}++){_$_rv=${n.slice(2).map(t=>c([Object(o.e)(e,t)],0)).join(",")}}return _$_rv})(${c(s,1)}))`}),l})),s.set("$__for",(function(n,s){let l="";if(Object(a.a)("compileToken:$__for",s,2),!Object(r.b)(s[0]))throw new Error("[SX] compileToken: $__for : args[0] is not symbol.");return i(()=>{const r="v"+t.varNamesCount++;t.varNames.set(s[0].symbol,r),l+=`(((_$_l)=>{let _$_rv=null;for(const ${r} of _$_l){_$_rv=${n.slice(2).map(t=>c([Object(o.e)(e,t)],0)).join(",")}}return _$_rv})(${c(s,1)}))`}),l})),s.set("$__scope",(function(n,s){let l="";if(Object(a.a)("compileToken:$__scope",s,2),!Array.isArray(n[3]))throw new Error("[SX] compileToken: $__scope : args[2] is not array.");return i(()=>{for(const a of Object(o.e)(e,n[3])){let e="";if(Array.isArray(a)){if(a.length<1)throw new Error("[SX] compileToken: $__scope : args[0][?] is too short.");if(!Object(r.b)(a[0]))throw new Error("[SX] compileToken: $__scope : args[0][?][0] is not symbol.");e=a[0].symbol,l+=`(${"v"+t.varNamesCount}=${c(a,1)})`}else{if(!Object(r.b)(a))throw new Error("[SX] compileToken: $__scope : args[0][?] is not symbol.");e=a.symbol}t.varDefs+=`var v${t.varNamesCount}=void 0;`,t.varNames.set(e,"v"+t.varNamesCount++)}const a=""+n.slice(4).map(t=>c([Object(o.e)(e,t)],0)).join(",");l+=n[2]?`[${a}]`:`(${a})`}),l})),s.set("$__try",(function(r,s){let l="";return Object(a.a)("compileToken:$__try",s,1,2),l+=`((()=>{try{${c([Object(o.e)(e,r[1])],0)}}catch(e${t.varNamesCount}){let e${t.varNamesCount+1}=(_$_vars[${String(t.varsCount)}])();`,n[t.varsCount++]=Object(o.c)(e),i(()=>{t.varNames.set("$error","e"+t.varNamesCount++),t.varNames.set("$parent","e"+t.varNamesCount++),l+=c([Object(o.e)(e,r[2])],0)+"}})())"}),l})),s.set(e.config.reservedNames.raise,(function(t,n){let r="";return r+=`((()=>{throw ${c([Object(o.f)(e,t[1])],0)}})())`,r})),s.set("$boolean",(function(e,t){let n="";return Object(a.a)("compileToken:$boolean",t,1,1),n+=`((x0=${c(t,0)}),(Array.isArray(x0)&&x0.length===0?false:boolean(x0)))`,n})),s.set("$__get",(function(s,i){let l="";Object(a.a)("compileToken:$__get",i,1);const u=Object(o.e)(e,s[1]),m=Object(r.b)(u)?u.symbol:"string"==typeof u?u:null;if("string"!=typeof m)throw new Error(`[SX] compileToken: $__get : operand is not symbol: ${JSON.stringify(s[1])}.`);let p="";t.varNames.has(m)?p=t.varNames.get(m):(n[t.varsCount]=Object(o.d)(e,m),p=`_$_vars[${String(t.varsCount++)}]`);return l+=`((${p})${s.slice(2).map((e,a,o)=>{return`[${Object(r.b)(o[a])?(s=o[a].symbol,n[t.varsCount]=s,`_$_vars[${String(t.varsCount++)}]`):c(o,a)}]`;var s}).join("")})`,l})),s.set("$__let",(function(n,s){let i="";Object(a.a)("compileToken:$__let",s,2,2);const l=Object(o.e)(e,n[1]),u=Object(r.b)(l)?l.symbol:"string"==typeof l?l:null;if("string"!=typeof u)throw new Error(`[SX] compileToken: $__let : operand is not rvalue: ${JSON.stringify(n[1])}.`);return t.varNames.has(u)||(t.varDefs+=`var v${t.varNamesCount}=void 0;`,t.varNames.set(u,"v"+t.varNamesCount++)),i+=`(${t.varNames.get(u)}=${c(n,2)})`,i})),s.set("$__set",(function(s,i){let l="";Object(a.a)("compileToken:$__set",i,2);const u=Object(o.e)(e,s[1]),m=Object(r.b)(u)?u.symbol:"string"==typeof u?u:Array.isArray(u)?Object(r.b)(u[0])?u[0].symbol:"string"==typeof u[0]?u[0]:null:null;if("string"!=typeof m)throw new Error(`[SX] compileToken: $__set : operand is not rvalue: ${JSON.stringify(s[1])}.`);let p="";t.varNames.has(m)?p=t.varNames.get(m):(n[t.varsCount]=Object(o.d)(e,m),p=`_$_vars[${String(t.varsCount++)}]`);let f=!1,d="";return l+=`((${p})${(Array.isArray(u)?u.slice(1):[]).map((e,s,i)=>{return`[${Object(r.b)(i[s])?(u=i[s].symbol,n[t.varsCount]=Object(a.b)("compileToken:$__set",u),`_$_vars[${String(t.varsCount++)}]`):(l=c(i,s),f||(n[t.varsCount]=Object(o.b)("compileToken:$__set"),d=String(t.varsCount++),f=!0),`(_$_vars[${d}](${l}))`)}]`;var l,u}).join("")}=${c(s,2)})`,l})),s.set(e.config.reservedNames.not,(function(e,t){let n="";return Object(a.a)("compileToken:$not",t,1,1),n+=`(!${c(t,0)})`,n})),s.set("$__and",(function(t,n){let r="";return Object(a.a)("compileToken:$__and",n,1),r+=`(${n.map(t=>c([Object(o.e)(e,t)],0)).join("&&")})`,r})),s.set("$__or",(function(t,n){let r="";return Object(a.a)("compileToken:$__or",n,1),r+=`(${n.map(t=>c([Object(o.e)(e,t)],0)).join("||")})`,r})),s.set("===",(function(e,t){let n="";return Object(a.a)("compileToken:===",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("===")})`,n})),s.set("!==",(function(e,t){let n="";return Object(a.a)("compileToken:!==",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("!==")})`,n})),s.set("==",(function(e,t){let n="";return Object(a.a)("compileToken:==",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("==")})`,n})),s.set("!=",(function(e,t){let n="";return Object(a.a)("compileToken:!=",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("!=")})`,n})),s.set("<",(function(e,t){let n="";return Object(a.a)("compileToken:<",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("<")})`,n})),s.set("<=",(function(e,t){let n="";return Object(a.a)("compileToken:<=",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("<=")})`,n})),s.set(">",(function(e,t){let n="";return Object(a.a)("compileToken:>",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">")})`,n})),s.set(">=",(function(e,t){let n="";return Object(a.a)("compileToken:<=",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">=")})`,n})),s.set("$concat",(function(t,n){let o="";Object(a.a)("compileToken:$concat",n,1);let s="";if(Array.isArray(n[0])&&Object(r.b)(n[0][0],e.config.reservedNames.spread)){const e=c(n[0],1);s=`(${e}[0]).concat((${e}.length>1?${e}[1]:(typeof ${e}[0]==='string'?'':[])),`}else s=c(n,0)+".concat(";return o+=`(${s}${n.slice(1).map((e,t,n)=>c(n,t)).join(",")}))`,o})),s.set("+",(function(t,n){let o="";Object(a.a)("compileToken:+",n,1);let s=!1;return n.map((t,n,a)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),o+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x+y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("+")})`,o})),s.set("-",(function(t,n){let o="";Object(a.a)("compileToken:-",n,1);let s=!1;return n.map((t,n,a)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),o+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return (_$_rv.length>1?(_$_rv.reduce((x,y)=>x-y)):(_$_rv.length>0?-_$_rv[0]:NaN));})())`:`(${t.length>2?n.map((e,t,n)=>c(n,t)).join("-"):`-(${String(c(t,1))})`})`,o})),s.set("*",(function(t,n){let o="";Object(a.a)("compileToken:*",n,2);let s=!1;return n.map((t,n,a)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),o+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x*y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("*")})`,o})),s.set("**",(function(t,n){let o="";Object(a.a)("compileToken:**",n,2);let s=!1;return n.map((t,n,a)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),o+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x**y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("**")})`,o})),s.set("/",(function(t,n){let o="";Object(a.a)("compileToken:/",n,2);let s=!1;return n.map((t,n,a)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),o+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x/y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("/")})`,o})),s.set("%",(function(t,n){let o="";Object(a.a)("compileToken:%",n,2);let s=!1;return n.map((t,n,a)=>{Array.isArray(t)&&Object(r.b)(t[0],e.config.reservedNames.spread)&&(s=!0)}),o+=s?`((()=>{let _$_rv=[];${n.map((e,t,n)=>`_$_rv.push(${c(n,t)})`).join(";")};return _$_rv.reduce((x,y)=>x%y);})())`:`(${n.map((e,t,n)=>c(n,t)).join("%")})`,o})),s.set("<<",(function(e,t){let n="";return Object(a.a)("compileToken:<<",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("<<")})`,n})),s.set(">>",(function(e,t){let n="";return Object(a.a)("compileToken:>>",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">>")})`,n})),s.set(">>>",(function(e,t){let n="";return Object(a.a)("compileToken:>>>",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join(">>>")})`,n})),s.set("$bit-not",(function(e,t){let n="";return Object(a.a)("compileToken:$bit-not",t,1,1),n+=`(~(${c(e,1)}))`,n})),s.set("$bit-and",(function(e,t){let n="";return Object(a.a)("compileToken:$bit-and",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("&")})`,n})),s.set("$bit-or",(function(e,t){let n="";return Object(a.a)("compileToken:$bit-or",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("|")})`,n})),s.set("$bit-xor",(function(e,t){let n="";return Object(a.a)("compileToken:$bit-xor",t,2,2),n+=`(${t.map((e,t,n)=>c(n,t)).join("^")})`,n}))}},function(e,t,n){e.exports=n(21)},,,function(e,t,n){"use strict";n.r(t),n.d(t,"ErrorTypes",(function(){return o.a})),n.d(t,"parse",(function(){return pr})),n.d(t,"compile",(function(){return dr})),n.d(t,"picked",(function(){return gt.i})),n.d(t,"omit",(function(){return gt.e})),n.d(t,"partial",(function(){return gt.h})),n.d(t,"intersect",(function(){return gt.c})),n.d(t,"oneOf",(function(){return gt.f})),n.d(t,"subtract",(function(){return gt.p})),n.d(t,"primitive",(function(){return gt.j})),n.d(t,"regexpPatternStringType",(function(){return gt.l})),n.d(t,"primitiveValue",(function(){return gt.k})),n.d(t,"optional",(function(){return gt.g})),n.d(t,"repeated",(function(){return gt.m})),n.d(t,"sequenceOf",(function(){return gt.n})),n.d(t,"spread",(function(){return gt.o})),n.d(t,"enumType",(function(){return gt.b})),n.d(t,"objectType",(function(){return gt.d})),n.d(t,"derived",(function(){return gt.a})),n.d(t,"symlinkType",(function(){return gt.q})),n.d(t,"withName",(function(){return gt.E})),n.d(t,"withTypeName",(function(){return gt.J})),n.d(t,"withOriginalTypeName",(function(){return gt.F})),n.d(t,"withDocComment",(function(){return gt.s})),n.d(t,"withRange",(function(){return gt.G})),n.d(t,"withMinValue",(function(){return gt.B})),n.d(t,"withMaxValue",(function(){return gt.y})),n.d(t,"withGreaterThan",(function(){return gt.u})),n.d(t,"withLessThan",(function(){return gt.v})),n.d(t,"withMinLength",(function(){return gt.A})),n.d(t,"withMaxLength",(function(){return gt.x})),n.d(t,"withMatch",(function(){return gt.w})),n.d(t,"withStereotype",(function(){return gt.I})),n.d(t,"withConstraint",(function(){return gt.r})),n.d(t,"withForceCast",(function(){return gt.t})),n.d(t,"withRecordType",(function(){return gt.H})),n.d(t,"withMeta",(function(){return gt.z})),n.d(t,"withMsg",(function(){return gt.C})),n.d(t,"withMsgId",(function(){return gt.D})),n.d(t,"generateTypeScriptCode",(function(){return $r})),n.d(t,"generateJsonSchemaObject",(function(){return _r})),n.d(t,"generateJsonSchema",(function(){return Or})),n.d(t,"generateProto3Code",(function(){return Cr})),n.d(t,"generateGraphQlCode",(function(){return Mr})),n.d(t,"generateCSharpCode",(function(){return Hr})),n.d(t,"TynderSchemaVersion",(function(){return Gr})),n.d(t,"serializeToObject",(function(){return Qr})),n.d(t,"serialize",(function(){return Zr})),n.d(t,"deserializeFromObject",(function(){return na})),n.d(t,"deserialize",(function(){return ra})),n.d(t,"validateRoot",(function(){return aa.d})),n.d(t,"validate",(function(){return aa.c})),n.d(t,"isType",(function(){return aa.b})),n.d(t,"getType",(function(){return aa.a})),n.d(t,"pickRoot",(function(){return oa.c})),n.d(t,"pick",(function(){return oa.b})),n.d(t,"patch",(function(){return oa.a})),n.d(t,"stereotypes",(function(){return sa})),n.d(t,"customConstraints",(function(){return ia}));var r=n(13),a=n(14),o=n(2);class s extends Error{constructor(e){super(e.message),this.result=e}}function i(e,t){return{src:e,start:0,end:e.length,context:t}}function c(e){return t=>({succeeded:!0,next:{src:t.src,start:t.start,end:t.end,context:t.context},tokens:e?[e()]:[]})}function l(e){return t=>{throw new s({succeeded:!1,error:!0,src:t.src,pos:t.start,message:e||""})}}function u(e){return t=>0===t.start?{succeeded:!0,next:{src:t.src,start:t.start,end:t.end,context:t.context},tokens:e?[e()]:[]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:'operator "beginning"'}}function m(e){return t=>t.start===t.end?{succeeded:!0,next:{src:t.src,start:t.start,end:t.end,context:t.context},tokens:e?[e()]:[]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:'operator "end"'}}function p(e,t){return e=e||0,n=>r=>{let a=r;const o=[];for(;;){const r=n(a);if(!r.succeeded){if(r.error)return r;if(o.length>=e)break;return{succeeded:!1,error:!1,src:a.src,pos:a.start,message:'operator "quantify"'}}if(a=r.next,o.push({next:r.next,tokens:r.tokens}),t&&t===o.length)break}if(o.length>0){const e=[];for(const t of o)e.push(...t.tokens);return{succeeded:!0,next:o[o.length-1].next,tokens:e}}return{succeeded:!0,next:{src:r.src,start:r.start,end:r.end,context:r.context},tokens:[]}}}function f(...e){return t=>{let n=null,r=null;for(const a of e){const e=a(t);if(e.succeeded){n={next:e.next,tokens:e.tokens};break}r?e.error?(!r.error||r.pos<e.pos)&&(r=e):r.pos<e.pos&&(r=e):r=e}return n?{succeeded:!0,next:n.next,tokens:n.tokens}:r||{succeeded:!1,error:!1,src:t.src,pos:t.start,message:'operator "first"'}}}function d(...e){return t=>{const n=[];let r=null;for(const a of e){const e=a(t);e.succeeded?n.push({next:e.next,tokens:e.tokens}):r?e.error?(!r.error||r.pos<e.pos)&&(r=e):r.pos<e.pos&&(r=e):r=e}if(n.length>0){const e=n.reduce((e,t)=>e.next.start>=t.next.start?e:t);return{succeeded:!0,next:e.next,tokens:e.tokens}}return r||{succeeded:!1,error:!1,src:t.src,pos:t.start,message:'operator "or"'}}}function b(e,t){return(...n)=>r=>{let a=r;const o=[];for(const e of n){const t=e(a);if(!t.succeeded)return t;a=t.next,o.push(...t.tokens)}const s=e?e(o,r):o;return{succeeded:!0,next:t?{src:a.src,start:a.start,end:a.end,context:t(a.context)}:a,tokens:s}}}function g(...e){return t=>{let n=t;for(const t of e){const e=t(n);if(!e.succeeded)return e;n=e.next}return{succeeded:!0,next:t,tokens:[]}}}function y(e,t){return(...n)=>r=>{if(r.start-e<0)return{succeeded:!1,error:!1,src:r.src,pos:r.start,message:"lookBehind: src is too short"};let a={src:r.src,start:r.start-e,end:r.end,context:r.context};for(const e of n){const t=e(a);if(!t.succeeded)return t;a=t.next}return{succeeded:!0,next:r,tokens:t?[t()]:[]}}}function h(e){return t=>n=>{const r=t(n);if(!r.succeeded)return r;const a=i(r.tokens,n.context);let o=a,c=!1;if(e.check(o).succeeded)return{succeeded:!0,next:r.next,tokens:r.tokens};e:for(let t=0;void 0===e.maxApply||t<e.maxApply;t++){let t=!1;t:for(const n of e.rules){const{parser:r,rtol:a}="function"==typeof n?{parser:n,rtol:!1}:n,s=o.src.length;for(let n=0;n<=s;n++){const i=r({src:o.src,start:a?s-n:n,end:o.src.length,context:o.context});if(i.succeeded){t=!0;const r=o.src.slice(0,a?s-n:n);if(r.push(...i.tokens),r.push(...o.src.slice(i.next.start)),o={src:r,start:0,end:r.length,context:i.next.context},e.check(o).succeeded){c=!0;break e}break t}}}if(!t)break}if(!c&&!e.check(o).succeeded)throw new s({succeeded:!1,error:!0,src:a.src,pos:a.start,message:"The application of production rules was not finished"});return{succeeded:!0,next:r.next,tokens:o.src}}}function $(e){return t=>{try{return e(t)}catch(e){if(e.result)return e.result;throw e}}}function v(e,t){return n=>r=>{let a=!0;if(Math.max(0,r.end-r.start)>=n.length){for(let e=0;e<n.length;e++)if(!t(r.src[r.start+e],n[e])){a=!1;break}}else a=!1;return a?{succeeded:!0,next:{src:r.src,start:r.start+n.length,end:r.end,context:r.context},tokens:[e(n)]}:{succeeded:!1,error:!1,src:r.src,pos:r.start,message:`operator "objSequence(${n})"`}}}function j(e,t){return(...n)=>r=>{const a=Math.max(0,r.end-r.start);let o=-1;return a>0&&n.some((e,n)=>{if(t(r.src[r.start],e))return o=n,!0})?{succeeded:!0,next:{src:r.src,start:r.start+1,end:r.end,context:r.context},tokens:[e(n[o])]}:{succeeded:!1,error:!1,src:r.src,pos:r.start,message:`operator "objClass(${n.join(",")})"`}}}function _(e,t){return(...n)=>r=>{if(Math.max(0,r.end-r.start)>0)for(const e of n){let a=!0;if(!t(r.src[r.start],e)){a=!1;break}if(a)return{succeeded:!1,error:!1,src:r.src,pos:r.start,message:`operator "objClassNot(${n.join(",")})"`}}return{succeeded:!0,next:{src:r.src,start:r.start+1,end:r.end,context:r.context},tokens:[e(r.src[r.start])]}}}var O=n(11),k=n(15),w=n(3),x=n(4),N=n(16),S=n(0);const T=(e,t)=>(...e)=>{Object(S.a)("$car",e,1,1);const t=U(...e);if(!Array.isArray(t))throw new Error("[SX] $car: Invalid argument(s): args[0] is not array.");if(0===t.length)throw new Error("[SX] $car: Invalid argument(s): args[0] is nil.");return t[0]},E=(T(),(e,t)=>(...e)=>{Object(S.a)("$cdr",e,1,1);const t=U(...e);if(!Array.isArray(t))throw new Error("[SX] $cdr: Invalid argument(s): args[0] is not array.");if(0===t.length)throw new Error("[SX] $cdr: Invalid argument(s): args[0] is nil.");return t.slice(1)}),A=(E(),(e,t)=>(...e)=>{Object(S.a)("$cons",e,2,2);let{car:t,cdr:n}=V(...e);return null===t&&(t=[]),null===n&&(n=[]),Array.isArray(n)?(n=n.slice(0),n.unshift(t),n):{car:t,cdr:n}}),C=(A(),(e,t)=>(...e)=>{const t=e.slice(0,1);return 1===t.length?t[0]:null}),U=(...e)=>{const t=e.slice(0,1);return 1===t.length?t[0]:null},I=(e,t)=>(...e)=>{const t=e.slice(1,2);return 1===t.length?t[0]:null},P=(...e)=>{const t=e.slice(1,2);return 1===t.length?t[0]:null},L=(e,t)=>(...e)=>{const t=e.slice(e.length-1,e.length);return 1===t.length?t[0]:null},M=(e,t)=>(...e)=>{const t=e.slice(1);return 0<t.length?t:null},D=(e,t)=>(...e)=>{let t=e.slice(0,1);t=1===t.length?t[0]:null;let n=e.slice(1,2);return n=1===n.length?n[0]:null,{car:t,cdr:n}},V=(...e)=>{let t=e.slice(0,1);t=1===t.length?t[0]:null;let n=e.slice(1,2);return n=1===n.length?n[0]:null,{car:t,cdr:n}},q=(e,t)=>(...e)=>{Object(S.a)("$atom",e,1,1);const t=U(...e);if(null==t)return!0;if(Array.isArray(t))return 0===t.length;switch(typeof t){case"number":case"string":case"function":case"boolean":return!0;case"object":return!!Object(w.b)(t)}return!1},X=(q(),(e,t)=>(...e)=>{Object(S.a)("$eq",e,2,2);const{car:t,cdr:n}=V(...e);return t===n}),F=(X(),(e,t)=>(...e)=>{Object(S.a)("$notEq",e,2,2);const{car:t,cdr:n}=V(...e);return t!==n}),R=(F(),(e,t)=>(...e)=>e.slice(0)),B=(e,t,n)=>(...t)=>{Object(S.a)("$__scope",t,3);const r=U(...t),a=P(...t),{car:o,cdr:s}=V(...t.slice(2));let i=null;const c={};if(Array.isArray(o))for(const t of o)if(Array.isArray(t)){const n=V(...t),r=Object(w.b)(n.car),a=r?r.symbol:String(n.car);Object(S.c)("$__scope",c,a),c[a]=Object(x.b)(e,n.cdr)}else{const e=Object(w.b)(t),n=e?e.symbol:String(t);Object(S.c)("$__scope",c,n),c[n]=null}Object(x.f)(e,c,r,n);try{if(4<t.length)if(a){i=[];for(const n of t.slice(3))i.push(Object(x.b)(e,n))}else for(const n of t.slice(3))i=Object(x.b)(e,n);else i=Object(x.b)(e,s)}finally{Object(x.m)(e)}return i},W=(e,t)=>(...t)=>{Object(S.a)("$__lambda",t,2);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let r=!1;for(let t=0;t<n.length;t++){const a=n[t];if(t===n.length-1&&e.config.enableSpread&&Array.isArray(a)&&Object(w.b)(a[0],e.config.reservedNames.spread)){if(!Object(w.b)(a[1]))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);n[t]=a[1],r=!0}else if(!Object(w.b)(a))throw new Error(`[SX] $__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}let a=t.slice(1);e.config.enableTailCallOptimization&&(a=Object(x.g)(e,n,a));const o=Object(x.c)(e),s=function(...t){if(t.length+(r?1:0)<n.length)throw new Error(`[SX] func call: Actual args too short: actual ${t.length} / formal ${n.length}.`);return B(e,0,o)(!1,!1,[[e.config.reservedNames.self,s],[e.config.reservedNames.thiz,this===k.a||void 0===this?null:Object(w.c)(e,this)],...n.map((a,o)=>[a.symbol,Object(w.c)(e,r&&o===n.length-1?t.slice(o):t[o])])],...a)};return s},Y=(e,t)=>(...t)=>{Object(S.a)("$$__lambda",t,2);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $$__lambda: Invalid argument(s): args[0] is not array.");let r=!1;for(let t=0;t<n.length;t++){const a=n[t];if(t===n.length-1&&e.config.enableSpread&&Array.isArray(a)&&Object(w.b)(a[0],e.config.reservedNames.spread)){if(!Object(w.b)(a[1]))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);n[t]=a[1],r=!0}else if(!Object(w.b)(a))throw new Error(`[SX] $$__lambda: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}const a=t.slice(1);return Object(N.a)(e,n,r,a)},z=(e,t)=>(...e)=>{Object(S.a)("$apply",e,1);const t=U(...e);if("function"!=typeof t)throw new Error("[SX] $apply: Invalid argument(s): args[0] is not function.");return(...n)=>t.apply(null,e.slice(1).concat(n))},K=(z(),(e,t)=>(...e)=>{throw U(...e)}),H=(K(),(e,t)=>(...e)=>{Object(S.a)("$pipe",e,1);let t=e[0];for(let n=1;n<e.length;n++)t=e[n](t);return t}),G=(H(),(e,t)=>(...t)=>{Object(S.a)("$__let",t,2,2);let n=Object(w.b)(U(...t));if(!n){if("string"!=typeof t[0])throw new Error("[SX] $__let: Invalid argument(s): invalid name.");n={symbol:t[0]}}return Object(S.c)("$__let",{},n.symbol),Object(x.k)(e,n,!1)[n.symbol]=t[1],t[1]}),J=(e,t)=>(...e)=>{Object(S.a)("$boolean",e,1,1);const t=U(...e);return(!Array.isArray(t)||0!==t.length)&&Boolean(t)},Q=J(),Z=(e,t)=>(...e)=>(Object(S.a)("$not",e,1,1),!Q(...e)),ee=Z(),te=(e,t)=>(...t)=>{Object(S.a)("$__and",t,1);let n=null;for(let r=0;r<t.length;r++){const a=Object(x.b)(e,t[r]);if(!Q(a))return a;n=a}return n},ne=(te(null),(e,t)=>(...t)=>{Object(S.a)("$__or",t,1);let n=null;for(let r=0;r<t.length;r++){const a=Object(x.b)(e,t[r]);if(Q(a))return a;n=a}return n}),re=(ne(null),(e,t)=>(...e)=>{Object(S.a)("$ambiguousEq",e,2,2);let{car:t,cdr:n}=V(...e);return Array.isArray(t)&&0===t.length&&(t=null),Array.isArray(n)&&0===n.length&&(n=null),void 0===t&&(t=null),void 0===n&&(n=null),t==n}),ae=re(),oe=(e,t)=>(...e)=>!ae(...e),se=(oe(),(e,t)=>(...e)=>{Object(S.a)("$lt",e,2,2);const{car:t,cdr:n}=V(...e);return Object(x.l)(t)<Object(x.l)(n)}),ie=(se(),(e,t)=>(...e)=>{Object(S.a)("$le",e,2,2);const{car:t,cdr:n}=V(...e);return Object(x.l)(t)<=Object(x.l)(n)}),ce=(ie(),(e,t)=>(...e)=>{Object(S.a)("$gt",e,2,2);const{car:t,cdr:n}=V(...e);return Object(x.l)(t)>Object(x.l)(n)}),le=(ce(),(e,t)=>(...e)=>{Object(S.a)("$ge",e,2,2);const{car:t,cdr:n}=V(...e);return Object(x.l)(t)>=Object(x.l)(n)}),ue=(le(),(e,t)=>(...e)=>{Object(S.a)("$typeof",e,1,1);const t=U(...e);if(null===t)return"null";const n=typeof t;switch(n){case"object":return Array.isArray(t)?"list":"object";case"symbol":return"js-symbol";default:return n}}),me=(ue(),(e,t)=>(...e)=>{if(Object(S.a)("$symbol",e,1,1),"string"==typeof e[0])return{symbol:e[0]};throw new Error("[SX] $symbol: Invalid argument(s): item(s) of args[0] is not string.")}),pe=(me(),(e,t)=>(...e)=>{if(Object(S.a)("$isSymbol",e,1,2),1===e.length)return!!Object(w.b)(e[0]);if("string"==typeof e[1])return!!Object(w.b)(e[0],e[1]);throw new Error("[SX] $isSymbol: Invalid argument(s): item(s) of args[1] is not string.")}),fe=(pe(),(e,t)=>(...e)=>(Object(S.a)("$isNull",e,1,1),null===U(...e))),de=(fe(),(e,t)=>(...e)=>{Object(S.a)("$isNil",e,1,1);const t=U(...e);return Array.isArray(t)&&0===t.length}),be=(de(),(e,t)=>(...e)=>(Object(S.a)("$isUndefined",e,1,1),void 0===U(...e))),ge=(be(),(e,t)=>(...e)=>(Object(S.a)("$isList",e,1,1),Array.isArray(U(...e)))),ye=(ge(),(e,t)=>(...e)=>(Object(S.a)("$isString",e,1,1),"string"==typeof U(...e))),he=(ye(),(e,t)=>(...e)=>(Object(S.a)("$isNumber",e,1,1),"number"==typeof U(...e))),$e=(he(),(e,t)=>(...e)=>(Object(S.a)("$isNaN",e,1,1),Number.isNaN(U(...e)))),ve=($e(),(e,t)=>(...e)=>(Object(S.a)("$isFinite",e,1,1),Number.isFinite(U(...e)))),je=(ve(),(e,t)=>(...e)=>(Object(S.a)("$isInteger",e,1,1),Number.isInteger(U(...e)))),_e=(je(),(e,t)=>(...e)=>(Object(S.a)("$toString",e,1,1),String(U(...e)))),Oe=(_e(),(e,t)=>(...e)=>(Object(S.a)("$toNumber",e,1,1),Object(x.l)(U(...e)))),ke=(Oe(),[k.a,Object.__proto__,{}.__proto__,Function.__proto__]),we=(e,t)=>(...e)=>{if(Object(S.a)("$objectAssign",e,1),ke.includes(e[0]))throw new Error("[SX] $objectAssign: Invalid argument: args[0] is blacklisted object.");return Object.assign(e[0],...e.slice(1))},xe=(we(),(e,t)=>(...e)=>(Object(S.a)("$jsonStringify",e,1,1),JSON.stringify(U(...e)))),Ne=(xe(),(e,t)=>(...e)=>{Object(S.a)("$jsonParse",e,1,1);const t=U(...e);if("string"!=typeof t)throw new Error("[SX] $jsonParse: Invalid argument(s): args[0] is not string.");return JSON.parse(t)}),Se=(Ne(),(e,t)=>(...e)=>Date.now()),Te=(Se(),(e,t)=>(...e)=>{Object(S.a)("$datetimeFromIso",e,1,1);const t=U(...e);if("string"!=typeof t)throw new Error("[SX] $datetimeFromIso: Invalid argument(s): args[0] is not string.");if(!/^(?:(?:-[0-9]{6,})|[0-9]{4,})-(?:[0-1][0-9])-(?:[0-3][0-9])(?:T(?:[0-2][0-9])(?:[:](?:[0-6][0-9])(?:[:](?:[0-6][0-9])(?:.[0-9]{1,})?)?)?(?:Z|[-+][0-9]{2}(?:[:]?[0-6][0-9])?)?)?$/.test(t))throw new Error(`[SX] $datetimeFromIso: Invalid datetime (pattern unmatched): ${t}.`);const n=new Date(t).getTime();if(Number.isNaN(n))throw new Error(`[SX] $datetimeFromIso: Invalid datetime: ${t}.`);return n}),Ee=(Te(),(e,t)=>(...e)=>{Object(S.a)("$datetime",e,3,7);let t="";const n=Number(e[0]);t+=n>=0?String(n).padStart(4,"0"):"-"+String(-n).padStart(6,"0"),t+="-"+String(Number(e[1])).padStart(2,"0"),t+="-"+String(Number(e[2])).padStart(2,"0"),e.length>=4&&(t+="T"+String(Number(e[3])).padStart(2,"0"),e.length>=5?t+=":"+String(Number(e[4])).padStart(2,"0"):t+=":00",e.length>=6&&(t+=":"+String(Number(e[5])).padStart(2,"0")),e.length>=7&&(t+="."+String(Number(e[6])).padStart(3,"0").slice(0,3)),t+="Z");const r=new Date(t).getTime();if(Number.isNaN(r))throw new Error(`[SX] $datetime: Invalid datetime: ${t}.`);return r}),Ae=(Ee(),(e,t)=>(...e)=>{Object(S.a)("$datetimeLc",e,3,7);let t="";const n=Number(e[0]);t+=n>=0?String(n).padStart(4,"0"):"-"+String(-n).padStart(6,"0"),t+="-"+String(Number(e[1])).padStart(2,"0"),t+="-"+String(Number(e[2])).padStart(2,"0"),e.length>=4?(t+="T"+String(Number(e[3])).padStart(2,"0"),e.length>=5?t+=":"+String(Number(e[4])).padStart(2,"0"):t+=":00",e.length>=6&&(t+=":"+String(Number(e[5])).padStart(2,"0")),e.length>=7&&(t+="."+String(Number(e[6])).padStart(3,"0").slice(0,3))):t+="T00:00:00.000";const r=new Date(t).getTime();if(Number.isNaN(r))throw new Error(`[SX] $datetimeLc: Invalid datetime: ${t}.`);return r}),Ce=(Ae(),(e,t)=>(...e)=>{Object(S.a)("$datetimeToIsoString",e,1,1);const t=U(...e);if("number"!=typeof t)throw new Error("[SX] $datetimeToIsoString: Invalid argument(s): args[0] is not number.");const n=new Date(t);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToIsoString: Invalid datetime: ${t}.`);return n.toISOString()}),Ue=(Ce(),(e,t)=>(...e)=>{Object(S.a)("$datetimeToComponents",e,1,1);const t=U(...e);if("number"!=typeof t)throw new Error("[SX] $datetimeToComponents: Invalid argument(s): args[0] is not number.");const n=new Date(t);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToComponents: Invalid datetime: ${t}.`);return[n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.getUTCMilliseconds(),0,n.getUTCDay()]}),Ie=(Ue(),(e,t)=>(...e)=>{Object(S.a)("$datetimeToComponentsLc",e,1,1);const t=U(...e);if("number"!=typeof t)throw new Error("[SX] $datetimeToComponentsLc: Invalid argument(s): args[0] is not number.");const n=new Date(t);if(Number.isNaN(n.getTime()))throw new Error(`[SX] $datetimeToComponentsLc: Invalid datetime: ${t}.`);return[n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds(),-n.getTimezoneOffset(),n.getDay()]}),Pe=(Ie(),(e,t)=>(...t)=>{if(Object(S.a)("$match",t,2,3),!e.config.enableRegExpMatchOperators)throw new Error("[SX] $match: Operator is disabled by configuration.");if(2===t.length){return new RegExp(t[0]).exec(t[1])}return new RegExp(t[0],t[1]).exec(t[2])}),Le=(Pe(null),(e,t)=>(...e)=>(console.log(...e),null)),Me=(Le(),(e,t)=>(...e)=>(console.error(...e),null)),De=(Me(),(e,t)=>(...e)=>(console.trace(...e),null)),Ve=(De(),(e,t)=>(...e)=>(console.time(...e),null)),qe=(Ve(),(e,t)=>(...e)=>(console.timeEnd(...e),null)),Xe=(qe(),(e,t)=>(...e)=>(console.timeLog(...e),null)),Fe=(Xe(),[{name:"$car",fn:T},{name:"$cdr",fn:E},{name:"$cons",fn:A},{name:"$first",fn:C},{name:"$second",fn:I},{name:"$last",fn:L},{name:"$progn",fn:L},{name:"$rest",fn:M},{name:"$first-and-second",fn:D},{name:"$atom",fn:q},{name:"$eq",fn:X},{name:"===",fn:X},{name:"$not-eq",fn:F},{name:"!==",fn:F},{name:"$list",fn:R},{name:"$__scope",fn:B},{name:"$__global",fn:(e,t)=>(...t)=>{Object(S.a)("$__globalScope",t,1);const n=U(...t),r=P(...t);let a=null;Object(x.f)(e,Object(x.d)(e).scope,!0);try{if(2<t.length)if(n){a=[];for(const n of t.slice(1))a.push(Object(x.b)(e,n))}else for(const n of t.slice(1))a=Object(x.b)(e,n);else a=Object(x.b)(e,r)}finally{Object(x.m)(e)}return a}},{name:"$__capture",fn:(e,t)=>(...t)=>{Object(S.a)("$__capture",t,1);const n=t[0];if(!Array.isArray(n))throw new Error("[SX] $__lambda: Invalid argument(s): args[0] is not array.");let r=null;const a=Object(x.a)(e,n);Object(x.f)(e,{},!0,a);try{for(const n of t.slice(1))r=Object(x.b)(e,n)}finally{Object(x.m)(e)}return r}},{name:"$__lambda",fn:W},{name:"$__defun",fn:(e,t)=>(...t)=>{Object(S.a)("$__defun",t,3);const n=U(...t),r=W(e)(...t.slice(1));return Object(S.c)("$__defun",e.funcMap,n.symbol),e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,t)=>r}),r}},{name:"$__refun",fn:(e,t)=>(...t)=>{Object(S.a)("$__refun",t,1,1);const n=U(...t);Object(S.c)("$__refun",e.funcMap,n.symbol);const r=e.funcMap.get(n.symbol);if(!r)throw new Error(`[SX] $__refun: function ${n.symbol} is not defined.`);return r.fn(e,n.symbol)}},{name:"$__defmacro",fn:(e,t)=>(...t)=>{Object(S.a)("$__defmacro",t,3);const n=U(...t),r=t[1];if(!Array.isArray(r))throw new Error("[SX] $__defmacro: Invalid argument(s): args[1] is not array.");let a=!1;for(let t=0;t<r.length;t++){const n=r[t];if(t===r.length-1&&e.config.enableSpread&&Array.isArray(n)&&Object(w.b)(n[0],e.config.reservedNames.spread)){if(!Object(w.b)(n[1]))throw new Error(`[SX] $__defmacro: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`);r[t]=n[1],a=!0}else if(!Object(w.b)(n))throw new Error(`[SX] $__defmacro: Invalid formal argument(s): item(s) of args[${t}] is not symbol.`)}const o=t.slice(2),s=Object(x.c)(e),i=t=>(...n)=>B(e,0,s)(!1,!1,[[e.config.reservedNames.self,i],...t.map((r,o)=>[r.symbol,Object(w.c)(e,a&&o===t.length-1?n.slice(o):n[o])])],...o),c={name:n.symbol,fn:(e,t,n)=>e=>i(n)(...e.slice(1)),formalArgs:r,lastIsSpread:a};if(Object(S.c)("$__defmacro",e.macroMap,n.symbol),e.macroMap.has(n.symbol)){let t=e.macroMap.get(n.symbol);if(t.next=c,t&&t.formalArgs)if(t.formalArgs.length<r.length)e.macroMap.set(n.symbol,c),c.next=t;else{let e=t;for(t=t.next;t;){if(t.formalArgs&&t.formalArgs.length<r.length){e.next=c,c.next=t;break}e=t,t=t.next}}}else e.macroMap.set(n.symbol,c);return i}},{name:"$apply",fn:z},{name:"$__call",fn:(e,t)=>(...t)=>{Object(S.a)("$__call",t,2);const{car:n,cdr:r}=V(...t),a=Object(w.b)(r),o=a?a.symbol:Object(x.b)(e,r);return Object(S.c)("$__call",n,o),Function.prototype.apply.call(n[o],n,t.slice(2))}},{name:"$__try",fn:(e,t)=>(...t)=>{Object(S.a)("$__try",t,1,2);let n=[];try{n=Object(x.b)(e,t[0])}catch(r){if(r instanceof O.a)throw r;n=1<t.length?B(e)(!0,!1,[["$error",Object(w.c)(e,r)],["$parent",Object(w.c)(e,Object(x.e)(e))]],t[1]):null}return n}},{name:"$raise",fn:K},{name:"$__if",fn:(e,t)=>(...t)=>{Object(S.a)("$__if",t,2,3);const n=U(...t);let r=[];return r=Q(n)?Object(x.b)(e,t[1]):2<t.length?Object(x.b)(e,t[2]):null,r}},{name:"$__if-null",fn:(e,t)=>(...t)=>{Object(S.a)("$__ifNull",t,2,2);const{car:n,cdr:r}=V(...t);let a=[];return a=ae(n,null)?Object(x.b)(e,r):n,a}},{name:"$__cond",fn:(e,t)=>(...t)=>{Object(S.a)("$__cond",t,1);for(let n=0;n<t.length-1;n+=2){const r=t[n],a=t[n+1];if(Q(Object(x.b)(e,r)))return Object(x.b)(e,a)}return null}},{name:"$__while",fn:(e,t)=>(...t)=>{Object(S.a)("$__while",t,1);const n=U(...t),r=t.slice(1);let a=null;for(;Q(Object(x.b)(e,n));)for(const t of r)a=Object(x.b)(e,t);return a}},{name:"$__do-while",fn:(e,t)=>(...t)=>{Object(S.a)("$__doWhile",t,1);const n=U(...t),r=t.slice(1);let a=null;do{for(const t of r)a=Object(x.b)(e,t)}while(Q(Object(x.b)(e,n)));return a}},{name:"$__until",fn:(e,t)=>(...t)=>{Object(S.a)("$__until",t,1);const n=U(...t),r=t.slice(1);let a=null;for(;ee(Object(x.b)(e,n));)for(const t of r)a=Object(x.b)(e,t);return a}},{name:"$__do-until",fn:(e,t)=>(...t)=>{Object(S.a)("$__doUntil",t,1);const n=U(...t),r=t.slice(1);let a=null;do{for(const t of r)a=Object(x.b)(e,t)}while(ee(Object(x.b)(e,n)));return a}},{name:"$__repeat",fn:(e,t)=>(...t)=>{Object(S.a)("$__repeat",t,2);const n=Object(w.b)(U(...t));if(!n)throw new Error("[SX] $__repeat: Invalid argument(s): item(s) of args[0] is not symbol.");Object(S.c)("$__repeat",{},n.symbol);const r=Object(x.k)(e,n,!1),a=Object(x.l)(P(...t)),o=t.slice(2);let s=null;for(let t=0;t<a;t++){r[n.symbol]=t;for(const t of o)s=Object(x.b)(e,t)}return s}},{name:"$__for",fn:(e,t)=>(...t)=>{Object(S.a)("$__for",t,2);const n=Object(w.b)(U(...t));if(!n)throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[0] is not symbol.");Object(S.c)("$__for",{},n.symbol);const r=Object(x.k)(e,n,!1),a=P(...t);if(!Array.isArray(a))throw new Error("[SX] $__for: Invalid argument(s): item(s) of args[1] is not array.");const o=t.slice(2);let s=null;for(const t of a){r[n.symbol]=t;for(const t of o)s=Object(x.b)(e,t)}return s}},{name:"$pipe",fn:H},{name:"$__get",fn:(e,t)=>(...t)=>{Object(S.a)("$__get",t,1);let n=null,r=Object(w.b)(t[0]);if(!r)switch(typeof t[0]){case"string":case"number":r={symbol:String(t[0])};break;default:n=Object(x.b)(e,t[0])}if(r){const t=Object(x.k)(e,r,!0);if(!t)throw new Error(`[SX] $__get: Invalid argument(s): args[0]: symbol "${r.symbol}" is not defined.`);n=t[r.symbol]}for(let a=1;a<t.length;a++){let o=t[a],s=!0;for(;s;)switch(typeof o){case"function":n=o(n),s=!1;break;case"object":if(Array.isArray(o))o=Object(x.b)(e,o);else if(r=Object(w.b)(o),r)o=r.symbol;else{if(!Object.prototype.hasOwnProperty.call(o,"value"))throw new Error("[SX] $__get: Invalid argument(s): invalid name path.");o=Object(x.b)(e,o)}break;case"number":o<0&&(o=n.length+o);case"string":Object(S.c)("$__get",n,o),n=n[o],s=!1;break;default:throw new Error("[SX] $__get: Invalid argument(s): invalid name path.")}}return n}},{name:"$__let",fn:G},{name:"$__set",fn:(e,t)=>(...t)=>{Object(S.a)("$__set",t,2,2);let n=[];Array.isArray(t[0])?n=t[0]:n.push(t[0]);let r=Object(w.b)(n[0]);if(!r){if("string"!=typeof n[0])throw new Error("[SX] $__set: Invalid argument(s): invalid name.");Object(S.c)("$__set",{},n[0]),r={symbol:n[0]}}let a=Object(x.k)(e,r,!0);if(null===a)throw new Error(`[SX] $__set: Unresolved symbol: ${r.symbol}.`);let o=!1;for(let s=0;s<n.length;s++){let i=n[s],c=!0;const l=s===n.length-1;for(;c;)switch(typeof i){case"function":a=i(a),c=!1;break;case"object":if(Array.isArray(i))i=Object(x.b)(e,i);else if(r=Object(w.b)(i),r)i=r.symbol;else{if(!Object.prototype.hasOwnProperty.call(i,"value"))throw new Error("[SX] $__set: Invalid argument(s): invalid name.");i=Object(x.b)(e,i)}break;case"number":i<0&&(i=a.length+i);case"string":Object(S.c)("$__set",a,i),l?(a[i]=t[1],o=!0):a=a[i],c=!1;break;default:throw new Error("[SX] $__set: Invalid argument(s): invalid name.")}}if(!o)throw new Error("[SX] $__set: Invalid argument(s): last path is not lvalue.");return t[1]}},{name:"$boolean",fn:J},{name:"$not",fn:Z},{name:"$__and",fn:te},{name:"$__or",fn:ne},{name:"==",fn:re},{name:"!=",fn:oe},{name:"<",fn:se},{name:"<=",fn:ie},{name:">",fn:ce},{name:">=",fn:le},{name:"$typeof",fn:ue},{name:"$symbol",fn:me},{name:"$__gensym",fn:(e,t)=>(...t)=>{Object(S.a)("$__gensym",t,0,1);const n={symbol:`$__tempvar__$$ec${e.evalCount++}$$_`+"_$gensym"};if(1===t.length){const r=Object(w.b)(t[0]);if(r)G(e)(r,n);else{if("string"!=typeof t[0])throw new Error("[SX] $__gensym: Invalid argument(s): item(s) of args[0] is not symbol.");G(e)({symbol:t[0]},n)}}return n}},{name:"$is-symbol",fn:pe},{name:"$is-null",fn:fe},{name:"$is-nil",fn:de},{name:"$is-undefined",fn:be},{name:"$is-list",fn:ge},{name:"$is-string",fn:ye},{name:"$is-number",fn:he},{name:"$is-NaN",fn:$e},{name:"$is-finite",fn:ve},{name:"$is-integer",fn:je},{name:"$to-string",fn:_e},{name:"$to-number",fn:Oe},{name:"$__#",fn:(e,t)=>(...t)=>{const n={};for(const r of t){if(!(Array.isArray(r)&&0<r.length))throw new Error("[SX] $__toObject: Invalid argument(s): args[?] is not array.");{const t=Object(w.b)(r[0]),a=t?t.symbol:String(Object(x.b)(e,r[0]));Object(S.c)("$__#",n,a),1===r.length?n[a]=!0:2===r.length?n[a]=Object(x.b)(e,r[1]):n[a]=Object(x.b)(e,[{symbol:e.config.reservedNames.list}].concat(r.slice(1)))}}return n}},{name:"$object-assign",fn:we},{name:"$json-stringify",fn:xe},{name:"$now",fn:Se},{name:"$datetime-from-iso",fn:Te},{name:"$datetime",fn:Ee},{name:"$datetime-lc",fn:Ae},{name:"$datetime-to-iso-string",fn:Ce},{name:"$datetime-to-components",fn:Ue},{name:"$datetime-to-components-lc",fn:Ie},{name:"$json-parse",fn:Ne},{name:"$match",fn:Pe},{name:"$console-log",fn:Le},{name:"$console-error",fn:Me},{name:"$console-trace",fn:De},{name:"$console-time",fn:Ve},{name:"$console-time-end",fn:qe},{name:"$console-time-log",fn:Xe}]),Re=[{name:"$$__lambda",fn:Y},{name:"$$__defun",fn:(e,t)=>(...t)=>{Object(S.a)("$$__defun",t,3);const n=U(...t),r=Y(e)(...t.slice(1));return Object(S.c)("$$__defun",e.funcMap,n.symbol),e.funcMap.set(n.symbol,{name:n.symbol,fn:(e,t)=>r}),r}}];[].concat(Fe,Re);const Be=[{name:"$scope",fn:(e,t)=>t=>[{symbol:"$__scope"},t[1],t[2],...t.slice(3).map(t=>Object(w.c)(e,t))]},{name:"$local",fn:(e,t)=>t=>[{symbol:"$__scope"},!0,!1,...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$global",fn:(e,t)=>t=>[{symbol:"$__global"},!1,...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$clisp-let",fn:(e,t)=>t=>[{symbol:"$__scope"},!0,!1,...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$capture",fn:(e,t)=>t=>[{symbol:"$__capture"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$closure",fn:(e,t)=>t=>{if(!Object(w.b)(t[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},Object(w.c)(e,t[3]),Object(w.c)(e,[{symbol:"$__lambda"},Object(w.c)(e,t[1]),...t.slice(4).map(t=>Object(w.c)(e,t))])]}},{name:"|->",fn:(e,t)=>e=>[{symbol:"$closure"},...e.slice(1)]},{name:"$lambda",fn:(e,t)=>t=>[{symbol:"$__lambda"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"->",fn:(e,t)=>t=>[{symbol:"$__lambda"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$defun",fn:(e,t)=>t=>[{symbol:"$__defun"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$refun",fn:(e,t)=>t=>[{symbol:"$__refun"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"<-",fn:(e,t)=>t=>[{symbol:"$__refun"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$defmacro",fn:(e,t)=>t=>[{symbol:"$__defmacro"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$call",fn:(e,t)=>t=>(Object(S.a)("$call",t,3),[{symbol:"$__call"},t[1],Object(w.c)(e,t[2]),...t.slice(3)])},{name:"$try",fn:(e,t)=>t=>[{symbol:"$__try"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$if",fn:(e,t)=>t=>[{symbol:"$__if"},t[1],...t.slice(2).map(t=>Object(w.c)(e,t))]},{name:"$if-null",fn:(e,t)=>t=>[{symbol:"$__if-null"},t[1],...t.slice(2).map(t=>Object(w.c)(e,t))]},{name:"??",fn:(e,t)=>t=>[{symbol:"$__if-null"},t[1],...t.slice(2).map(t=>Object(w.c)(e,t))]},{name:"$cond",fn:(e,t)=>t=>[{symbol:"$__cond"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$while",fn:(e,t)=>t=>[{symbol:"$__while"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$do-while",fn:(e,t)=>t=>[{symbol:"$__do-while"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$until",fn:(e,t)=>t=>[{symbol:"$__until"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$do-until",fn:(e,t)=>t=>[{symbol:"$__do-until"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$repeat",fn:(e,t)=>t=>{if(!Object(w.b)(t[2],"of"))throw new Error("[SX] $repeat: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__repeat"},Object(w.c)(e,t[1]),t[3],...t.slice(4).map(t=>Object(w.c)(e,t))]}},{name:"$for",fn:(e,t)=>t=>{if(!Object(w.b)(t[2],"of"))throw new Error("[SX] $for: Invalid syntax: missing 'of' keyword.");return[{symbol:"$__for"},Object(w.c)(e,t[1]),t[3],...t.slice(4).map(t=>Object(w.c)(e,t))]}},{name:"$get",fn:(e,t)=>t=>[{symbol:"$__get"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$let",fn:(e,t)=>t=>(Object(S.a)("$let",t,3,3),[{symbol:"$__let"},Object(w.c)(e,t[1]),t[2]])},{name:"$clisp-defvar",fn:(e,t)=>t=>(Object(S.a)("$clisp-defvar",t,3,3),[{symbol:"$global"},[{symbol:"$__let"},Object(w.c)(e,t[1]),t[2]]])},{name:"$set",fn:(e,t)=>t=>(Object(S.a)("$set",t,3,3),[{symbol:"$__set"},Object(w.c)(e,t[1]),t[2]])},{name:"$clisp-setq",fn:(e,t)=>t=>(Object(S.a)("$clisp-setq",t,3,3),[{symbol:"$__set"},Object(w.c)(e,t[1]),t[2]])},{name:"$and",fn:(e,t)=>t=>[{symbol:"$__and"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$or",fn:(e,t)=>t=>[{symbol:"$__or"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$gensym",fn:(e,t)=>t=>[{symbol:"$__gensym"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"#",fn:(e,t)=>t=>[{symbol:"$__#"},...t.slice(1).map(t=>Object(w.c)(e,t))]}],We=[{name:"$$closure",fn:(e,t)=>t=>{if(!Object(w.b)(t[2],"use"))throw new Error("[SX] $closure: Invalid syntax: missing 'use' keyword.");return[{symbol:"$__capture"},Object(w.c)(e,t[3]),Object(w.c)(e,[{symbol:"$$__lambda"},Object(w.c)(e,t[1]),...t.slice(4).map(t=>Object(w.c)(e,t))])]}},{name:"|=>",fn:(e,t)=>e=>[{symbol:"$$closure"},...e.slice(1)]},{name:"$$lambda",fn:(e,t)=>t=>[{symbol:"$$__lambda"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"=>",fn:(e,t)=>t=>[{symbol:"$$__lambda"},...t.slice(1).map(t=>Object(w.c)(e,t))]},{name:"$$defun",fn:(e,t)=>t=>[{symbol:"$$__defun"},...t.slice(1).map(t=>Object(w.c)(e,t))]}];[].concat(Be,We);var Ye=[{name:"nil",fn:(e,t)=>[]},{name:"null",fn:(e,t)=>null},{name:"undefined",fn:(e,t)=>{}},{name:"true",fn:(e,t)=>!0},{name:"#true",fn:(e,t)=>!0},{name:"#t",fn:(e,t)=>!0},{name:"false",fn:(e,t)=>!1},{name:"#false",fn:(e,t)=>!1},{name:"#f",fn:(e,t)=>!1},{name:"#Number:Infinity",fn:(e,t)=>Number.POSITIVE_INFINITY},{name:"+Infinity",fn:(e,t)=>Number.POSITIVE_INFINITY},{name:"-Infinity",fn:(e,t)=>Number.NEGATIVE_INFINITY},{name:"#Number:Epsilon",fn:(e,t)=>Number.EPSILON},{name:"#Number:MaxValue",fn:(e,t)=>Number.MAX_VALUE},{name:"#Number:MinValue",fn:(e,t)=>Number.MIN_VALUE},{name:"#Number:MinSafeInteger",fn:(e,t)=>Number.MAX_SAFE_INTEGER},{name:"#Number:MinSafeInteger",fn:(e,t)=>Number.MIN_SAFE_INTEGER},{name:"NaN",fn:(e,t)=>Number.NaN}];function ze(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"eof")}function Ke(e){return"string"==typeof e&&0===e.trim().length}function He(e){return"string"==typeof e&&/^[0-9\+\-]$/.test(e)}function Ge(e){return"string"==typeof e&&/^[0-9]$/.test(e)}function Je(e){return"string"==typeof e&&!Ke(e)&&!He(e)}function Qe(e){return`line: ${e.line} / strings: ${e.index} / pos: ${e.pos} :${e.strings.length>e.index?e.strings[e.index].slice(e.pos,e.pos+20):""}`}function Ze(e,t,n){if(e.strings.length<=e.index)return{eof:!0};if(e.strings[e.index].length<=e.pos){if(!e.values||e.values.length<=e.index)return e.pos=0,e.index++,Ze(e);{const t={value:e.values[e.index]};return e.pos=0,e.index++,t}}if(t)for(const n of t){const t=e.strings[e.index].slice(e.pos,e.pos+n.length);if(t===n)return e.pos+=n.length,e.line+=t.split("\n").length-1,{eof:!1,eofSeq:n}}{let t=e.strings[e.index].slice(e.pos,e.pos+1);if(e.pos++,"\n"===t&&e.line++,!n&&"\\"===t){if(e.strings[e.index].length<=e.pos)throw new Error(`[SX] getChar: Invalid syntax at: ${Qe(e)}.`);switch(t=e.strings[e.index].slice(e.pos,e.pos+1),e.pos++,t){case"b":t="\b";break;case"t":t="\t";break;case"n":t="\n";break;case"v":t="\v";break;case"f":t="\f";break;case"r":t="\r";break;case"U":case"u":if("{"===e.strings[e.index].slice(e.pos,e.pos+1)){let n="";for(let t=0;t<6;t++){const r=e.strings[e.index].slice(e.pos+t,e.pos+1+t);if("}"===r){if(0===t)throw new Error(`[SX] getChar: Invalid syntax at: ${Qe(e)}.`);e.pos+=t;break}if(!/^[0-9A-Fa-f]{1}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${Qe(e)}.`);n+=r}if("}"!==e.strings[e.index].slice(e.pos,e.pos+1))throw new Error(`[SX] getChar: Invalid syntax at: ${Qe(e)}.`);e.pos++,t=String.fromCodePoint(Number.parseInt(n,16))}else{const n=e.strings[e.index].slice(e.pos,e.pos+4);if(!/^[0-9A-Fa-f]{4}$/.test(n))throw new Error(`[SX] getChar: Invalid syntax at: ${Qe(e)}.`);e.pos+=4,t=String.fromCodePoint(Number.parseInt(n,16))}}}return t}}function et(e,t,n,r){const a=e.index,o=e.pos,s=e.line,i=[];try{for(let a=0;a<t;a++)i.push(Ze(e,n,r))}finally{e.index=a,e.pos=o,e.line=s}return i}function tt(e,t,n){const r=e.index,a=e.pos,o=e.line;let s;try{s=Ze(e,t,n)}finally{e.index=r,e.pos=a,e.line=o}return s}function nt(e){let t=tt(e);for(;!ze(t)&&Ke(t);)Ze(e),t=tt(e)}function rt(e,t){let n="",r=tt(e,t);for(;!ze(r)&&"string"==typeof r;){if(/^0[XxOoBb][0-9]*$/.test(n+r))Ze(e,t),n+=r;else{if(!/^[0-9\+\-\.EeInfinityNaN]+$/.test(n+r))break;Ze(e,t),n+=r}r=tt(e,t)}if(!/^([\+\-]?\d*\.?\d+(?:[Ee][\+\-]?\d+)?)|(0[XxOoBb][0-9]+)|([\+\-]Infinity)|(NaN)$/.test(n))throw new Error(`[SX] parseNumber: Invalid syntax at: ${Qe(e)}.`);return Number(n)}function at(e,t){let n="",r=tt(e,t);for(;!ze(r);){if("string"==typeof r){if(Ke(r))break;if("#"===r&&"|"===et(e,2,t)[1])break;if(!/^[^.;()"]+$/.test(n+r))break;Ze(e,t),n+=r}else{if("object"!=typeof r||!Object.prototype.hasOwnProperty.call(r,"value"))throw new Error(`[SX] parseSymbol: Invalid syntax at: ${Qe(e)}.`);Ze(e,t);r.value;n+=String(r)}r=tt(e,t)}if(e.config.enableShorthands){let t=null;if(t=n.match(/^:((?:\:[^=:]+?)+?)=$/)){const n=t[1].slice(1).split(":");return[{symbol:e.config.reservedNames.splice},[{symbol:e.config.reservedNames.set},n]]}if(t=n.match(/^:((?:\:[^@:]+?)+?)@([^@:]+?)$/)){const n=t[1].slice(1).split(":");return[{symbol:e.config.reservedNames.splice},[{symbol:e.config.reservedNames.call},[{symbol:e.config.reservedNames.get},...n],{symbol:t[2]}]]}if(t=n.match(/^:((?:\:[^:]+?)+?)$/)){const n=t[1].slice(1).split(":");return[{symbol:e.config.reservedNames.get},...n]}}return{symbol:n}}function ot(e,t,n,r,a,o){const s=n?[...t,n]:t,i=[],c=[];for(;;){let t="",l=tt(e,s,a);for(;!ze(l);){if("string"==typeof l)Ze(e,s,a),t+=l;else{if("object"!=typeof l||!Object.prototype.hasOwnProperty.call(l,"value"))throw new Error(`[SX] parseStringOrComment: Invalid syntax at: ${Qe(e)}.`);Ze(e,s,a);l.value;t+=String(l)}l=tt(e,s,a)}if(Ze(e,s,a),!0===l.eof&&!o)throw new O.c("parseStringOrComment");if(i.push(t),l.eofSeq!==n)break;c.push(mt(e,r,[]))}return{strings:i,values:c}}function st(e,t){return ot(e,['"'],null,")",t,!1).strings[0]}function it(e,t,n){const r=[t];n&&r.push(n);const a=ot(e,['"""'],"%%%(",")",!1,!1);for(let e=0;e<a.strings.length;e++)r.push(a.strings[e]),e<a.values.length&&r.push(a.values[e]);return r}function ct(e){return{comment:ot(e,["\r","\n"],null,")",!1,!0).strings[0]}}function lt(e){return{comment:ot(e,["|#"],null,")",!1,!1).strings[0]}}function ut(e){nt(e);let t=tt(e);for(;!ze(t);){switch(t){case")":throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Qe(e)}.`);case"(":return Ze(e),mt(e,")",[]);case"'":case"`":case",":{Ze(e);const n=tt(e);let r=!1;","===t&&"@"===n&&(Ze(e),r=!0),nt(e);const a=("'"===t?w.c:"`"===t?w.a:w.f)(e,ut(e));return r?Object(w.d)(e,a):a}case".":{Ze(e);const t=et(e,2);return e.config.enableSpread&&"."===t[0]&&"."===t[1]?(Ze(e),Ze(e),nt(e),Object(w.e)(e,ut(e))):(nt(e),{dotted:ut(e)})}case";":return Ze(e),ct(e);case"#":return"|"===et(e,2)[1]?(Ze(e),Ze(e),lt(e)):at(e);case'"':{Ze(e);const t=et(e,4);if(e.config.enableHereDoc&&'"'===t[0]&&'"'===t[1]){let n=!0;ze(t[2])||Ke(t[2])||(He(t[2])?"+"!==t[2]&&"-"!==t[2]||Ge(t[3])||(n=!1):Je(t[2])&&(n=!1)),Ze(e),Ze(e);let r=null,a=null;if(n)r={symbol:e.config.reservedNames.Template};else{if(r=at(e,["@"]),null===r)throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Qe(e)}.`);if("number"==typeof r)throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Qe(e)}.`);const t=et(e,2);if("@"===t[0]){if("{"!==t[1])throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Qe(e)}.`);Ze(e),Ze(e);const n=mt(e,"}",[{symbol:"@"}]);Array.isArray(n)&&(a=n)}}return it(e,r,a)}return st(e,!1)}case"@":if(e.config.enableVerbatimStringLiteral){if('"'===et(e,2)[1])return Ze(e),Ze(e),st(e,!0)}default:if("string"!=typeof t){if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"value"))return Ze(e),e.config.wrapExternalValue?t:t.value;throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Qe(e)}.`)}if(Ke(t))break;if(He(t)){if("+"===t||"-"===t){if(!Ge(et(e,2)[1]))return at(e)}return rt(e)}if(Je(t))return at(e);throw new Error(`[SX] parseOneToken: Invalid syntax at: ${Qe(e)}.`)}nt(e),t=tt(e)}throw new O.c("parseOneToken")}function mt(e,t,n){const r=n.slice(0);let a=!1;nt(e);let o=tt(e);for(;!ze(o);){switch(o){case t:return Ze(e),a?r[0]:r;default:{const t=ut(e);if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"dotted")){if(1!==r.length)throw new Error(`[SX] parseList: Invalid syntax at: ${Qe(e)}.`);a=!0,Array.isArray(t)?(t.unshift(r.pop()),r.push(t)):r.push({car:r.pop(),cdr:t.dotted})}else if("object"==typeof t&&Object.prototype.hasOwnProperty.call(t,"comment"))e.config.stripComments||r.push(t);else{if(a)throw new Error(`[SX] parseList: Invalid syntax at: ${Qe(e)}.`);r.push(t)}}}nt(e),o=tt(e)}throw new O.c("parseList")}function pt(e){const t=[];nt(e);let n=tt(e);for(;!ze(n);){switch(n){case"(":Ze(e),t.push(mt(e,")",[]));break;case"'":case"`":for(Ze(e),nt(e);;){const r=ut(e);if("object"!=typeof r||!Object.prototype.hasOwnProperty.call(r,"comment")){t.push(("'"===n?w.c:w.a)(e,r));break}e.config.stripComments||t.push(r)}break;case";":Ze(e),e.config.stripComments?ct(e):t.push(ct(e));break;case"#":"|"===et(e,2)[1]?(Ze(e),Ze(e),e.config.stripComments?lt(e):t.push(lt(e))):(Ze(e),e.config.stripComments?ct(e):t.push(ct(e)));break;case'"':{const n=et(e,3);if('"'===n[1]&&'"'===n[2]){t.push(ut(e));break}}default:throw new Error(`[SX] parseInitialState: Invalid syntax at: ${Qe(e)}.`)}nt(e),n=tt(e)}return t}const ft={raiseOnUnresolvedSymbol:!1,enableEvaluate:!0,enableHereDoc:!0,enableSpread:!0,enableSplice:!0,enableShorthands:!0,enableVerbatimStringLiteral:!0,enableTailCallOptimization:!0,enableRegExpMatchOperators:!0,enableCompilationOperators:!0,stripComments:!1,wrapExternalValue:!0,returnMultipleRoot:!1,maxEvalCount:0,reservedNames:{eval:"$eval",quote:"$quote",backquote:"$backquote",unquote:"$unquote",spread:"$spread",splice:"$splice",car:"$car",cdr:"$cdr",cons:"$cons",atom:"$atom",eq:"$eq",list:"$list",let:"$clisp-let",lambda:"$lambda",self:"$self",defun:"$defun",thiz:"$this",if:"$if",cond:"$cond",while:"$while",doWhile:"$do-while",until:"$until",doUntil:"$do-until",get:"$get",defvar:"$clisp-defvar",setq:"$clisp-setq",set:"$set",call:"$call",not:"$not",and:"$and",or:"$or",isSymbol:"$is-symbol",gensym:"$gensym",raise:"$raise",catch:"$catch",Template:"Template"},symbols:[],macros:[],funcs:[]};function dt(e,t,n,r){return{strings:"string"==typeof n?[n]:n,values:r||[],index:0,pos:0,line:0,evalCount:0,scopes:[{isBlockLocal:!1,scope:t}],macroMap:new Map(e.macros.map(e=>[e.name,e])),funcMap:new Map(e.funcs.map(e=>[e.name,e])),symbolMap:new Map(e.symbols.map(e=>[e.name,e])),config:e}}function bt(e,t,n){return e.strings="string"==typeof t?[t]:t,e.values=n||[],e.index=0,e.pos=0,e.line=0,e.evalCount=0,e}var gt=n(5),yt=n(9),ht=n(1);const $t=function(e){const t=(n=e.rawToToken,e=>t=>t.src.slice(t.start,t.end).startsWith(e)?{succeeded:!0,next:{src:t.src,start:t.start+e.length,end:t.end,context:t.context},tokens:[n(e)]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:`operator "charSequence(${e})"`});var n;const r=function(e){return(...t)=>n=>{const r=n.src.slice(n.start,n.end);let a=-1;return t.some((e,t)=>{if(r.startsWith(e))return a=t,!0})?{succeeded:!0,next:{src:n.src,start:n.start+t[a].length,end:n.end,context:n.context},tokens:[e(t[a])]}:{succeeded:!1,error:!1,src:n.src,pos:n.start,message:`operator "charClass(${t.join(",")})"`}}}(e.rawToToken),a=function(e){return(...t)=>n=>{const r=n.src.slice(n.start,n.end);for(const e of t){if(r.startsWith(e))return{succeeded:!1,error:!1,src:n.src,pos:n.start,message:`operator "charClassNot(${t.join(",")})"`}}const a=n.src.codePointAt(n.start);if(void 0===a)return{succeeded:!1,error:!1,src:n.src,pos:n.start,message:`operator "charClassNot(${t.join(",")})"`};const o=String.fromCodePoint(a);return{succeeded:!0,next:{src:n.src,start:n.start+o.length,end:n.end,context:n.context},tokens:[e(o)]}}}(e.rawToToken),o=function(e){return t=>n=>{const r=n.src.slice(n.start,n.end),a=t(r);return a>=0?{succeeded:!0,next:{src:n.src,start:n.start+a,end:n.end,context:n.context},tokens:[e(r.substring(0,a))]}:{succeeded:!1,error:!1,src:n.src,pos:n.start,message:'operator "charClassByNeedleFn"'}}}(e.rawToToken),s=b(e.concatTokens),i=p(1,1),v=p(),j=(e,t)=>p(e,t),_=b(),O=b(e=>[]),k=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="Z"||"a"<=n&&n<="z"?n.length:-1}),w=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="Z"?n.length:-1}),x=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"a"<=n&&n<="z"?n.length:-1}),N=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"0"<=n&&n<="9"?n.length:-1}),S=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"1"<=n&&n<="9"?n.length:-1}),T=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"0"<=n&&n<="1"?n.length:-1}),E=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"0"<=n&&n<="7"?n.length:-1}),A=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="F"||"a"<=n&&n<="f"||"0"<=n&&n<="9"?n.length:-1}),C=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return"A"<=n&&n<="Z"||"a"<=n&&n<="z"||"0"<=n&&n<="9"?n.length:-1}),U=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return" \f\n\r\t\v\u2028\u2029\ufeff".includes(n)?n.length:-1}),I=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return" \f\t\v\u2028\u2029\ufeff".includes(n)?n.length:-1}),P=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return 0<=t&&t<=31||127<=t&&t<=159?n.length:-1}),L=o(e=>{const t=e.codePointAt(0);if(void 0===t)return-1;const n=String.fromCodePoint(t);return" \f\n\r\t\v\u2028\u2029\ufeff".includes(n)||0<=t&&t<=31||127<=t&&t<=159?-1:n.length}),M=r("\r\n","\n","\r"),D=o(e=>{const t=e.codePointAt(0);return void 0===t?-1:String.fromCodePoint(t).length}),V=f(T,r("_")),q=f(E,r("_")),X=f(A,r("_")),F=_(s(j(0,1)(r("+","-")),f(_(i(S),v(f(N,r("_")))),t("0")))),R=_(s(F,O(t("n")))),B=_(s(j(0,1)(r("+","-")),f(_(i(S),v(f(N,r("_")))),t("0")),j(0,1)(_(t("."),j(1)(f(N,r("_"))))),j(0,1)(_(r("E","e"),j(0,1)(r("+","-")),f(_(i(S),v(N)),t("0"))))));return{seq:t,cls:r,notCls:a,clsFn:o,classes:{alpha:k,upper:w,lower:x,num:N,nonzero:S,bin:T,oct:E,hex:A,alnum:C,space:U,spaceWithinSingleLine:I,ctrl:P,newline:M,word:L,any:D},numbers:{bin:(...e)=>_(O(f(...e)),s(i(T),v(V))),oct:(...e)=>_(O(f(...e)),s(i(E),v(q))),hex:(...e)=>_(O(f(...e)),s(i(A),v(X))),int:F,bigint:R,float:B},cat:s,once:i,repeat:v,qty:j,zeroWidth:e=>c(e),err:e=>l(e),beginning:e=>u(e),end:e=>m(e),first:(...e)=>f(...e),or:(...e)=>d(...e),combine:_,erase:O,trans:e=>b(e),ahead:(...e)=>g(...e),behind:(e,t)=>y(e,t),rules:e=>h(e),makeProgram:$}}({rawToToken:e=>e,concatTokens:e=>e.length?[e.reduce((e,t)=>String(e)+t)]:[]}),vt=function(e){const t=(n=e.rawToToken,e.comparator,e=>t=>Math.max(0,t.end-t.start)>0&&e(t.src[t.start])?{succeeded:!0,next:{src:t.src,start:t.start+1,end:t.end,context:t.context},tokens:[n(t.src[t.start])]}:{succeeded:!1,error:!1,src:t.src,pos:t.start,message:'operator "objClassByNeedleFn"'});var n;const r=t(e=>!0);return{seq:v(e.rawToToken,e.comparator),cls:j(e.rawToToken,e.comparator),notCls:_(e.rawToToken,e.comparator),clsFn:t,classes:{any:r},cat:b(e.concatTokens),once:p(1,1),repeat:p(),qty:(e,t)=>p(e,t),zeroWidth:e=>c(e),err:e=>l(e),beginning:e=>u(e),end:e=>m(e),first:(...e)=>f(...e),or:(...e)=>d(...e),combine:b(),erase:b(e=>[]),trans:e=>b(e),ahead:(...e)=>g(...e),behind:(e,t)=>y(e,t),rules:e=>h(e),makeProgram:$}}({rawToToken:e=>e,concatTokens:e=>e.length?[e.reduce((e,t)=>String(e)+t)]:[],comparator:(e,t)=>e===t}),{seq:jt,cls:_t,notCls:Ot,clsFn:kt,classes:wt,numbers:xt,cat:Nt,once:St,repeat:Tt,qty:Et,zeroWidth:At,err:Ct,beginning:Ut,end:It,first:Pt,or:Lt,combine:Mt,erase:Dt,trans:Vt,ahead:qt,rules:Xt,makeProgram:Ft}=$t,Rt=Vt(e=>[[{symbol:"directive"},...e]])(Dt(Et(2)(_t("/"))),Dt(Tt(wt.space)),Nt(jt("@tynder-"),Tt(Pt(wt.alnum,_t("-")))),Dt(Tt(wt.space)),Nt(Tt(Ot("\r\n","\n","\r"))),Dt(Pt(wt.newline,qt(It())))),Bt=Vt(e=>[[{symbol:"directive"},...e]])(Dt(jt("/*")),Dt(Tt(wt.space)),Nt(jt("@tynder-"),Tt(Pt(wt.alnum,_t("-")))),Dt(Tt(wt.space)),Nt(Tt(Ot("*/"))),Dt(jt("*/"))),Wt=Mt(Dt(Et(2)(_t("/"))),Pt(Mt(qt(Tt(wt.space),Ot("@tynder-")),Tt(Ot("\r\n","\n","\r")),Pt(wt.newline,qt(It()))),Pt(wt.newline,qt(It())))),Yt=Mt(jt("#"),Tt(Ot("\r\n","\n","\r")),Pt(wt.newline,qt(It()))),zt=Mt(jt("/**"),Tt(wt.space),e=>{const t=Nt(Tt(Ot("*/")))(e);if(t.succeeded){const e=Object.assign({},t.next.context);e.docComment=(t.tokens[0]||"").trim(),t.next.context=e}return t},jt("*/")),Kt=Mt(jt("/*"),qt(Tt(wt.space),Ot("@tynder-")),Tt(Ot("*/")),jt("*/")),Ht=Pt(wt.space,Wt,Yt,zt,Kt),Gt=Vt(e=>[!0])(jt("true")),Jt=Vt(e=>[!1])(jt("false")),Qt=Vt(e=>[null])(jt("null")),Zt=Vt(e=>[void 0])(jt("undefined")),en=Vt(e=>[Number.POSITIVE_INFINITY])(Et(0,1)(jt("+")),jt("Infinity")),tn=Vt(e=>[Number.NEGATIVE_INFINITY])(jt("-Infinity")),nn=Vt(e=>[Number.NaN])(jt("NaN")),rn=Vt(e=>[Number.parseInt(e[0].replace(/_/g,""),2)])(xt.bin(jt("0b"))),an=Vt(e=>[Number.parseInt(e[0].replace(/_/g,""),8)])(xt.oct(jt("0o"),jt("0"))),on=Vt(e=>[Number.parseInt(e[0].replace(/_/g,""),16)])(xt.hex(jt("0x"),jt("0X"))),sn=Vt(e=>[Number.parseInt(e[0].replace(/_/g,""),10)])(xt.int),cn=Vt(e=>[BigInt(e[0].replace(/_/g,""))])(xt.bigint),ln=Vt(e=>[Number.parseFloat(e[0].replace(/_/g,""))])(xt.float),un=Pt(an,on,rn,cn,ln,sn,en,tn,nn),mn=Pt(Vt(e=>["'"])(jt("\\'")),Vt(e=>['"'])(jt('\\"')),Vt(e=>["`"])(jt("\\`")),Vt(e=>["/"])(jt("\\/")),Vt(e=>["\\"])(jt("\\\\")),Vt(e=>[""])(jt("\\\r\n")),Vt(e=>[""])(jt("\\\r")),Vt(e=>[""])(jt("\\\n")),Vt(e=>["\n"])(jt("\\n")),Vt(e=>["\r"])(jt("\\r")),Vt(e=>["\v"])(jt("\\v")),Vt(e=>["\t"])(jt("\\t")),Vt(e=>["\b"])(jt("\\b")),Vt(e=>["\f"])(jt("\\f")),Vt(e=>[String.fromCodePoint(Number.parseInt(e[0],16))])(Nt(Dt(jt("\\u")),Et(4,4)(wt.hex))),Vt(e=>[String.fromCodePoint(Number.parseInt(e[0],16))])(Nt(Dt(jt("\\u{")),Et(1,6)(wt.hex),Dt(jt("}")))),Vt(e=>[String.fromCodePoint(Number.parseInt(e[0],16))])(Nt(Dt(jt("\\x")),Et(2,2)(wt.hex))),Vt(e=>[String.fromCodePoint(Number.parseInt(e[0],8))])(Nt(Dt(jt("\\")),Et(3,3)(wt.oct)))),pn=Vt(e=>[e[0]])(Dt(jt("'")),Nt(Tt(Pt(mn,Mt(_t("\r","\n"),Ct("Line breaks within strings are not allowed.")),Ot("'")))),Dt(jt("'"))),fn=Vt(e=>[e[0]])(Dt(jt('"')),Nt(Tt(Pt(mn,Mt(_t("\r","\n"),Ct("Line breaks within strings are not allowed.")),Ot('"')))),Dt(jt('"'))),dn=Vt(e=>[e[0]])(Dt(jt("`")),Nt(Tt(Pt(mn,Ot("`")))),Dt(jt("`"))),bn=Pt(pn,fn,dn),gn=Vt(e=>[{value:e[1]?new RegExp(e[0],e[1]):new RegExp(e[0])}])(Dt(jt("/")),Nt(Tt(Pt(mn,Ot("/")))),Dt(jt("/")),Nt(Et(0)(_t("g","i","m","s","u","y")))),yn=Vt(e=>e)(Nt(Mt(Pt(wt.alpha,_t("$","_")),Tt(Pt(wt.alnum,_t("$","_")))))),hn=Vt(e=>[{symbol:e[0]}])(Nt(Mt(jt("@"),Pt(wt.alpha,_t("$","_")),Tt(Pt(wt.alnum,_t("$","_")))))),$n=Pt(Gt,Jt,Qt,Zt,un,bn),vn=Pt(bn,yn),jn=Pt(Vt(e=>[[]])(Dt(jt("["),Tt(Ht),jt("]"))),Vt(e=>{const t=[{symbol:"$list"}];for(const n of e)t.push(n);return[t]})(Dt(jt("[")),Mt(Dt(Tt(Ht)),Pt(e=>jn(e),e=>On(e),$n),Dt(Tt(Ht))),Tt(Mt(Dt(Tt(Ht),jt(","),Tt(Ht)),Pt(e=>jn(e),e=>On(e),$n),Dt(Tt(Ht)))),Et(0,1)(Dt(jt(","),Tt(Ht))),Pt(qt(jt("]")),Ct("listValue: Unexpected token has appeared.")),Dt(jt("]")))),_n=Mt(vn,Dt(Tt(Ht),Pt(jt(":"),Ct('":" is needed.')),Tt(Ht)),Pt(e=>jn(e),e=>On(e),$n,Ct("object value is needed."))),On=Pt(Vt(e=>[[{symbol:"#"}]])(Dt(jt("{"),Tt(Ht),jt("}"))),Vt(e=>{const t=[{symbol:"#"}];for(let n=0;n<e.length;n+=2){if(Object(ht.g)(ht.f,e[n]))throw new Error("Unsafe symbol name is appeared in object literal: "+e[n]);t.push([e[n],e[n+1]])}return[t]})(Dt(jt("{")),Mt(Dt(Tt(Ht)),_n,Dt(Tt(Ht))),Tt(Mt(Dt(jt(","),Tt(Ht)),_n,Dt(Tt(Ht)))),Et(0,1)(Dt(jt(","),Tt(Ht))),Pt(qt(jt("}")),Ct("objectValue: Unexpected token has appeared.")),Dt(jt("}")))),kn=Pt($n,jn,On),wn=Vt(e=>[[{symbol:"primitiveValue"},e[0]]])(Pt(Gt,Jt,un,bn)),xn=Vt(e=>[[{symbol:"primitive"},e[0]]])(Pt(jt("number?"),jt("integer?"),jt("bigint?"),jt("string?"),jt("boolean?"),jt("number"),jt("integer"),jt("bigint"),jt("string"),jt("boolean"))),Nn=Pt(jt("number"),jt("string")),Sn=Vt(e=>[[{symbol:"primitive"},e[0]]])(Pt(jt("null"),jt("undefined"),jt("any"),jt("unknown"),jt("never"))),Tn=Pt(xn,Sn,Vt(e=>[[{symbol:"ref"},...e]])(qt(Ot("Array","Partial","Pick","Omit")),Mt(yn,Tt(Mt(Dt(Tt(Ht),jt("."),Tt(Ht)),yn))))),En=Vt(e=>[[{symbol:"sequenceOf"},...e]])(Mt(Dt(jt("[")),Mt(Dt(Tt(Ht)),e=>zn(Pt(jt(","),jt("]")))(e),Dt(Tt(Ht))),Tt(Mt(Dt(jt(","),Tt(Ht)),e=>zn(Pt(jt(","),jt("]")))(e),Dt(Tt(Ht)))),Et(0,1)(Dt(jt(","),Tt(Ht))),Pt(qt(jt("]")),Ct("sequenceType: Unexpected token has appeared.")),Dt(jt("]")))),An=Pt(Vt(e=>[[{symbol:"#"},["max",e[0]]]])(Dt(jt("..")),Dt(Tt(Ht)),sn),Vt(e=>[[{symbol:"#"},["min",e[0]],["max",e[1]]]])(sn,Dt(Tt(Ht)),Dt(jt("..")),Dt(Tt(Ht)),sn),Vt(e=>[[{symbol:"#"},["min",e[0]]]])(sn,Dt(Tt(Ht)),Dt(jt(".."))),Vt(e=>[[{symbol:"#"},["min",e[0]],["max",e[0]]]])(sn)),Cn=Vt(e=>e.length>0?e:[[{symbol:"#"}]])(Dt(jt("[")),Dt(Tt(Ht)),Et(0,1)(An),Dt(Tt(Ht)),Dt(jt("]"))),Un=Vt(e=>[[{symbol:"repeated"},e[0],e[1]]])(Dt(jt("Array")),Dt(Tt(Ht)),Dt(jt("<")),Dt(Tt(Ht)),Pt(e=>Yn(Pt(jt(","),jt(">")))(e),Ct("type is expected in Array type.")),Dt(Tt(Ht)),Et(0,1)(Mt(Dt(jt(",")),Dt(Tt(Ht)),Pt(An,Ct("complexArrayType: Unexpected token has appeared. Expect array size.")),Dt(Tt(Ht)))),Pt(qt(jt(">")),Ct("'>' is expected in Array type.")),Dt(jt(">"))),In=Vt(e=>[[{symbol:"partial"},e[0],e[1]]])(Dt(jt("Partial")),Dt(Tt(Ht)),Dt(jt("<")),Dt(Tt(Ht)),Pt(e=>Yn(Pt(jt(","),jt(">")))(e),Ct("type is expected in Partial type.")),Dt(Tt(Ht)),Pt(qt(jt(">")),Ct("'>' is expected in Partial type.")),Dt(jt(">"))),Pn=Vt(e=>[[{symbol:"Pick"===e[0]?"picked":"omit"},e[1],...e.slice(2)]])(Pt(jt("Pick"),jt("Omit")),Dt(Tt(Ht)),Dt(jt("<")),Dt(Tt(Ht)),Pt(e=>Yn(Pt(jt(","),jt(">")))(e),Ct("type is expected in Partial type.")),Dt(Tt(Ht)),Mt(Dt(jt(",")),Dt(Tt(Ht)),bn,Et(0)(Mt(Dt(Tt(Ht)),Dt(jt("|")),Dt(Tt(Ht)),bn)),Dt(Tt(Ht))),Pt(qt(jt(">")),Ct("'>' is expected in Pick|Omit type.")),Dt(jt(">"))),Ln=Vt(e=>[e[0]])(Tn,Dt(Tt(Ht)),Et(0,1)(Mt(Dt(jt("<")),Mt(Dt(Tt(Ht)),Pt(e=>Yn(Pt(jt(","),jt(">")))(e),Ct("type is expected in generic type.")),Dt(Tt(Ht))),Tt(Mt(Dt(jt(","),Tt(Ht)),Pt(e=>Yn(Pt(jt(","),jt(">")))(e),Ct("type is expected in generic type.")),Dt(Tt(Ht)))),Et(0,1)(Dt(jt(","),Tt(Ht))),Pt(qt(jt(">")),Ct("genericType: Unexpected token has appeared.")),Dt(jt(">"))))),Mn=Vt(e=>[[{symbol:"spread"},e[0],e[1]]])(Dt(jt("...")),Dt(Tt(Ht)),Dt(jt("<")),Dt(Tt(Ht)),e=>Yn(Pt(jt(","),jt(">")))(e),Dt(Tt(Ht)),Et(0,1)(Mt(Dt(jt(",")),Dt(Tt(Ht)),Pt(An,Ct("spreadType: Unexpected token has appeared. Expect array size.")),Dt(Tt(Ht)))),Pt(qt(jt(">")),Ct("spreadType: Unexpected token has appeared.")),Dt(jt(">"))),Dn=Vt(e=>[e])(hn,Et(0,1)(Pt(Mt(Dt(jt("("),Tt(Ht),jt(")"))),Mt(Dt(jt("(")),Pt(Mt(Mt(Dt(Tt(Ht)),Pt(gn,kn),Dt(Tt(Ht))),Tt(Mt(Dt(Tt(Ht)),Dt(jt(",")),Dt(Tt(Ht)),Pt(gn,kn),Dt(Tt(Ht)))),Et(0,1)(Dt(jt(","),Tt(Ht))),Pt(qt(jt(")")),Ct('decorator: Unexpected token has appeared. Expect ")".'))),Ct("decorator: Unexpected token has appeared.")),Dt(jt(")")))))),Vn=Vt(e=>e)(Tt(Mt(Dn,Dt(Tt(Ht))))),qn=e=>Vt(e=>{let t=[{symbol:"$pipe"},e[1],...e[0]];if(null!==e[2])for(const n of e[2])t=[{symbol:"repeated"},t,n];return[[t,...e[3]?[e[3]]:[],...e.slice(4)]]})(Vt(e=>[e])(Et(0,1)(Vn)),Pt(e=>Pt(wn,Ln,In,Pn,Un,En,e=>Qn(Pt(jt(";"),jt(",")))(e))(e),Mt(Dt(jt("(")),Dt(Tt(Ht)),t=>Yn(e)(t),Dt(Tt(Ht)),Dt(jt(")")))),Mt(Vt(e=>null!==e[0]?[e]:[null])(Pt(Et(1)(Mt(Dt(Tt(Ht)),Cn)),At(()=>null))),Mt(Pt(Vt(e=>[e[0],...e[1]])(Et(1)(Mt(Dt(Tt(Ht)),Vt(e=>[{op:e[0]}])(Lt(jt("&"),jt("|"),jt("-"))),Dt(Tt(Ht)),t=>qn(e)(t)))),Vt(e=>[])())))),Xn=(e,t,n)=>[{symbol:e},t,n],Fn=(e,t)=>"object"==typeof e&&e.op===t,Rn=vt.trans(e=>[Xn("intersect",e[0],e[2])])(vt.clsFn(e=>!0),vt.clsFn(e=>Fn(e,"&")),vt.clsFn(e=>!0)),Bn=vt.trans(e=>[Xn("oneOf",e[0],e[2])])(vt.clsFn(e=>!0),vt.clsFn(e=>Fn(e,"|")),vt.clsFn(e=>!0)),Wn=vt.trans(e=>[Xn("subtract",e[0],e[2])])(vt.clsFn(e=>!0),vt.clsFn(e=>Fn(e,"-")),vt.clsFn(e=>!0)),Yn=e=>Xt({rules:[Rn,Bn,Wn],check:vt.combine(vt.classes.any,vt.end())})(Vt(e=>e[0])(qn(e))),zn=e=>Pt(Mn,Yn(e)),Kn=Vt(e=>[[{symbol:"def"},e[1],[{symbol:"docComment"},e[2],e[0]]]])(Dt(jt("type")),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Dt(Et(1)(Ht)),Pt(yn,Ct("typeDef: Unexpected token has appeared. Expect symbol name.")),Dt(Tt(Ht)),Pt(qt(jt("=")),Ct('typeDef: Unexpected token has appeared. Expect "=".')),Dt(jt("=")),Pt(Mt(Dt(Tt(Ht)),e=>Yn(Pt(jt(","),jt(";")))(e),Dt(Tt(Ht))),Ct("typeDef: Unexpected token has appeared.")),Pt(qt(jt(";")),Ct('typeDef: Unexpected token has appeared. Expect ";".')),Dt(jt(";"))),Hn=Vt(e=>[[{symbol:"$list"},...e.map(e=>[{symbol:"ref"},e])]])(Dt(Pt(jt("extends"),Mt(yn,Ct('interfaceExtendsClause: Unexpected token has appeared. Expect "extends" keyword.')))),Dt(Et(1)(Ht)),Pt(yn,Ct("interfaceExtendsClause: Unexpected token has appeared. Expect symbol name.")),Tt(Mt(Dt(Tt(Ht)),Dt(jt(",")),Dt(Tt(Ht)),Pt(yn,Ct("interfaceExtendsClause: Unexpected token has appeared. Expect symbol name."))))),Gn=Pt(Vt(e=>[[{symbol:"$list"},...e]])(Dt(jt("[")),Dt(Tt(Ht),vn,Tt(Ht),Pt(jt(":"),Ct('":" is needed.')),Tt(Ht)),Tt(Mt(Pt(gn,Nn),Dt(Tt(Ht),jt("|"),Tt(Ht)))),Pt(gn,Nn),Dt(Tt(Ht)),Pt(qt(jt("]")),Ct('interfaceKey: Unexpected token has appeared. Expect "]".')),Dt(jt("]"))),vn),Jn=e=>Vt(e=>[[{symbol:"$list"},e[2],[{symbol:"$pipe"},"?"===e[3]?[{symbol:"optional"},e[4]]:e[4],...e[0]],e[1]]])(Vt(e=>[e])(Pt(Vn,At(()=>[]))),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Gn,Pt(Mt(Dt(Tt(Ht)),jt("?"),Dt(Tt(Ht))),At(()=>[""])),Dt(Tt(Ht),Pt(jt(":"),Ct('":" is needed.')),Tt(Ht)),Pt(t=>Yn(Pt(e,jt("}")))(t),Ct("interface member type is needed."))),Qn=e=>Vt(e=>[[{symbol:"objectType"},...e]])(Pt(Mt(Dt(jt("{"),Tt(Ht),jt("}"))),Mt(Dt(jt("{")),Mt(Dt(Tt(Ht)),Jn(e),Dt(Tt(Ht))),Tt(Mt(Dt(e,Tt(Ht)),Jn(e),Dt(Tt(Ht)))),Et(0,1)(Dt(e,Tt(Ht))),Pt(qt(jt("}")),Ct('interfaceDefInner: Unexpected token has appeared. Expect "}".')),Dt(jt("}"))))),Zn=Vt(e=>[[{symbol:"def"},e[1],[{symbol:"docComment"},[{symbol:"derived"},e[3],[{symbol:"$spread"},e[2]]],e[0]]]])(Dt(jt("interface")),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Dt(Et(1)(Ht)),Pt(yn,Ct("interfaceDef: Unexpected token has appeared. Expect symbol name.")),Dt(Tt(Ht)),Pt(Hn,At(()=>[])),Dt(Tt(Ht)),Pt(e=>Qn(Pt(jt(";"),jt(",")))(e),Ct("interfaceDef: Unexpected token has appeared."))),er=Vt(e=>[[{symbol:"$list"},e[1],e[2],e[0]]])(e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},yn,Dt(Tt(Ht)),Pt(Mt(Dt(jt("=")),Pt(Mt(Dt(Tt(Ht)),Pt(sn,bn),Dt(Tt(Ht))),Ct("enumKeyValue: Unexpected token has appeared."))),At(()=>null))),tr=Vt(e=>[[{symbol:"def"},e[1],[{symbol:"docComment"},[{symbol:"enumType"},...e.slice(2)],e[0]]]])(Dt(jt("enum")),e=>{const t=At(()=>[])(e);if(t.succeeded){const e=t.next.context.docComment;t.next.context=Object.assign({},t.next.context),delete t.next.context.docComment,t.tokens.length=0,t.tokens.push(e||null)}return t},Dt(Et(1)(Ht)),Pt(yn,Ct("enumDef: Unexpected token has appeared. Expect symbol name.")),Dt(Tt(Ht)),Pt(Mt(Dt(jt("{"),Tt(Ht),jt("}"))),Mt(Dt(jt("{")),Mt(Dt(Tt(Ht)),er,Dt(Tt(Ht))),Tt(Mt(Dt(jt(","),Tt(Ht)),er,Dt(Tt(Ht)))),Et(0,1)(Dt(jt(","),Tt(Ht))),Pt(qt(jt("}")),Ct('enumDef: Unexpected token has appeared. Expect "}".')),Dt(jt("}"))),Ct("enumDef: Unexpected token has appeared."))),nr=Pt(Kn,Zn,tr),rr=Vt(e=>[[{symbol:"asConst"},e[0]]])(Dt(jt("const"),Et(1)(Ht)),Pt(tr,Ct("constDef: Unexpected token has appeared."))),ar=Vt(e=>[[{symbol:"export"},e[0]]])(Dt(jt("export"),Et(1)(Ht)),Pt(rr,nr,e=>cr(e),Ct("exportedDef: Unexpected token has appeared."))),or=Vt(e=>[[{symbol:"$local"},[[{symbol:"_ty"},e[1]]],[{symbol:"redef"},{symbol:"_ty"},[{symbol:"$pipe"},{symbol:"_ty"},...e[0]]]]])(Vt(e=>[e])(Pt(Vn,At(()=>[]))),Pt(ar,rr,nr)),sr=Vt(e=>[[{symbol:"$list"},...e]])(yn,Dt(Tt(Ht)),Et(0,1)(Mt(Dt(jt(":")),Dt(Tt(Ht)),e=>Yn(Pt(jt(";"),jt(",")))(e)))),ir=Vt(e=>[[{symbol:"external"},...e]])(Dt(jt("external")),Dt(Et(1)(Ht)),sr,Tt(Mt(Dt(Tt(Ht)),Dt(_t(",")),Dt(Tt(Ht)),Pt(sr,Ct("externalTypeDef: Unexpected token has appeared. Expect symbol name.")),Dt(Tt(Ht)))),Dt(Tt(Ht)),Pt(qt(_t(";")),Ct('externalTypeDef: Unexpected token has appeared. Expect ";".')),Dt(_t(";"))),cr=Vt(e=>[[{symbol:"passthru"},e[0]]])(Nt(jt("declare"),Et(1)(Ht),Pt(jt("var"),jt("let"),jt("const"),Ct('declareVarStatement: Unexpected token has appeared. Expect "var|let|const".')),Et(1)(Ht),Nt(Tt(Ot(";"))),Pt(qt(jt(";")),Ct('declareVarStatement: Unexpected token has appeared. Expect ";".')),_t(";"))),lr=Vt(e=>[[{symbol:"passthru"},e[0]]])(Nt(jt("import"),Et(1)(Ht),Nt(Tt(Ot(";"))),Pt(qt(jt(";")),Ct('importStatement: Unexpected token has appeared. Expect ";".')),_t(";"))),ur=Pt(Rt,Bt,or,ir,cr,lr),mr=Ft(Mt(Dt(Tt(Ht)),Tt(Mt(ur,Dt(Tt(Ht)))),Dt(Tt(Ht)),Pt(qt(It()),Ct("program: Unexpected token has appeared.")),It()));function pr(e){const t=mr(i(e,{}));if(!t.succeeded)throw new Error(function(e){let t="",n="";if("string"==typeof e.src){n=e.src.slice(Math.max(e.pos-5,0),e.pos+55);let r=n.split(/\r\n|\n|\r/);r=r.slice(0,1).concat("          ^~~~~~~~").concat(...r.slice(1)),n=r.join("\n")+"\n\n";const a=function(e,t){let n=1,r=1;for(let a=0;a<=t;a++)switch(e[a]){case"\r":"\n"===e[a+1]&&a++;case"\n":n++,r=1;break;default:r++}return{line:n,col:r}}(e.src,e.pos);t=`parse failed at position:${e.pos} line:${a.line} col:${a.col} ${e.message?" "+e.message:""}\n     ${n}`}else{n="     (object)\n          ^~~~~~~~";try{n="     "+JSON.stringify(e.src.slice(Math.max(e.pos-10,0),e.pos))+"\n          "+JSON.stringify(e.src.slice(e.pos,e.pos+1))+"\n          "+JSON.stringify(e.src.slice(e.pos+1,e.pos+10));let t=n.split(/\r\n|\n|\r/);t=t.slice(0,2).concat("          ^~~~~~~~").concat(...t.slice(2)),n=t.join("\n")+"\n\n"}catch(e){}t=`parse failed at position:${e.pos} ${e.message?" "+e.message:""}\n     ${n}`}return t}(t));return t.tokens}const fr=(()=>{let e=Object.assign({},ft);return e.reservedNames=Object.assign({},e.reservedNames,{Template:"$concat"}),e=function(e){return e.funcs=(e.funcs||[]).concat(Fe).concat(e.enableCompilationOperators?Re:[]),e.macros=(e.macros||[]).concat(Be).concat(e.enableCompilationOperators?We:[]),e.symbols=(e.symbols||[]).concat(Ye),e}(e),e.stripComments=!0,function(e){let t=e||Object.assign({},ft),n={},r=[];const a=(e,n)=>{if(t.enableEvaluate)for(let t=0;t<n.length;t++)n[t]=Object(x.b)(e,n[t]);return t.returnMultipleRoot?1===n.length?n[0]:n:n[n.length-1]},o=(e,...o)=>{const s=dt(t,Object.assign({},n),e,o);return a(s,r.concat(pt(s)))};return o.evaluateAST=e=>{const o=dt(t,Object.assign({},n),"");return a(o,r.concat(e))},o.repl=()=>{const e=dt(t,Object.assign({},n),"");a(e,r.slice(0));const o=(t,...n)=>(bt(e,t,n),a(e,pt(e)));return o.sync=o,o},o.setGlobals=e=>(n=Object.assign({},e||{}),o),o.appendGlobals=e=>(n=Object.assign({},n,e||{}),o),o.setStartup=(e,...a)=>{const s=dt(t,Object.assign({},n),e,a);return r=pt(s),o},o.setStartupAST=e=>(r=e,o),o.appendStartup=(e,...a)=>{const s=dt(t,Object.assign({},n),e,a);return r=r.concat(pt(s)),o},o.appendStartupAST=e=>(r=r.concat(e),o),o.install=e=>(t=e(t),o),o}(e)})();function dr(e){const t=new Map,n=new Map;let r=0;const a=(e,r)=>{let a=r;const o="string"==typeof e?e:e.symbol;if(Object(ht.g)(ht.f,o))throw new Error("Unsafe symbol name is appeared: "+o);if(!t.has(a)){const e=a.typeName;a=gt.E(gt.J(e?gt.F(a,e):a,o),o)}const s=t.has(a)?t.get(a):{ty:a,exported:!1,resolved:!1};return n.set(o,s),t.has(a)||t.set(a,s),a},o=e=>{const t={kind:"never",passThruCodeBlock:e||""};return n.set(`__$$$gensym_${r++}$$$__`,{ty:t,exported:!1,resolved:!1}),t};fr.setGlobals({picked:gt.i,omit:gt.e,partial:gt.h,intersect:gt.c,oneOf:gt.f,subtract:gt.p,primitive:gt.j,primitiveValue:gt.k,optional:gt.g,repeated:gt.m,sequenceOf:gt.n,spread:gt.o,enumType:gt.b,objectType:gt.d,derived:gt.a,def:a,ref:(e,...t)=>{const r="string"==typeof e?e:e.symbol;if(Object(ht.g)(ht.f,r))throw new Error("Unsafe symbol name is appeared: "+r);const a=t.map(e=>{const t="string"==typeof e?e:e.symbol;if(Object(ht.g)(ht.f,t))throw new Error("Unsafe symbol name is appeared: "+t);return t});if(!n.has(r))return Object.assign({kind:"symlink",symlinkTargetName:r,name:r,typeName:r},0<a.length?{memberTree:a}:{});let o=Object(yt.a)(n.get(r).ty,r,a,0);return o.noOutput&&(o=Object.assign({},o),delete o.noOutput),o},redef:(e,r)=>{if(e===r)return r;const a=t.has(e)?t.get(e):{ty:e,exported:!1,resolved:!1};return a.ty=r,t.set(a.ty,a),r.name&&n.set(r.name,a),a.ty},export:e=>{if("never"===e.kind&&"string"==typeof e.passThruCodeBlock)return e.passThruCodeBlock="export "+e.passThruCodeBlock,e;return(t.has(e)?t.get(e):{ty:e,exported:!1,resolved:!1}).exported=!0,e},asConst:e=>{switch(e.kind){case"enum":e.isConst=!0;break;default:throw new Error(`It cannot set to const: ${e.kind} ${e.typeName||"(unnamed)"}`)}return e},external:(...e)=>{for(const t of e){let e=null;e="string"==typeof t?a(t,gt.j("any")):a(t[0],t[1]?t[1]:gt.j("any")),e.noOutput=!0}},passthru:o,directive:(e,t)=>{switch(e){case"@tynder-external":fr.evaluateAST(function(e){const t=ir(i(e,{}));if(!t.succeeded)throw new Error("Invalid external directive.");return t.tokens}(`external ${t} ;`));break;case"@tynder-pass-through":o(t);break;default:throw new Error("Unknown directive is appeared: "+e)}return[]},docComment:gt.s,"@range":(e,t)=>n=>gt.G(e,t)(n),"@minValue":e=>t=>gt.B(e)(t),"@maxValue":e=>t=>gt.y(e)(t),"@greaterThan":e=>t=>gt.u(e)(t),"@lessThan":e=>t=>gt.v(e)(t),"@minLength":e=>t=>gt.A(e)(t),"@maxLength":e=>t=>gt.x(e)(t),"@match":e=>t=>gt.w(e)(t),"@stereotype":e=>t=>gt.I(e)(t),"@constraint":(e,t)=>n=>gt.r(e,t)(n),"@forceCast":()=>e=>gt.t()(e),"@recordType":()=>e=>gt.H()(e),"@meta":e=>t=>gt.z(e)(t),"@msg":e=>t=>gt.C(e)(t),"@msgId":e=>t=>gt.D(e)(t)});const s=pr(e);return fr.evaluateAST(s),Object(yt.b)(n)}var br=n(7);function gr(e){if(e.includes(".")){const t=e.split(".");let n=t[0];for(let e=1;e<t.length;e++)n+=`['${Object(br.a)(t[e])}']`;return`(${n})`}return e}function yr(e,t){let n="";const r="    ".repeat(t),a="string"==typeof e?e:e.docComment;return a&&(0<=a.indexOf("\n")?n+=`${r}/**\n${r}  ${a.split("\n").map(e=>e.trimLeft()).join(`\n${r} `)}\n${r} */\n`:n+=`${r}/** ${a} */\n`),n}function hr(e,t,n){switch(e.kind){case"never":return"never";case"any":return"any";case"unknown":return"unknown";case"primitive":return function(e,t){switch(e.primitiveName){case"integer":return"number";default:return e.primitiveName}}(e);case"primitive-value":return function(e,t){if(null===e.value)return"null";if(void 0===e.value)return"undefined";switch(typeof e.value){case"string":return`'${Object(br.a)(e.value)}'`;case"bigint":return e.value.toString()+"n";default:return e.value.toString()}}(e);case"repeated":return function(e,t){return"primitive"===e.repeated.kind||"never"===e.repeated.kind||"any"===e.repeated.kind||"unknown"===e.repeated.kind||"object"===e.repeated.kind||"symlink"===e.repeated.kind||"one-of"===e.repeated.kind&&e.repeated.typeName?(e.repeated.typeName?gr(e.repeated.typeName):hr(e.repeated,!1,t))+"[]":`Array<${e.repeated.typeName?gr(e.repeated.typeName):hr(e.repeated,!1,t)}>`}(e,n);case"spread":return"";case"sequence":return function(e,t){return 0<e.sequence.filter(e=>"spread"===e.kind||"optional"===e.kind).length?"any[]":`[${e.sequence.filter(e=>"spread"!==e.kind&&"optional"!==e.kind).map(e=>e.typeName?gr(e.typeName):hr(e,!1,Object.assign(Object.assign({},t),{nestLevel:t.nestLevel+1}))).join(", ")}]`}(e,n);case"one-of":return function(e,t){return`(${e.oneOf.map(e=>e.typeName?gr(e.typeName):hr(e,!1,t)).join(" | ")})`}(e,n);case"optional":return function(e,t){return hr(e.optional,!1,t)}(e,n);case"enum":return function(e,t){return`(${e.values.map(e=>""+e[1]).join(" | ")})`}(e);case"object":return function(e,t,n){var r,a;if(0===e.members.filter(e=>!e[2]).length&&0===(null===(r=e.additionalProps)||void 0===r?void 0:r.filter(e=>!e[2]).length))return"{}";const o=e.members.filter(e=>!e[2]).map(e=>`${yr(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${ht.e.test(e[0])?e[0]:`'${Object(br.a)(e[0])}'`}${"optional"===e[1].kind?"?":""}: ${e[1].typeName?gr(e[1].typeName):hr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}))}`),s=(null===(a=e.additionalProps)||void 0===a?void 0:a.filter(e=>!e[2]).map((e,t)=>`${yr(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${function(e,t){return`[propName${t}: ${e.map(e=>"string"==typeof e?e:"string").join(" | ")}]`}(e[0],t)}${"optional"===e[1].kind?"?":""}: ${e[1].typeName?gr(e[1].typeName):hr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}))}`))||[],i=o.concat(s);return 0===i.length?"{}":`{\n${i.join(";\n")};\n${"    ".repeat(n.nestLevel)}}`}(e,0,n);case"symlink":return e.symlinkTargetName;case"operator":throw new Error("Unexpected type assertion: "+e.kind);default:throw new Error("Unknown type assertion: "+e.kind)}}function $r(e){let t="";const n={nestLevel:0};for(const r of e.entries())if(!r[1].ty.noOutput)if(t+=yr(r[1].ty,n.nestLevel),r[1].exported&&(t+="export "),"object"===r[1].ty.kind)t+=`interface ${r[0]}${r[1].ty.baseTypes&&r[1].ty.baseTypes.length?" extends "+r[1].ty.baseTypes.filter(e=>e.typeName).map(e=>gr(e.typeName)).join(", "):""} ${hr(r[1].ty,0,n)}\n\n`;else if("enum"===r[1].ty.kind){const e="    ".repeat(n.nestLevel),a="    ".repeat(n.nestLevel+1);let o=0;t+=`${r[1].ty.isConst?"const ":""}enum ${r[0]} {\n${r[1].ty.values.map(e=>`${yr(e[2]||"",n.nestLevel+1)}${a}${null!==o&&e[1]===o?(o++,""+e[0]):"number"==typeof e[1]?(o=e[1]+1,`${e[0]} = ${e[1]}`):`${e[0]} = '${Object(br.a)(e[1])}'`},\n`).join("")}${e}}\n\n`}else"never"===r[1].ty.kind&&r[1].ty.passThruCodeBlock?t+=r[1].ty.passThruCodeBlock+"\n\n":t+=`type ${r[0]} = ${(r[1].ty.originalTypeName?gr(r[1].ty.originalTypeName):void 0)||hr(r[1].ty,0,n)};\n\n`;return t}function vr(e,t){const n=Object.assign({},e);let r=!1;switch(t.docComment&&(n.description=t.docComment,r=!0),t.kind){case"repeated":"number"==typeof t.min&&(n.minItems=t.min,r=!0),"number"==typeof t.max&&(n.maxItems=t.max,r=!0);break;case"primitive":"number"==typeof t.minValue&&(n.minimum=t.minValue,r=!0),"number"==typeof t.maxValue&&(n.maximum=t.maxValue,r=!0),"number"==typeof t.greaterThanValue&&(n.exclusiveMinimum=t.greaterThanValue,r=!0),"number"==typeof t.lessThanValue&&(n.exclusiveMaximum=t.lessThanValue,r=!0),"number"==typeof t.minLength&&(n.minLength=t.minLength,r=!0),"number"==typeof t.maxLength&&(n.maxLength=t.maxLength,r=!0),t.pattern&&(n.pattern=t.pattern.source,r=!0)}return r?n:e}function jr(e,t,n){var r;if(0<n&&t.typeName){const n={$ref:"#/definitions/"+t.typeName.replace(/\./g,"/properties/")};return n!==vr(n,t)?jr(e,t,0):n}switch(t.kind){case"symlink":{const n={$ref:"#/definitions/"+t.symlinkTargetName};if(n!==vr(n,t)){const a=null===(r=e.get(t.symlinkTargetName))||void 0===r?void 0:r.ty;return a?jr(e,a,0):n}return n}case"repeated":{const r={type:"array",items:jr(e,t.repeated,n+1)};return"number"==typeof t.min&&(r.minItems=t.min),"number"==typeof t.max&&(r.maxItems=t.max),vr(r,t)}case"sequence":return vr({type:"array",items:{anyOf:t.sequence.map(t=>jr(e,t,n+1))}},t);case"spread":return jr(e,t.spread,n+1);case"one-of":return vr({anyOf:t.oneOf.map(t=>jr(e,t,n+1))},t);case"optional":return vr({oneOf:[jr(e,t.optional,n+1),{type:"null"}]},t);case"enum":return vr({type:["string","number"],enum:t.values.map(e=>e[1])},t);case"object":{const r={},a={};let o=0;const s=[];for(const a of t.members){const t=jr(e,"optional"===a[1].kind?a[1].optional:a[1],n+1);a[3]?t.description=a[3]:delete t.description,r[a[0]]=t,"optional"!==a[1].kind&&s.push(a[0])}for(const r of t.additionalProps||[]){const t=jr(e,r[1],n+1);r[3]?t.description=r[3]:delete t.description;for(const e of r[0])switch(o++,e){case"number":a["^[0-9]+$"]=t;break;case"string":a["^.*$"]=t;break;default:a[e.source]=t}}return vr(Object.assign(Object.assign(Object.assign({type:"object",properties:r},0<o?{patternProperties:a}:{}),0<s.length?{required:s}:{}),{additionalProperties:!1}),t)}case"primitive":switch(t.primitiveName){case"null":case"undefined":return vr({type:"null"},t);case"number":return vr({type:"number"},t);case"bigint":return vr({type:["integer","string"]},t);case"integer":return vr({type:"integer"},t);case"string":return vr({type:"string"},t);case"boolean":return vr({type:"boolean"},t)}case"primitive-value":switch(typeof t.value){case"number":return vr({type:"number",enum:[t.value]},t);case"bigint":{const e={type:["integer","string"],enum:[t.value.toString()]};return BigInt(Number.MIN_SAFE_INTEGER)<=t.value&&t.value<=BigInt(Number.MAX_SAFE_INTEGER)&&e.enum.push(Number(t.value)),vr(e,t)}case"string":return vr({type:"string",enum:[t.value]},t);case"boolean":return vr({type:"boolean",enum:[t.value]},t);default:throw new Error("Unknown primitive-value assertion: "+typeof t.value)}case"never":return vr({type:"null"},t);case"any":case"unknown":return vr({type:["null","integer","number","string","boolean","array","object"]},t);case"operator":throw new Error("Unexpected type assertion: "+t.kind);default:throw new Error("Unknown type assertion: "+t.kind)}}function _r(e){const t={$schema:"http://json-schema.org/draft-06/schema#",definitions:{}};for(const n of e.entries())"never"===n[1].ty.kind&&n[1].ty.passThruCodeBlock||(t.definitions[n[0]]=jr(e,n[1].ty,0));return t}function Or(e,t){const n=_r(e);return t?`\n// tslint:disable: object-literal-key-quotes\nconst schema = ${JSON.stringify(n,null,2)};\nexport default schema;\n// tslint:enable: object-literal-key-quotes\n`:JSON.stringify(n,null,2)}function kr(e,t,n){return n.includes(".")?Ar(e,!1,t):n}function wr(e,t){let n="";const r="    ".repeat(t),a="string"==typeof e?e:e.docComment;return a&&(0<=a.indexOf("\n")?n+=`${r}/**\n${r}  ${a.split("\n").map(e=>e.trimLeft()).join(`\n${r} `)}\n${r} */\n`:n+=`${r}/** ${a} */\n`),n}function xr(e){switch(e){case"double":return"google.protobuf.DoubleValue";case"int64":return"google.protobuf.Int64Value";case"int32":return"google.protobuf.Int32Value";case"string":return"google.protobuf.StringValue";case"bool":return"google.protobuf.BoolValue";default:return e}}function Nr(e,t){switch(e.primitiveName){case"number":return"double";case"integer":return"int32";case"bigint":case"string":return"string";case"boolean":return"bool";case"undefined":case"null":default:return"google.protobuf.Any"}}function Sr(e,t){if(null===e.value)return"google.protobuf.Any";if(void 0===e.value)return"google.protobuf.Any";switch(typeof e.value){case"number":return"double";case"bigint":case"string":return"string";case"boolean":return"bool";default:return"google.protobuf.Any"}}function Tr(e,t){return"repeated "+(e.repeated.typeName?kr(e.repeated,t,e.repeated.typeName):"repeated"===e.repeated.kind?"google.protobuf.Any":Ar(e.repeated,!1,t))}function Er(e,t){const n=function(e,t){const n=e.oneOf.filter(e=>!("primitive"===e.kind&&("null"===e.primitiveName||"undefined"===e.primitiveName)||"primitive-value"===e.kind&&(null===e.value||void 0===e.value)));return 1===n.length&&1!==e.oneOf.length?n[0]:null}(e);return n?xr(function(e,t){if(e.typeName)return kr(e,t,e.typeName);switch(e.kind){case"primitive":return Nr(e,t);case"primitive-value":return Sr(e,t);case"repeated":return Tr(e,t);case"one-of":return Er(e,t);default:return"object"}}(n,t)):"google.protobuf.Any"}function Ar(e,t,n){switch(e.kind){case"never":case"any":case"unknown":return"google.protobuf.Any";case"primitive":return Nr(e);case"primitive-value":return Sr(e);case"repeated":return Tr(e,n);case"spread":return"";case"sequence":return"repeated google.protobuf.Any";case"one-of":return Er(e,n);case"optional":return function(e,t){return xr(Ar(e.optional,!1,t))}(e,n);case"enum":return function(e,t){return e.typeName?kr(e,t,e.typeName):"google.protobuf.Any"}(e,n);case"object":return function(e,t,n){if(0===e.members.length)return"{}";const r=t?";\n":",\n";let a=1;return`{\n${e.members.map(e=>`${wr(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${e[1].typeName?kr(e[1],Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}),e[1].typeName):Ar(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}))} ${e[0]} = ${a++}`).join(r)}${r}${"    ".repeat(n.nestLevel)}}`}(e,t,n);case"symlink":return e.symlinkTargetName;case"operator":throw new Error("Unexpected type assertion: "+e.kind);default:throw new Error("Unknown type assertion: "+e.kind)}}function Cr(e){let t='\nsyntax = "proto3";\nimport "google/protobuf/wrappers.proto";\nimport "google/protobuf/any.proto";\n\n';const n={nestLevel:0};for(const r of e.entries())if(r[1].ty.noOutput){const e="    ".repeat(n.nestLevel),a="    ".repeat(n.nestLevel+1);t+=`message ${r[0]} {\n${a}google.protobuf.Any value = 1;\n${e}}\n\n`}else if(t+=wr(r[1].ty,n.nestLevel),"object"===r[1].ty.kind)t+=`message ${r[0]} ${Ar(r[1].ty,!0,n)}\n\n`;else if("enum"===r[1].ty.kind){const e="    ".repeat(n.nestLevel),a="    ".repeat(n.nestLevel+1);0<r[1].ty.values.filter(e=>"number"!=typeof e[1]).length?t+=`message ${r[0]} {\n${a}google.protobuf.Any value = 1;\n${e}}\n\n`:t+=`enum ${r[0]} {\n${a}option allow_alias = true;\n${0===r[1].ty.values.filter(e=>0===e[1]).length?`${a}${r[0]}__UNKNOWN__ = 0;\n`:""}${r[1].ty.values.map(e=>`${wr(e[2]||"",n.nestLevel+1)}${a}${"number"==typeof e[1]?`${r[0]}_${e[0]} = ${e[1]}`:`${r[0]}_${e[0]} = '${Object(br.a)(e[1])}'`};\n`).join("")}${e}}\n\n`}else if("never"===r[1].ty.kind&&r[1].ty.passThruCodeBlock);else{const e="    ".repeat(n.nestLevel),a="    ".repeat(n.nestLevel+1);t+=`message ${r[0]} {\n${a}${Ar(r[1].ty,!1,n)} value = 1;\n${e}}\n\n`}return t}function Ur(e,t,n){return n.includes(".")?Lr(e,!1,t,!1):n}function Ir(e,t){let n="";const r="    ".repeat(t),a="string"==typeof e?e:e.docComment;return a&&(0<=a.indexOf("\n")?n+=`${r}/**\n${r}  ${a.split("\n").map(e=>e.trimLeft()).join(`\n${r} `)}\n${r} */\n`:n+=`${r}/** ${a} */\n`),n}function Pr(e,t){const n=e.oneOf.filter(e=>!("primitive"===e.kind&&("null"===e.primitiveName||"undefined"===e.primitiveName)||"primitive-value"===e.kind&&(null===e.value||void 0===e.value)));return 1===n.length&&1!==e.oneOf.length?n[0]:null}function Lr(e,t,n,r){let a="";switch(e.kind){case"optional":return Lr(e.optional,t,n,!1);case"one-of":return function(e,t,n){const r=Pr(e);return r?r.typeName?r.typeName:Lr(r,!1,t,!1):n?""+e.oneOf.map(e=>e.typeName?e.typeName:Lr(e,!1,t,!1)).join(" | "):"Any"}(e,n,r);case"spread":return"";case"sequence":return"[Any]";case"never":case"any":case"unknown":a="Any";break;case"primitive":a=function(e,t){switch(e.primitiveName){case"number":return"Float";case"integer":return"Int";case"bigint":return"BigInt";case"string":return"String";case"boolean":return"Boolean";case"undefined":case"null":default:return"Any"}}(e);break;case"primitive-value":a=function(e,t){if(null===e.value)return"Any";if(void 0===e.value)return"Any";switch(typeof e.value){case"number":return"Float";case"bigint":return"BigInt";case"string":return"String";case"boolean":return"Boolean";default:return"Any"}}(e);break;case"repeated":a=function(e,t){return`[${e.repeated.typeName?Ur(e.repeated,t,e.repeated.typeName):Lr(e.repeated,!1,t,!1)}${"optional"===e.repeated.kind||"one-of"===e.repeated.kind&&Pr(e.repeated)?"":"!"}]`}(e,n);break;case"enum":a=function(e,t){return e.typeName?Ur(e,t,e.typeName):"Any"}(e,n);break;case"object":a=function(e,t,n){return 0===e.members.length?"{}":`{\n${e.members.map(e=>`${Ir(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${e[0]}: ${e[1].typeName?Ur(e[1],Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}),e[1].typeName):Lr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}),!1)}${"optional"===e[1].kind||"one-of"===e[1].kind&&Pr(e[1])?"":"!"}`).join("\n")}\n${"    ".repeat(n.nestLevel)}}`}(e,0,n);break;case"symlink":a=e.symlinkTargetName;break;case"operator":throw new Error("Unexpected type assertion: "+e.kind);default:throw new Error("Unknown type assertion: "+e.kind)}return a+""}function Mr(e){let t="\nscalar Any\nunion BigInt = String | Int\n\n";const n={nestLevel:0};for(const r of e.entries())if(r[1].ty.noOutput)t+=`scalar ${r[0]}\n\n`;else if(t+=Ir(r[1].ty,n.nestLevel),"object"===r[1].ty.kind)t+=`type ${r[0]} ${Lr(r[1].ty,!0,n,!1)}\n\n`;else if("enum"===r[1].ty.kind){const e="    ".repeat(n.nestLevel),a="    ".repeat(n.nestLevel+1);t+=`enum ${r[0]} {\n${r[1].ty.values.map(e=>`${Ir(e[2]||"",n.nestLevel+1)}${a}${e[0]}\n`).join("")}${e}}\n\n`}else"never"===r[1].ty.kind&&r[1].ty.passThruCodeBlock||(t+=`union ${r[0]} = ${Lr(r[1].ty,!1,n,!0)}\n\n`);return t}function Dr(e,t,n){return n.includes(".")||"symlink"===e.kind||"enum"===e.kind?Kr(e,!1,t):n}function Vr(e,t){let n="";const r="    ".repeat(t),a="string"==typeof e?e:e.docComment;return a&&(0<=a.indexOf("\n")?n+=`${r}/**\n${r}  ${a.split("\n").map(e=>e.trimLeft()).join(`\n${r} `)}\n${r} */\n`:n+=`${r}/** ${a} */\n`),n}function qr(e,t){if(e.typeName)return Dr(e,t,e.typeName);switch(e.kind){case"primitive":return Rr(e,t);case"primitive-value":return Br(e,t);case"repeated":return Wr(e,t);case"one-of":return Yr(e,t);default:return"object"}}function Xr(e){switch(e){case"decimal":case"int":case"double":case"bool":return e+"?";default:return e}}function Fr(e,t){const n=e.oneOf.filter(e=>!("primitive"===e.kind&&("null"===e.primitiveName||"undefined"===e.primitiveName)||"primitive-value"===e.kind&&(null===e.value||void 0===e.value)));return 1===n.length&&1!==e.oneOf.length?n[0]:null}function Rr(e,t){switch(e.primitiveName){case"null":case"undefined":return"object";case"integer":return"int";case"bigint":return"decimal";case"number":return"double";case"boolean":return"bool";default:return e.primitiveName}}function Br(e,t){if(null===e.value||void 0===e.value)return"object";switch(typeof e.primitiveName){case"bigint":return"decimal";default:switch(typeof e.value){case"number":return"double";case"string":return"string";case"boolean":return"bool";default:return"object"}}}function Wr(e,t){return qr(e.repeated,t)+"[]"}function Yr(e,t){const n=Fr(e);return n?Xr(qr(n,t)):"object"}function zr(e,t,n){const r=e.members.filter(e=>!e[2]).map(e=>{const t=e[1].typeName?Dr(e[1],Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}),e[1].typeName):Kr(e[1],!1,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}));return`${Vr(e[3]||"",n.nestLevel+1)}${"    ".repeat(n.nestLevel+1)}${function(e,t,n){const r=[];let a=e;if("optional"!==a.kind){switch(n){case"decimal":case"int":case"double":case"bool":break;default:"one-of"===a.kind&&Fr(a)||r.push("Required")}a=e}switch(a.kind){case"primitive":if("number"==typeof a.minLength&&r.push(`MinLength(${a.minLength})`),"number"==typeof a.maxLength&&r.push(`MaxLength(${a.maxLength})`),null!==a.minValue&&void 0!==a.minValue||null!==a.maxValue&&void 0!==a.maxValue)switch(a.primitiveName){case"string":r.push(`Range(typeof(string), "${Object(ht.i)(a.minValue,e=>Object(br.a)(e),"")}", "${Object(ht.i)(a.maxValue,e=>Object(br.a)(e),"\\U00010FFFF")}")`);break;case"bigint":r.push(`Range(typeof(decimal), ${Object(ht.i)(a.minValue,e=>`new decimal(@"${String(e)}").ToString()`,"Decimal.MinValue")}, ${Object(ht.i)(a.maxValue,e=>`new decimal(@"${String(e)}").ToString()`,"Decimal.MaxValue")})`);break;case"integer":r.push(`Range(${Object(ht.i)(a.minValue,e=>"(int)"+String(e),"Int32.MinValue")}, ${Object(ht.i)(a.maxValue,e=>"(int)"+String(e),"Int32.MaxValue")})`);break;case"number":r.push(`Range(${Object(ht.i)(a.minValue,e=>"(double)"+String(e),"Double.MinValue")}, ${Object(ht.i)(a.maxValue,e=>"(double)"+String(e),"Double.MaxValue")})`)}a.pattern&&r.push(`RegularExpression(@"${a.pattern.source.replace(/"/g,'""')}")`);break;case"repeated":"number"==typeof a.min&&r.push(`MinLength(${a.min})`),"number"==typeof a.max&&r.push(`MaxLength(${a.max})`)}return 0<r.length?`[${r.join(", ")}]\n${"    ".repeat(t.nestLevel+1)}`:""}(e[1],n,t)}public ${t} ${e[0]} { get; set; }`});return 0===r.length?`\n${"    ".repeat(n.nestLevel)}{\n${"    ".repeat(n.nestLevel)}}`:`\n${"    ".repeat(n.nestLevel)}{\n${r.join("\n\n")}\n${"    ".repeat(n.nestLevel)}}`}function Kr(e,t,n){var r;switch(e.kind){case"never":case"any":case"unknown":return"object";case"primitive":return Rr(e);case"primitive-value":return Br(e);case"repeated":return Wr(e,n);case"spread":return"";case"sequence":return"object[]";case"one-of":return Yr(e,n);case"optional":return function(e,t){return Xr(Kr(e.optional,!1,t))}(e,n);case"enum":return"object";case"object":return zr(e,0,n);case"symlink":if(null===(r=n.schema)||void 0===r?void 0:r.has(e.symlinkTargetName)){const t=n.schema.get(e.symlinkTargetName);switch(null==t?void 0:t.ty.kind){case"enum":return"object"}}return e.symlinkTargetName;case"operator":throw new Error("Unexpected type assertion: "+e.kind);default:throw new Error("Unknown type assertion: "+e.kind)}}function Hr(e){let t="using System.ComponentModel.DataAnnotations;\n\nnamespace Tynder.UserSchema\n{\n";const n={nestLevel:1,schema:e};for(const r of e.entries()){const e="    ".repeat(n.nestLevel);if("object"===r[1].ty.kind);else if("enum"===r[1].ty.kind);else if("never"===r[1].ty.kind&&r[1].ty.passThruCodeBlock);else{t+=Vr(r[1].ty,n.nestLevel);let a="System.Object";switch(r[1].ty.kind){case"primitive":switch(r[1].ty.primitiveName){case"integer":a="System.Int32";break;case"bigint":a="System.Decimal";break;case"number":a="System.Double";break;case"boolean":a="System.Boolean";break;case"string":a="System.String"}break;case"primitive-value":if(null!==r[1].ty.value&&void 0!==r[1].ty.value)switch(typeof r[1].ty.primitiveName){case"bigint":a="System.Decimal";break;default:switch(typeof r[1].ty.value){case"number":a="System.Double";break;case"boolean":a="System.Boolean";break;case"string":a="System.String"}}}t+=`${e}using ${r[0]} = ${a};\n\n`}}let r=!0;for(const a of e.entries()){const e=(a[1].exported,"public"),o="    ".repeat(n.nestLevel),s="    ".repeat(n.nestLevel+1);if("object"!==a[1].ty.kind&&"enum"!==a[1].ty.kind||(r?(r=!1,t+="\n"):t+="\n\n",t+=Vr(a[1].ty,n.nestLevel)),"object"===a[1].ty.kind)t+=`${o}${e} class ${a[0]}${a[1].ty.baseTypes&&a[1].ty.baseTypes.length?" : "+a[1].ty.baseTypes.filter(e=>e.typeName).map(e=>Dr(e,Object.assign(Object.assign({},n),{nestLevel:n.nestLevel+1}),e.typeName)).join(", "):""} ${Kr(a[1].ty,0,n)}\n`;else if("enum"===a[1].ty.kind){let r=0;t+=`${o}${e} static class ${a[0]}\n${o}{\n${a[1].ty.values.map(e=>`${Vr(e[2]||"",n.nestLevel+1)}${s}${null!==r&&e[1]===r?(r++,`public static double ${e[0]} { get { return ${e[1]}; } }`):"number"==typeof e[1]?(r=e[1]+1,`public static double ${e[0]} { get { return ${e[1]}; } }`):`public static string ${e[0]} { get { return "${Object(br.a)(e[1])}"; } }`}`).join("\n\n")}\n${o}}\n`}else"never"===a[1].ty.kind&&a[1].ty.passThruCodeBlock}return t+"}\n"}const Gr="tynder/1.0";function Jr(e,t){if(0<t&&e.typeName&&!function(e){let t=!1;switch(e.messages&&(t=!0),e.message&&(t=!0),e.messageId&&(t=!0),e.kind){case"repeated":"number"==typeof e.min&&(t=!0),"number"==typeof e.max&&(t=!0);break;case"primitive":"number"==typeof e.minValue&&(t=!0),"number"==typeof e.maxValue&&(t=!0),"number"==typeof e.greaterThanValue&&(t=!0),"number"==typeof e.lessThanValue&&(t=!0),"number"==typeof e.minLength&&(t=!0),"number"==typeof e.maxLength&&(t=!0),e.pattern&&(t=!0)}return t}(e))switch(e.kind){case"optional":break;default:return Object.assign(Object.assign({kind:"symlink",symlinkTargetName:e.typeName,typeName:e.typeName},e.name?{name:e.name}:{}),e.docComment?{docComment:e.docComment}:{})}const n=Object.assign({},e);switch(n.kind){case"never":case"any":case"unknown":case"symlink":case"operator":break;case"primitive-value":"bigint"==typeof n.value&&(n.value=String(n.value),n.primitiveName="bigint");break;case"primitive":n.pattern&&(n.pattern=`/${n.pattern.source}/${n.pattern.flags}`);break;case"repeated":n.repeated=Jr(n.repeated,t+1);break;case"spread":n.spread=Jr(n.spread,t+1);break;case"sequence":n.sequence=n.sequence.map(e=>Jr(e,t+1));break;case"one-of":n.oneOf=n.oneOf.map(e=>Jr(e,t+1));break;case"optional":n.optional=Jr(n.optional,t+1);break;case"enum":n.values=n.values.slice().map(e=>null===e[2]||void 0===e[2]?e.slice(0,2):e);break;case"object":n.members=n.members.map(e=>[e[0],Jr(e[1],t+1),...e.slice(2)]),n.additionalProps&&(n.additionalProps=n.additionalProps.map(e=>[e[0].map(e=>"string"==typeof e?e:`/${e.source}/${e.flags}`),Jr(e[1],t+1),...e.slice(2)])),n.baseTypes&&(n.baseTypes=n.baseTypes.map(e=>Jr(e,t+1)));break;default:throw new Error("Unknown type assertion: "+n.kind)}return n}function Qr(e){const t={version:Gr,ns:{}},n={};for(const t of e.entries())n[t[0]]=Jr(t[1].ty,0);return t.ns["."]=n,t}function Zr(e,t){const n=Qr(e);return t?`\n// tslint:disable: object-literal-key-quotes\nconst schema = ${JSON.stringify(n,null,2)};\nexport default schema;\n// tslint:enable: object-literal-key-quotes\n`:JSON.stringify(n,null,2)}function ea(e,t){const n=/^\/(.*)\/([gimsuy]*)$/s.exec(e);if(n)return new RegExp(n[1],n[2]);throw new Error(t)}function ta(e){const t=Object.assign({},e);switch(t.kind){case"never":case"any":case"unknown":case"enum":case"symlink":case"operator":break;case"primitive-value":"bigint"===t.primitiveName&&(delete t.primitiveName,t.value=BigInt(t.value));break;case"primitive":t.pattern&&(t.pattern=ea(t.pattern,"Unknown pattern match assertion: "+t.pattern));break;case"repeated":t.repeated=ta(t.repeated);break;case"spread":t.spread=ta(t.spread);break;case"sequence":t.sequence=t.sequence.map(e=>ta(e));break;case"one-of":t.oneOf=t.oneOf.map(e=>ta(e));break;case"optional":t.optional=ta(t.optional);break;case"object":t.members=t.members.map(e=>[e[0],ta(e[1]),...e.slice(2)]),t.additionalProps&&(t.additionalProps=t.additionalProps.map(e=>[e[0].map(e=>String(e).startsWith("/")?ea(e,"Unknown additional props: "+e):e),ta(e[1]),...e.slice(2)]));break;default:throw new Error("Unknown type assertion: "+t.kind)}return t}function na(e){if(e.version!==Gr)throw new Error("Unknown schema version: "+e.version);const t=new Map,n=e.ns["."];for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.set(e,{ty:ta(n[e]),exported:!1,resolved:!1});return Object(yt.b)(t,{isDeserialization:!0})}function ra(e){return na(JSON.parse(e))}var aa=n(10),oa=n(12);const sa=[...r.a],ia=[...a.a]}])}));
//# sourceMappingURL=tynder.min.js.map